var yO=Object.create;var tm=Object.defineProperty,_O=Object.defineProperties,EO=Object.getOwnPropertyDescriptor,wO=Object.getOwnPropertyDescriptors,IO=Object.getOwnPropertyNames,ax=Object.getOwnPropertySymbols,ux=Object.getPrototypeOf,lx=Object.prototype.hasOwnProperty,CO=Object.prototype.propertyIsEnumerable,xO=Reflect.get;var cx=(t,e,n)=>e in t?tm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$=(t,e)=>{for(var n in e||={})lx.call(e,n)&&cx(t,n,e[n]);if(ax)for(var n of ax(e))CO.call(e,n)&&cx(t,n,e[n]);return t},ke=(t,e)=>_O(t,wO(e));var dx=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ge=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var DO=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of IO(e))!lx.call(t,i)&&i!==n&&tm(t,i,{get:()=>e[i],enumerable:!(r=EO(e,i))||r.enumerable});return t};var bO=(t,e,n)=>(n=t!=null?yO(ux(t)):{},DO(e||!t||!t.__esModule?tm(n,"default",{value:t,enumerable:!0}):n,t));var Zr=(t,e,n)=>xO(ux(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var tP=ge(()=>{"use strict"});var Ee=ge((Xp,nP)=>{"use strict";(function(t,e){typeof Xp=="object"?nP.exports=Xp=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(Xp,function(){var t=t||function(e,n){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof dx=="function")try{r=tP()}catch{}var i=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function g(){}return function(m){var w;return g.prototype=m,w=new g,g.prototype=null,w}}(),o={},a=o.lib={},c=a.Base=function(){return{extend:function(g){var m=s(this);return g&&m.mixIn(g),(!m.hasOwnProperty("init")||this.init===m.init)&&(m.init=function(){m.$super.init.apply(this,arguments)}),m.init.prototype=m,m.$super=this,m},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var m in g)g.hasOwnProperty(m)&&(this[m]=g[m]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=a.WordArray=c.extend({init:function(g,m){g=this.words=g||[],m!=n?this.sigBytes=m:this.sigBytes=g.length*4},toString:function(g){return(g||d).stringify(this)},concat:function(g){var m=this.words,w=g.words,E=this.sigBytes,C=g.sigBytes;if(this.clamp(),E%4)for(var I=0;I<C;I++){var S=w[I>>>2]>>>24-I%4*8&255;m[E+I>>>2]|=S<<24-(E+I)%4*8}else for(var b=0;b<C;b+=4)m[E+b>>>2]=w[b>>>2];return this.sigBytes+=C,this},clamp:function(){var g=this.words,m=this.sigBytes;g[m>>>2]&=4294967295<<32-m%4*8,g.length=e.ceil(m/4)},clone:function(){var g=c.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var m=[],w=0;w<g;w+=4)m.push(i());return new u.init(m,g)}}),l=o.enc={},d=l.Hex={stringify:function(g){for(var m=g.words,w=g.sigBytes,E=[],C=0;C<w;C++){var I=m[C>>>2]>>>24-C%4*8&255;E.push((I>>>4).toString(16)),E.push((I&15).toString(16))}return E.join("")},parse:function(g){for(var m=g.length,w=[],E=0;E<m;E+=2)w[E>>>3]|=parseInt(g.substr(E,2),16)<<24-E%8*4;return new u.init(w,m/2)}},h=l.Latin1={stringify:function(g){for(var m=g.words,w=g.sigBytes,E=[],C=0;C<w;C++){var I=m[C>>>2]>>>24-C%4*8&255;E.push(String.fromCharCode(I))}return E.join("")},parse:function(g){for(var m=g.length,w=[],E=0;E<m;E++)w[E>>>2]|=(g.charCodeAt(E)&255)<<24-E%4*8;return new u.init(w,m)}},f=l.Utf8={stringify:function(g){try{return decodeURIComponent(escape(h.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return h.parse(unescape(encodeURIComponent(g)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=f.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var m,w=this._data,E=w.words,C=w.sigBytes,I=this.blockSize,S=I*4,b=C/S;g?b=e.ceil(b):b=e.max((b|0)-this._minBufferSize,0);var k=b*I,U=e.min(k*4,C);if(k){for(var x=0;x<k;x+=I)this._doProcessBlock(E,x);m=E.splice(0,k),w.sigBytes-=U}return new u.init(m,U)},clone:function(){var g=c.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),v=a.Hasher=p.extend({cfg:c.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var m=this._doFinalize();return m},blockSize:512/32,_createHelper:function(g){return function(m,w){return new g.init(w).finalize(m)}},_createHmacHelper:function(g){return function(m,w){return new y.HMAC.init(g,w).finalize(m)}}}),y=o.algo={};return o}(Math);return t})});var hl=ge((Jp,rP)=>{"use strict";(function(t,e){typeof Jp=="object"?rP.exports=Jp=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Jp,function(t){return function(e){var n=t,r=n.lib,i=r.Base,s=r.WordArray,o=n.x64={},a=o.Word=i.extend({init:function(u,l){this.high=u,this.low=l}}),c=o.WordArray=i.extend({init:function(u,l){u=this.words=u||[],l!=e?this.sigBytes=l:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,l=u.length,d=[],h=0;h<l;h++){var f=u[h];d.push(f.high),d.push(f.low)}return s.create(d,this.sigBytes)},clone:function(){for(var u=i.clone.call(this),l=u.words=this.words.slice(0),d=l.length,h=0;h<d;h++)l[h]=l[h].clone();return u}})}(),t})});var sP=ge((Zp,iP)=>{"use strict";(function(t,e){typeof Zp=="object"?iP.exports=Zp=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Zp,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,n=e.lib,r=n.WordArray,i=r.init,s=r.init=function(o){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),(o instanceof Int8Array||typeof Uint8ClampedArray<"u"&&o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array)&&(o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),o instanceof Uint8Array){for(var a=o.byteLength,c=[],u=0;u<a;u++)c[u>>>2]|=o[u]<<24-u%4*8;i.call(this,c,a)}else i.apply(this,arguments)};s.prototype=r}}(),t.lib.WordArray})});var aP=ge((eg,oP)=>{"use strict";(function(t,e){typeof eg=="object"?oP.exports=eg=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(eg,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,s=i.Utf16=i.Utf16BE={stringify:function(a){for(var c=a.words,u=a.sigBytes,l=[],d=0;d<u;d+=2){var h=c[d>>>2]>>>16-d%4*8&65535;l.push(String.fromCharCode(h))}return l.join("")},parse:function(a){for(var c=a.length,u=[],l=0;l<c;l++)u[l>>>1]|=a.charCodeAt(l)<<16-l%2*16;return r.create(u,c*2)}};i.Utf16LE={stringify:function(a){for(var c=a.words,u=a.sigBytes,l=[],d=0;d<u;d+=2){var h=o(c[d>>>2]>>>16-d%4*8&65535);l.push(String.fromCharCode(h))}return l.join("")},parse:function(a){for(var c=a.length,u=[],l=0;l<c;l++)u[l>>>1]|=o(a.charCodeAt(l)<<16-l%2*16);return r.create(u,c*2)}};function o(a){return a<<8&4278255360|a>>>8&16711935}}(),t.enc.Utf16})});var Ui=ge((tg,cP)=>{"use strict";(function(t,e){typeof tg=="object"?cP.exports=tg=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(tg,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,s=i.Base64={stringify:function(a){var c=a.words,u=a.sigBytes,l=this._map;a.clamp();for(var d=[],h=0;h<u;h+=3)for(var f=c[h>>>2]>>>24-h%4*8&255,p=c[h+1>>>2]>>>24-(h+1)%4*8&255,v=c[h+2>>>2]>>>24-(h+2)%4*8&255,y=f<<16|p<<8|v,g=0;g<4&&h+g*.75<u;g++)d.push(l.charAt(y>>>6*(3-g)&63));var m=l.charAt(64);if(m)for(;d.length%4;)d.push(m);return d.join("")},parse:function(a){var c=a.length,u=this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var d=0;d<u.length;d++)l[u.charCodeAt(d)]=d}var h=u.charAt(64);if(h){var f=a.indexOf(h);f!==-1&&(c=f)}return o(a,c,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(a,c,u){for(var l=[],d=0,h=0;h<c;h++)if(h%4){var f=u[a.charCodeAt(h-1)]<<h%4*2,p=u[a.charCodeAt(h)]>>>6-h%4*2,v=f|p;l[d>>>2]|=v<<24-d%4*8,d++}return r.create(l,d)}}(),t.enc.Base64})});var lP=ge((ng,uP)=>{"use strict";(function(t,e){typeof ng=="object"?uP.exports=ng=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(ng,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,s=i.Base64url={stringify:function(a,c){c===void 0&&(c=!0);var u=a.words,l=a.sigBytes,d=c?this._safe_map:this._map;a.clamp();for(var h=[],f=0;f<l;f+=3)for(var p=u[f>>>2]>>>24-f%4*8&255,v=u[f+1>>>2]>>>24-(f+1)%4*8&255,y=u[f+2>>>2]>>>24-(f+2)%4*8&255,g=p<<16|v<<8|y,m=0;m<4&&f+m*.75<l;m++)h.push(d.charAt(g>>>6*(3-m)&63));var w=d.charAt(64);if(w)for(;h.length%4;)h.push(w);return h.join("")},parse:function(a,c){c===void 0&&(c=!0);var u=a.length,l=c?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<l.length;h++)d[l.charCodeAt(h)]=h}var f=l.charAt(64);if(f){var p=a.indexOf(f);p!==-1&&(u=p)}return o(a,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(a,c,u){for(var l=[],d=0,h=0;h<c;h++)if(h%4){var f=u[a.charCodeAt(h-1)]<<h%4*2,p=u[a.charCodeAt(h)]>>>6-h%4*2,v=f|p;l[d>>>2]|=v<<24-d%4*8,d++}return r.create(l,d)}}(),t.enc.Base64url})});var ji=ge((rg,dP)=>{"use strict";(function(t,e){typeof rg=="object"?dP.exports=rg=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(rg,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.algo,a=[];(function(){for(var f=0;f<64;f++)a[f]=e.abs(e.sin(f+1))*4294967296|0})();var c=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(f,p){for(var v=0;v<16;v++){var y=p+v,g=f[y];f[y]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}var m=this._hash.words,w=f[p+0],E=f[p+1],C=f[p+2],I=f[p+3],S=f[p+4],b=f[p+5],k=f[p+6],U=f[p+7],x=f[p+8],F=f[p+9],j=f[p+10],N=f[p+11],X=f[p+12],W=f[p+13],ue=f[p+14],we=f[p+15],D=m[0],R=m[1],P=m[2],T=m[3];D=u(D,R,P,T,w,7,a[0]),T=u(T,D,R,P,E,12,a[1]),P=u(P,T,D,R,C,17,a[2]),R=u(R,P,T,D,I,22,a[3]),D=u(D,R,P,T,S,7,a[4]),T=u(T,D,R,P,b,12,a[5]),P=u(P,T,D,R,k,17,a[6]),R=u(R,P,T,D,U,22,a[7]),D=u(D,R,P,T,x,7,a[8]),T=u(T,D,R,P,F,12,a[9]),P=u(P,T,D,R,j,17,a[10]),R=u(R,P,T,D,N,22,a[11]),D=u(D,R,P,T,X,7,a[12]),T=u(T,D,R,P,W,12,a[13]),P=u(P,T,D,R,ue,17,a[14]),R=u(R,P,T,D,we,22,a[15]),D=l(D,R,P,T,E,5,a[16]),T=l(T,D,R,P,k,9,a[17]),P=l(P,T,D,R,N,14,a[18]),R=l(R,P,T,D,w,20,a[19]),D=l(D,R,P,T,b,5,a[20]),T=l(T,D,R,P,j,9,a[21]),P=l(P,T,D,R,we,14,a[22]),R=l(R,P,T,D,S,20,a[23]),D=l(D,R,P,T,F,5,a[24]),T=l(T,D,R,P,ue,9,a[25]),P=l(P,T,D,R,I,14,a[26]),R=l(R,P,T,D,x,20,a[27]),D=l(D,R,P,T,W,5,a[28]),T=l(T,D,R,P,C,9,a[29]),P=l(P,T,D,R,U,14,a[30]),R=l(R,P,T,D,X,20,a[31]),D=d(D,R,P,T,b,4,a[32]),T=d(T,D,R,P,x,11,a[33]),P=d(P,T,D,R,N,16,a[34]),R=d(R,P,T,D,ue,23,a[35]),D=d(D,R,P,T,E,4,a[36]),T=d(T,D,R,P,S,11,a[37]),P=d(P,T,D,R,U,16,a[38]),R=d(R,P,T,D,j,23,a[39]),D=d(D,R,P,T,W,4,a[40]),T=d(T,D,R,P,w,11,a[41]),P=d(P,T,D,R,I,16,a[42]),R=d(R,P,T,D,k,23,a[43]),D=d(D,R,P,T,F,4,a[44]),T=d(T,D,R,P,X,11,a[45]),P=d(P,T,D,R,we,16,a[46]),R=d(R,P,T,D,C,23,a[47]),D=h(D,R,P,T,w,6,a[48]),T=h(T,D,R,P,U,10,a[49]),P=h(P,T,D,R,ue,15,a[50]),R=h(R,P,T,D,b,21,a[51]),D=h(D,R,P,T,X,6,a[52]),T=h(T,D,R,P,I,10,a[53]),P=h(P,T,D,R,j,15,a[54]),R=h(R,P,T,D,E,21,a[55]),D=h(D,R,P,T,x,6,a[56]),T=h(T,D,R,P,we,10,a[57]),P=h(P,T,D,R,k,15,a[58]),R=h(R,P,T,D,W,21,a[59]),D=h(D,R,P,T,S,6,a[60]),T=h(T,D,R,P,N,10,a[61]),P=h(P,T,D,R,C,15,a[62]),R=h(R,P,T,D,F,21,a[63]),m[0]=m[0]+D|0,m[1]=m[1]+R|0,m[2]=m[2]+P|0,m[3]=m[3]+T|0},_doFinalize:function(){var f=this._data,p=f.words,v=this._nDataBytes*8,y=f.sigBytes*8;p[y>>>5]|=128<<24-y%32;var g=e.floor(v/4294967296),m=v;p[(y+64>>>9<<4)+15]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,p[(y+64>>>9<<4)+14]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,f.sigBytes=(p.length+1)*4,this._process();for(var w=this._hash,E=w.words,C=0;C<4;C++){var I=E[C];E[C]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return w},clone:function(){var f=s.clone.call(this);return f._hash=this._hash.clone(),f}});function u(f,p,v,y,g,m,w){var E=f+(p&v|~p&y)+g+w;return(E<<m|E>>>32-m)+p}function l(f,p,v,y,g,m,w){var E=f+(p&y|v&~y)+g+w;return(E<<m|E>>>32-m)+p}function d(f,p,v,y,g,m,w){var E=f+(p^v^y)+g+w;return(E<<m|E>>>32-m)+p}function h(f,p,v,y,g,m,w){var E=f+(v^(p|~y))+g+w;return(E<<m|E>>>32-m)+p}n.MD5=s._createHelper(c),n.HmacMD5=s._createHmacHelper(c)}(Math),t.MD5})});var FI=ge((ig,hP)=>{"use strict";(function(t,e){typeof ig=="object"?hP.exports=ig=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(ig,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,s=e.algo,o=[],a=s.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,u){for(var l=this._hash.words,d=l[0],h=l[1],f=l[2],p=l[3],v=l[4],y=0;y<80;y++){if(y<16)o[y]=c[u+y]|0;else{var g=o[y-3]^o[y-8]^o[y-14]^o[y-16];o[y]=g<<1|g>>>31}var m=(d<<5|d>>>27)+v+o[y];y<20?m+=(h&f|~h&p)+1518500249:y<40?m+=(h^f^p)+1859775393:y<60?m+=(h&f|h&p|f&p)-1894007588:m+=(h^f^p)-899497514,v=p,p=f,f=h<<30|h>>>2,h=d,d=m}l[0]=l[0]+d|0,l[1]=l[1]+h|0,l[2]=l[2]+f|0,l[3]=l[3]+p|0,l[4]=l[4]+v|0},_doFinalize:function(){var c=this._data,u=c.words,l=this._nDataBytes*8,d=c.sigBytes*8;return u[d>>>5]|=128<<24-d%32,u[(d+64>>>9<<4)+14]=Math.floor(l/4294967296),u[(d+64>>>9<<4)+15]=l,c.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c}});e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a)}(),t.SHA1})});var og=ge((sg,fP)=>{"use strict";(function(t,e){typeof sg=="object"?fP.exports=sg=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(sg,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.algo,a=[],c=[];(function(){function d(v){for(var y=e.sqrt(v),g=2;g<=y;g++)if(!(v%g))return!1;return!0}function h(v){return(v-(v|0))*4294967296|0}for(var f=2,p=0;p<64;)d(f)&&(p<8&&(a[p]=h(e.pow(f,1/2))),c[p]=h(e.pow(f,1/3)),p++),f++})();var u=[],l=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(d,h){for(var f=this._hash.words,p=f[0],v=f[1],y=f[2],g=f[3],m=f[4],w=f[5],E=f[6],C=f[7],I=0;I<64;I++){if(I<16)u[I]=d[h+I]|0;else{var S=u[I-15],b=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3,k=u[I-2],U=(k<<15|k>>>17)^(k<<13|k>>>19)^k>>>10;u[I]=b+u[I-7]+U+u[I-16]}var x=m&w^~m&E,F=p&v^p&y^v&y,j=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),N=(m<<26|m>>>6)^(m<<21|m>>>11)^(m<<7|m>>>25),X=C+N+x+c[I]+u[I],W=j+F;C=E,E=w,w=m,m=g+X|0,g=y,y=v,v=p,p=X+W|0}f[0]=f[0]+p|0,f[1]=f[1]+v|0,f[2]=f[2]+y|0,f[3]=f[3]+g|0,f[4]=f[4]+m|0,f[5]=f[5]+w|0,f[6]=f[6]+E|0,f[7]=f[7]+C|0},_doFinalize:function(){var d=this._data,h=d.words,f=this._nDataBytes*8,p=d.sigBytes*8;return h[p>>>5]|=128<<24-p%32,h[(p+64>>>9<<4)+14]=e.floor(f/4294967296),h[(p+64>>>9<<4)+15]=f,d.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});n.SHA256=s._createHelper(l),n.HmacSHA256=s._createHmacHelper(l)}(Math),t.SHA256})});var gP=ge((ag,pP)=>{"use strict";(function(t,e,n){typeof ag=="object"?pP.exports=ag=e(Ee(),og()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(ag,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.algo,s=i.SHA256,o=i.SHA224=s.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=s._doFinalize.call(this);return a.sigBytes-=4,a}});e.SHA224=s._createHelper(o),e.HmacSHA224=s._createHmacHelper(o)}(),t.SHA224})});var OI=ge((cg,mP)=>{"use strict";(function(t,e,n){typeof cg=="object"?mP.exports=cg=e(Ee(),hl()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(cg,function(t){return function(){var e=t,n=e.lib,r=n.Hasher,i=e.x64,s=i.Word,o=i.WordArray,a=e.algo;function c(){return s.create.apply(s,arguments)}var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],l=[];(function(){for(var h=0;h<80;h++)l[h]=c()})();var d=a.SHA512=r.extend({_doReset:function(){this._hash=new o.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(h,f){for(var p=this._hash.words,v=p[0],y=p[1],g=p[2],m=p[3],w=p[4],E=p[5],C=p[6],I=p[7],S=v.high,b=v.low,k=y.high,U=y.low,x=g.high,F=g.low,j=m.high,N=m.low,X=w.high,W=w.low,ue=E.high,we=E.low,D=C.high,R=C.low,P=I.high,T=I.low,$e=S,Ve=b,Ht=k,de=U,tc=x,io=F,Zg=j,nc=N,Tn=X,Zt=W,Ml=ue,rc=we,Pl=D,ic=R,em=P,sc=T,An=0;An<80;An++){var hn,Xr,kl=l[An];if(An<16)Xr=kl.high=h[f+An*2]|0,hn=kl.low=h[f+An*2+1]|0;else{var QC=l[An-15],so=QC.high,oc=QC.low,sO=(so>>>1|oc<<31)^(so>>>8|oc<<24)^so>>>7,YC=(oc>>>1|so<<31)^(oc>>>8|so<<24)^(oc>>>7|so<<25),XC=l[An-2],oo=XC.high,ac=XC.low,oO=(oo>>>19|ac<<13)^(oo<<3|ac>>>29)^oo>>>6,JC=(ac>>>19|oo<<13)^(ac<<3|oo>>>29)^(ac>>>6|oo<<26),ZC=l[An-7],aO=ZC.high,cO=ZC.low,ex=l[An-16],uO=ex.high,tx=ex.low;hn=YC+cO,Xr=sO+aO+(hn>>>0<YC>>>0?1:0),hn=hn+JC,Xr=Xr+oO+(hn>>>0<JC>>>0?1:0),hn=hn+tx,Xr=Xr+uO+(hn>>>0<tx>>>0?1:0),kl.high=Xr,kl.low=hn}var lO=Tn&Ml^~Tn&Pl,nx=Zt&rc^~Zt&ic,dO=$e&Ht^$e&tc^Ht&tc,hO=Ve&de^Ve&io^de&io,fO=($e>>>28|Ve<<4)^($e<<30|Ve>>>2)^($e<<25|Ve>>>7),rx=(Ve>>>28|$e<<4)^(Ve<<30|$e>>>2)^(Ve<<25|$e>>>7),pO=(Tn>>>14|Zt<<18)^(Tn>>>18|Zt<<14)^(Tn<<23|Zt>>>9),gO=(Zt>>>14|Tn<<18)^(Zt>>>18|Tn<<14)^(Zt<<23|Tn>>>9),ix=u[An],mO=ix.high,sx=ix.low,en=sc+gO,Jr=em+pO+(en>>>0<sc>>>0?1:0),en=en+nx,Jr=Jr+lO+(en>>>0<nx>>>0?1:0),en=en+sx,Jr=Jr+mO+(en>>>0<sx>>>0?1:0),en=en+hn,Jr=Jr+Xr+(en>>>0<hn>>>0?1:0),ox=rx+hO,vO=fO+dO+(ox>>>0<rx>>>0?1:0);em=Pl,sc=ic,Pl=Ml,ic=rc,Ml=Tn,rc=Zt,Zt=nc+en|0,Tn=Zg+Jr+(Zt>>>0<nc>>>0?1:0)|0,Zg=tc,nc=io,tc=Ht,io=de,Ht=$e,de=Ve,Ve=en+ox|0,$e=Jr+vO+(Ve>>>0<en>>>0?1:0)|0}b=v.low=b+Ve,v.high=S+$e+(b>>>0<Ve>>>0?1:0),U=y.low=U+de,y.high=k+Ht+(U>>>0<de>>>0?1:0),F=g.low=F+io,g.high=x+tc+(F>>>0<io>>>0?1:0),N=m.low=N+nc,m.high=j+Zg+(N>>>0<nc>>>0?1:0),W=w.low=W+Zt,w.high=X+Tn+(W>>>0<Zt>>>0?1:0),we=E.low=we+rc,E.high=ue+Ml+(we>>>0<rc>>>0?1:0),R=C.low=R+ic,C.high=D+Pl+(R>>>0<ic>>>0?1:0),T=I.low=T+sc,I.high=P+em+(T>>>0<sc>>>0?1:0)},_doFinalize:function(){var h=this._data,f=h.words,p=this._nDataBytes*8,v=h.sigBytes*8;f[v>>>5]|=128<<24-v%32,f[(v+128>>>10<<5)+30]=Math.floor(p/4294967296),f[(v+128>>>10<<5)+31]=p,h.sigBytes=f.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var h=r.clone.call(this);return h._hash=this._hash.clone(),h},blockSize:1024/32});e.SHA512=r._createHelper(d),e.HmacSHA512=r._createHmacHelper(d)}(),t.SHA512})});var yP=ge((ug,vP)=>{"use strict";(function(t,e,n){typeof ug=="object"?vP.exports=ug=e(Ee(),hl(),OI()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(ug,function(t){return function(){var e=t,n=e.x64,r=n.Word,i=n.WordArray,s=e.algo,o=s.SHA512,a=s.SHA384=o.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=16,c}});e.SHA384=o._createHelper(a),e.HmacSHA384=o._createHmacHelper(a)}(),t.SHA384})});var EP=ge((lg,_P)=>{"use strict";(function(t,e,n){typeof lg=="object"?_P.exports=lg=e(Ee(),hl()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(lg,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.x64,a=o.Word,c=n.algo,u=[],l=[],d=[];(function(){for(var p=1,v=0,y=0;y<24;y++){u[p+5*v]=(y+1)*(y+2)/2%64;var g=v%5,m=(2*p+3*v)%5;p=g,v=m}for(var p=0;p<5;p++)for(var v=0;v<5;v++)l[p+5*v]=v+(2*p+3*v)%5*5;for(var w=1,E=0;E<24;E++){for(var C=0,I=0,S=0;S<7;S++){if(w&1){var b=(1<<S)-1;b<32?I^=1<<b:C^=1<<b-32}w&128?w=w<<1^113:w<<=1}d[E]=a.create(C,I)}})();var h=[];(function(){for(var p=0;p<25;p++)h[p]=a.create()})();var f=c.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var p=this._state=[],v=0;v<25;v++)p[v]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(p,v){for(var y=this._state,g=this.blockSize/2,m=0;m<g;m++){var w=p[v+2*m],E=p[v+2*m+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360;var C=y[m];C.high^=E,C.low^=w}for(var I=0;I<24;I++){for(var S=0;S<5;S++){for(var b=0,k=0,U=0;U<5;U++){var C=y[S+5*U];b^=C.high,k^=C.low}var x=h[S];x.high=b,x.low=k}for(var S=0;S<5;S++)for(var F=h[(S+4)%5],j=h[(S+1)%5],N=j.high,X=j.low,b=F.high^(N<<1|X>>>31),k=F.low^(X<<1|N>>>31),U=0;U<5;U++){var C=y[S+5*U];C.high^=b,C.low^=k}for(var W=1;W<25;W++){var b,k,C=y[W],ue=C.high,we=C.low,D=u[W];D<32?(b=ue<<D|we>>>32-D,k=we<<D|ue>>>32-D):(b=we<<D-32|ue>>>64-D,k=ue<<D-32|we>>>64-D);var R=h[l[W]];R.high=b,R.low=k}var P=h[0],T=y[0];P.high=T.high,P.low=T.low;for(var S=0;S<5;S++)for(var U=0;U<5;U++){var W=S+5*U,C=y[W],$e=h[W],Ve=h[(S+1)%5+5*U],Ht=h[(S+2)%5+5*U];C.high=$e.high^~Ve.high&Ht.high,C.low=$e.low^~Ve.low&Ht.low}var C=y[0],de=d[I];C.high^=de.high,C.low^=de.low}},_doFinalize:function(){var p=this._data,v=p.words,y=this._nDataBytes*8,g=p.sigBytes*8,m=this.blockSize*32;v[g>>>5]|=1<<24-g%32,v[(e.ceil((g+1)/m)*m>>>5)-1]|=128,p.sigBytes=v.length*4,this._process();for(var w=this._state,E=this.cfg.outputLength/8,C=E/8,I=[],S=0;S<C;S++){var b=w[S],k=b.high,U=b.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,I.push(U),I.push(k)}return new i.init(I,E)},clone:function(){for(var p=s.clone.call(this),v=p._state=this._state.slice(0),y=0;y<25;y++)v[y]=v[y].clone();return p}});n.SHA3=s._createHelper(f),n.HmacSHA3=s._createHmacHelper(f)}(Math),t.SHA3})});var IP=ge((dg,wP)=>{"use strict";(function(t,e){typeof dg=="object"?wP.exports=dg=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(dg,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),f=o.RIPEMD160=s.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(E,C){for(var I=0;I<16;I++){var S=C+I,b=E[S];E[S]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var k=this._hash.words,U=d.words,x=h.words,F=a.words,j=c.words,N=u.words,X=l.words,W,ue,we,D,R,P,T,$e,Ve,Ht;P=W=k[0],T=ue=k[1],$e=we=k[2],Ve=D=k[3],Ht=R=k[4];for(var de,I=0;I<80;I+=1)de=W+E[C+F[I]]|0,I<16?de+=p(ue,we,D)+U[0]:I<32?de+=v(ue,we,D)+U[1]:I<48?de+=y(ue,we,D)+U[2]:I<64?de+=g(ue,we,D)+U[3]:de+=m(ue,we,D)+U[4],de=de|0,de=w(de,N[I]),de=de+R|0,W=R,R=D,D=w(we,10),we=ue,ue=de,de=P+E[C+j[I]]|0,I<16?de+=m(T,$e,Ve)+x[0]:I<32?de+=g(T,$e,Ve)+x[1]:I<48?de+=y(T,$e,Ve)+x[2]:I<64?de+=v(T,$e,Ve)+x[3]:de+=p(T,$e,Ve)+x[4],de=de|0,de=w(de,X[I]),de=de+Ht|0,P=Ht,Ht=Ve,Ve=w($e,10),$e=T,T=de;de=k[1]+we+Ve|0,k[1]=k[2]+D+Ht|0,k[2]=k[3]+R+P|0,k[3]=k[4]+W+T|0,k[4]=k[0]+ue+$e|0,k[0]=de},_doFinalize:function(){var E=this._data,C=E.words,I=this._nDataBytes*8,S=E.sigBytes*8;C[S>>>5]|=128<<24-S%32,C[(S+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,E.sigBytes=(C.length+1)*4,this._process();for(var b=this._hash,k=b.words,U=0;U<5;U++){var x=k[U];k[U]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}return b},clone:function(){var E=s.clone.call(this);return E._hash=this._hash.clone(),E}});function p(E,C,I){return E^C^I}function v(E,C,I){return E&C|~E&I}function y(E,C,I){return(E|~C)^I}function g(E,C,I){return E&I|C&~I}function m(E,C,I){return E^(C|~I)}function w(E,C){return E<<C|E>>>32-C}n.RIPEMD160=s._createHelper(f),n.HmacRIPEMD160=s._createHmacHelper(f)}(Math),t.RIPEMD160})});var fg=ge((hg,CP)=>{"use strict";(function(t,e){typeof hg=="object"?CP.exports=hg=e(Ee()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(hg,function(t){(function(){var e=t,n=e.lib,r=n.Base,i=e.enc,s=i.Utf8,o=e.algo,a=o.HMAC=r.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=s.parse(u));var l=c.blockSize,d=l*4;u.sigBytes>d&&(u=c.finalize(u)),u.clamp();for(var h=this._oKey=u.clone(),f=this._iKey=u.clone(),p=h.words,v=f.words,y=0;y<l;y++)p[y]^=1549556828,v[y]^=909522486;h.sigBytes=f.sigBytes=d,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,l=u.finalize(c);u.reset();var d=u.finalize(this._oKey.clone().concat(l));return d}})})()})});var DP=ge((pg,xP)=>{"use strict";(function(t,e,n){typeof pg=="object"?xP.exports=pg=e(Ee(),og(),fg()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(pg,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,s=e.algo,o=s.SHA256,a=s.HMAC,c=s.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:25e4}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,l){for(var d=this.cfg,h=a.create(d.hasher,u),f=i.create(),p=i.create([1]),v=f.words,y=p.words,g=d.keySize,m=d.iterations;v.length<g;){var w=h.update(l).finalize(p);h.reset();for(var E=w.words,C=E.length,I=w,S=1;S<m;S++){I=h.finalize(I),h.reset();for(var b=I.words,k=0;k<C;k++)E[k]^=b[k]}f.concat(w),y[0]++}return f.sigBytes=g*4,f}});e.PBKDF2=function(u,l,d){return c.create(d).compute(u,l)}}(),t.PBKDF2})});var Kr=ge((gg,bP)=>{"use strict";(function(t,e,n){typeof gg=="object"?bP.exports=gg=e(Ee(),FI(),fg()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(gg,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,s=e.algo,o=s.MD5,a=s.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,u){for(var l,d=this.cfg,h=d.hasher.create(),f=i.create(),p=f.words,v=d.keySize,y=d.iterations;p.length<v;){l&&h.update(l),l=h.update(c).finalize(u),h.reset();for(var g=1;g<y;g++)l=h.finalize(l),h.reset();f.concat(l)}return f.sigBytes=v*4,f}});e.EvpKDF=function(c,u,l){return a.create(l).compute(c,u)}}(),t.EvpKDF})});var at=ge((mg,TP)=>{"use strict";(function(t,e,n){typeof mg=="object"?TP.exports=mg=e(Ee(),Kr()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(mg,function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,i=r.Base,s=r.WordArray,o=r.BufferedBlockAlgorithm,a=n.enc,c=a.Utf8,u=a.Base64,l=n.algo,d=l.EvpKDF,h=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(x,F){return this.create(this._ENC_XFORM_MODE,x,F)},createDecryptor:function(x,F){return this.create(this._DEC_XFORM_MODE,x,F)},init:function(x,F,j){this.cfg=this.cfg.extend(j),this._xformMode=x,this._key=F,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(x){return this._append(x),this._process()},finalize:function(x){x&&this._append(x);var F=this._doFinalize();return F},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function x(F){return typeof F=="string"?U:S}return function(F){return{encrypt:function(j,N,X){return x(N).encrypt(F,j,N,X)},decrypt:function(j,N,X){return x(N).decrypt(F,j,N,X)}}}}()}),f=r.StreamCipher=h.extend({_doFinalize:function(){var x=this._process(!0);return x},blockSize:1}),p=n.mode={},v=r.BlockCipherMode=i.extend({createEncryptor:function(x,F){return this.Encryptor.create(x,F)},createDecryptor:function(x,F){return this.Decryptor.create(x,F)},init:function(x,F){this._cipher=x,this._iv=F}}),y=p.CBC=function(){var x=v.extend();x.Encryptor=x.extend({processBlock:function(j,N){var X=this._cipher,W=X.blockSize;F.call(this,j,N,W),X.encryptBlock(j,N),this._prevBlock=j.slice(N,N+W)}}),x.Decryptor=x.extend({processBlock:function(j,N){var X=this._cipher,W=X.blockSize,ue=j.slice(N,N+W);X.decryptBlock(j,N),F.call(this,j,N,W),this._prevBlock=ue}});function F(j,N,X){var W,ue=this._iv;ue?(W=ue,this._iv=e):W=this._prevBlock;for(var we=0;we<X;we++)j[N+we]^=W[we]}return x}(),g=n.pad={},m=g.Pkcs7={pad:function(x,F){for(var j=F*4,N=j-x.sigBytes%j,X=N<<24|N<<16|N<<8|N,W=[],ue=0;ue<N;ue+=4)W.push(X);var we=s.create(W,N);x.concat(we)},unpad:function(x){var F=x.words[x.sigBytes-1>>>2]&255;x.sigBytes-=F}},w=r.BlockCipher=h.extend({cfg:h.cfg.extend({mode:y,padding:m}),reset:function(){var x;h.reset.call(this);var F=this.cfg,j=F.iv,N=F.mode;this._xformMode==this._ENC_XFORM_MODE?x=N.createEncryptor:(x=N.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==x?this._mode.init(this,j&&j.words):(this._mode=x.call(N,this,j&&j.words),this._mode.__creator=x)},_doProcessBlock:function(x,F){this._mode.processBlock(x,F)},_doFinalize:function(){var x,F=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(F.pad(this._data,this.blockSize),x=this._process(!0)):(x=this._process(!0),F.unpad(x)),x},blockSize:128/32}),E=r.CipherParams=i.extend({init:function(x){this.mixIn(x)},toString:function(x){return(x||this.formatter).stringify(this)}}),C=n.format={},I=C.OpenSSL={stringify:function(x){var F,j=x.ciphertext,N=x.salt;return N?F=s.create([1398893684,1701076831]).concat(N).concat(j):F=j,F.toString(u)},parse:function(x){var F,j=u.parse(x),N=j.words;return N[0]==1398893684&&N[1]==1701076831&&(F=s.create(N.slice(2,4)),N.splice(0,4),j.sigBytes-=16),E.create({ciphertext:j,salt:F})}},S=r.SerializableCipher=i.extend({cfg:i.extend({format:I}),encrypt:function(x,F,j,N){N=this.cfg.extend(N);var X=x.createEncryptor(j,N),W=X.finalize(F),ue=X.cfg;return E.create({ciphertext:W,key:j,iv:ue.iv,algorithm:x,mode:ue.mode,padding:ue.padding,blockSize:x.blockSize,formatter:N.format})},decrypt:function(x,F,j,N){N=this.cfg.extend(N),F=this._parse(F,N.format);var X=x.createDecryptor(j,N).finalize(F.ciphertext);return X},_parse:function(x,F){return typeof x=="string"?F.parse(x,this):x}}),b=n.kdf={},k=b.OpenSSL={execute:function(x,F,j,N,X){if(N||(N=s.random(64/8)),X)var W=d.create({keySize:F+j,hasher:X}).compute(x,N);else var W=d.create({keySize:F+j}).compute(x,N);var ue=s.create(W.words.slice(F),j*4);return W.sigBytes=F*4,E.create({key:W,iv:ue,salt:N})}},U=r.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:k}),encrypt:function(x,F,j,N){N=this.cfg.extend(N);var X=N.kdf.execute(j,x.keySize,x.ivSize,N.salt,N.hasher);N.iv=X.iv;var W=S.encrypt.call(this,x,F,X.key,N);return W.mixIn(X),W},decrypt:function(x,F,j,N){N=this.cfg.extend(N),F=this._parse(F,N.format);var X=N.kdf.execute(j,x.keySize,x.ivSize,F.salt,N.hasher);N.iv=X.iv;var W=S.decrypt.call(this,x,F,X.key,N);return W}})}()})});var SP=ge((vg,AP)=>{"use strict";(function(t,e,n){typeof vg=="object"?AP.exports=vg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(vg,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(r,i){var s=this._cipher,o=s.blockSize;n.call(this,r,i,o,s),this._prevBlock=r.slice(i,i+o)}}),e.Decryptor=e.extend({processBlock:function(r,i){var s=this._cipher,o=s.blockSize,a=r.slice(i,i+o);n.call(this,r,i,o,s),this._prevBlock=a}});function n(r,i,s,o){var a,c=this._iv;c?(a=c.slice(0),this._iv=void 0):a=this._prevBlock,o.encryptBlock(a,0);for(var u=0;u<s;u++)r[i+u]^=a[u]}return e}(),t.mode.CFB})});var NP=ge((yg,RP)=>{"use strict";(function(t,e,n){typeof yg=="object"?RP.exports=yg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(yg,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(r,i){var s=this._cipher,o=s.blockSize,a=this._iv,c=this._counter;a&&(c=this._counter=a.slice(0),this._iv=void 0);var u=c.slice(0);s.encryptBlock(u,0),c[o-1]=c[o-1]+1|0;for(var l=0;l<o;l++)r[i+l]^=u[l]}});return e.Decryptor=n,e}(),t.mode.CTR})});var PP=ge((_g,MP)=>{"use strict";(function(t,e,n){typeof _g=="object"?MP.exports=_g=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(_g,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(s){if((s>>24&255)===255){var o=s>>16&255,a=s>>8&255,c=s&255;o===255?(o=0,a===255?(a=0,c===255?c=0:++c):++a):++o,s=0,s+=o<<16,s+=a<<8,s+=c}else s+=1<<24;return s}function r(s){return(s[0]=n(s[0]))===0&&(s[1]=n(s[1])),s}var i=e.Encryptor=e.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,u=this._iv,l=this._counter;u&&(l=this._counter=u.slice(0),this._iv=void 0),r(l);var d=l.slice(0);a.encryptBlock(d,0);for(var h=0;h<c;h++)s[o+h]^=d[h]}});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var FP=ge((Eg,kP)=>{"use strict";(function(t,e,n){typeof Eg=="object"?kP.exports=Eg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Eg,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(r,i){var s=this._cipher,o=s.blockSize,a=this._iv,c=this._keystream;a&&(c=this._keystream=a.slice(0),this._iv=void 0),s.encryptBlock(c,0);for(var u=0;u<o;u++)r[i+u]^=c[u]}});return e.Decryptor=n,e}(),t.mode.OFB})});var LP=ge((wg,OP)=>{"use strict";(function(t,e,n){typeof wg=="object"?OP.exports=wg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(wg,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(n,r){this._cipher.encryptBlock(n,r)}}),e.Decryptor=e.extend({processBlock:function(n,r){this._cipher.decryptBlock(n,r)}}),e}(),t.mode.ECB})});var BP=ge((Ig,VP)=>{"use strict";(function(t,e,n){typeof Ig=="object"?VP.exports=Ig=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Ig,function(t){return t.pad.AnsiX923={pad:function(e,n){var r=e.sigBytes,i=n*4,s=i-r%i,o=r+s-1;e.clamp(),e.words[o>>>2]|=s<<24-o%4*8,e.sigBytes+=s},unpad:function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n}},t.pad.Ansix923})});var jP=ge((Cg,UP)=>{"use strict";(function(t,e,n){typeof Cg=="object"?UP.exports=Cg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Cg,function(t){return t.pad.Iso10126={pad:function(e,n){var r=n*4,i=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},unpad:function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n}},t.pad.Iso10126})});var HP=ge((xg,$P)=>{"use strict";(function(t,e,n){typeof xg=="object"?$P.exports=xg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(xg,function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})});var zP=ge((Dg,qP)=>{"use strict";(function(t,e,n){typeof Dg=="object"?qP.exports=Dg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Dg,function(t){return t.pad.ZeroPadding={pad:function(e,n){var r=n*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var n=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(n[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},t.pad.ZeroPadding})});var GP=ge((bg,WP)=>{"use strict";(function(t,e,n){typeof bg=="object"?WP.exports=bg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(bg,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})});var QP=ge((Tg,KP)=>{"use strict";(function(t,e,n){typeof Tg=="object"?KP.exports=Tg=e(Ee(),at()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Tg,function(t){return function(e){var n=t,r=n.lib,i=r.CipherParams,s=n.enc,o=s.Hex,a=n.format,c=a.Hex={stringify:function(u){return u.ciphertext.toString(o)},parse:function(u){var l=o.parse(u);return i.create({ciphertext:l})}}}(),t.format.Hex})});var XP=ge((Ag,YP)=>{"use strict";(function(t,e,n){typeof Ag=="object"?YP.exports=Ag=e(Ee(),Ui(),ji(),Kr(),at()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Ag,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo,s=[],o=[],a=[],c=[],u=[],l=[],d=[],h=[],f=[],p=[];(function(){for(var g=[],m=0;m<256;m++)m<128?g[m]=m<<1:g[m]=m<<1^283;for(var w=0,E=0,m=0;m<256;m++){var C=E^E<<1^E<<2^E<<3^E<<4;C=C>>>8^C&255^99,s[w]=C,o[C]=w;var I=g[w],S=g[I],b=g[S],k=g[C]*257^C*16843008;a[w]=k<<24|k>>>8,c[w]=k<<16|k>>>16,u[w]=k<<8|k>>>24,l[w]=k;var k=b*16843009^S*65537^I*257^w*16843008;d[C]=k<<24|k>>>8,h[C]=k<<16|k>>>16,f[C]=k<<8|k>>>24,p[C]=k,w?(w=I^g[g[g[b^I]]],E^=g[g[E]]):w=E=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=r.extend({_doReset:function(){var g;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var m=this._keyPriorReset=this._key,w=m.words,E=m.sigBytes/4,C=this._nRounds=E+6,I=(C+1)*4,S=this._keySchedule=[],b=0;b<I;b++)b<E?S[b]=w[b]:(g=S[b-1],b%E?E>6&&b%E==4&&(g=s[g>>>24]<<24|s[g>>>16&255]<<16|s[g>>>8&255]<<8|s[g&255]):(g=g<<8|g>>>24,g=s[g>>>24]<<24|s[g>>>16&255]<<16|s[g>>>8&255]<<8|s[g&255],g^=v[b/E|0]<<24),S[b]=S[b-E]^g);for(var k=this._invKeySchedule=[],U=0;U<I;U++){var b=I-U;if(U%4)var g=S[b];else var g=S[b-4];U<4||b<=4?k[U]=g:k[U]=d[s[g>>>24]]^h[s[g>>>16&255]]^f[s[g>>>8&255]]^p[s[g&255]]}}},encryptBlock:function(g,m){this._doCryptBlock(g,m,this._keySchedule,a,c,u,l,s)},decryptBlock:function(g,m){var w=g[m+1];g[m+1]=g[m+3],g[m+3]=w,this._doCryptBlock(g,m,this._invKeySchedule,d,h,f,p,o);var w=g[m+1];g[m+1]=g[m+3],g[m+3]=w},_doCryptBlock:function(g,m,w,E,C,I,S,b){for(var k=this._nRounds,U=g[m]^w[0],x=g[m+1]^w[1],F=g[m+2]^w[2],j=g[m+3]^w[3],N=4,X=1;X<k;X++){var W=E[U>>>24]^C[x>>>16&255]^I[F>>>8&255]^S[j&255]^w[N++],ue=E[x>>>24]^C[F>>>16&255]^I[j>>>8&255]^S[U&255]^w[N++],we=E[F>>>24]^C[j>>>16&255]^I[U>>>8&255]^S[x&255]^w[N++],D=E[j>>>24]^C[U>>>16&255]^I[x>>>8&255]^S[F&255]^w[N++];U=W,x=ue,F=we,j=D}var W=(b[U>>>24]<<24|b[x>>>16&255]<<16|b[F>>>8&255]<<8|b[j&255])^w[N++],ue=(b[x>>>24]<<24|b[F>>>16&255]<<16|b[j>>>8&255]<<8|b[U&255])^w[N++],we=(b[F>>>24]<<24|b[j>>>16&255]<<16|b[U>>>8&255]<<8|b[x&255])^w[N++],D=(b[j>>>24]<<24|b[U>>>16&255]<<16|b[x>>>8&255]<<8|b[F&255])^w[N++];g[m]=W,g[m+1]=ue,g[m+2]=we,g[m+3]=D},keySize:256/32});e.AES=r._createHelper(y)}(),t.AES})});var ZP=ge((Sg,JP)=>{"use strict";(function(t,e,n){typeof Sg=="object"?JP.exports=Sg=e(Ee(),Ui(),ji(),Kr(),at()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Sg,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.BlockCipher,s=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=i.extend({_doReset:function(){for(var v=this._key,y=v.words,g=[],m=0;m<56;m++){var w=o[m]-1;g[m]=y[w>>>5]>>>31-w%32&1}for(var E=this._subKeys=[],C=0;C<16;C++){for(var I=E[C]=[],S=c[C],m=0;m<24;m++)I[m/6|0]|=g[(a[m]-1+S)%28]<<31-m%6,I[4+(m/6|0)]|=g[28+(a[m+24]-1+S)%28]<<31-m%6;I[0]=I[0]<<1|I[0]>>>31;for(var m=1;m<7;m++)I[m]=I[m]>>>(m-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var b=this._invSubKeys=[],m=0;m<16;m++)b[m]=E[15-m]},encryptBlock:function(v,y){this._doCryptBlock(v,y,this._subKeys)},decryptBlock:function(v,y){this._doCryptBlock(v,y,this._invSubKeys)},_doCryptBlock:function(v,y,g){this._lBlock=v[y],this._rBlock=v[y+1],h.call(this,4,252645135),h.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),h.call(this,1,1431655765);for(var m=0;m<16;m++){for(var w=g[m],E=this._lBlock,C=this._rBlock,I=0,S=0;S<8;S++)I|=u[S][((C^w[S])&l[S])>>>0];this._lBlock=C,this._rBlock=E^I}var b=this._lBlock;this._lBlock=this._rBlock,this._rBlock=b,h.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),v[y]=this._lBlock,v[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function h(v,y){var g=(this._lBlock>>>v^this._rBlock)&y;this._rBlock^=g,this._lBlock^=g<<v}function f(v,y){var g=(this._rBlock>>>v^this._lBlock)&y;this._lBlock^=g,this._rBlock^=g<<v}e.DES=i._createHelper(d);var p=s.TripleDES=i.extend({_doReset:function(){var v=this._key,y=v.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var g=y.slice(0,2),m=y.length<4?y.slice(0,2):y.slice(2,4),w=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=d.createEncryptor(r.create(g)),this._des2=d.createEncryptor(r.create(m)),this._des3=d.createEncryptor(r.create(w))},encryptBlock:function(v,y){this._des1.encryptBlock(v,y),this._des2.decryptBlock(v,y),this._des3.encryptBlock(v,y)},decryptBlock:function(v,y){this._des3.decryptBlock(v,y),this._des2.encryptBlock(v,y),this._des1.decryptBlock(v,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(p)}(),t.TripleDES})});var tk=ge((Rg,ek)=>{"use strict";(function(t,e,n){typeof Rg=="object"?ek.exports=Rg=e(Ee(),Ui(),ji(),Kr(),at()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Rg,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,s=i.RC4=r.extend({_doReset:function(){for(var c=this._key,u=c.words,l=c.sigBytes,d=this._S=[],h=0;h<256;h++)d[h]=h;for(var h=0,f=0;h<256;h++){var p=h%l,v=u[p>>>2]>>>24-p%4*8&255;f=(f+d[h]+v)%256;var y=d[h];d[h]=d[f],d[f]=y}this._i=this._j=0},_doProcessBlock:function(c,u){c[u]^=o.call(this)},keySize:256/32,ivSize:0});function o(){for(var c=this._S,u=this._i,l=this._j,d=0,h=0;h<4;h++){u=(u+1)%256,l=(l+c[u])%256;var f=c[u];c[u]=c[l],c[l]=f,d|=c[(c[u]+c[l])%256]<<24-h*8}return this._i=u,this._j=l,d}e.RC4=r._createHelper(s);var a=i.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)o.call(this)}});e.RC4Drop=r._createHelper(a)}(),t.RC4})});var rk=ge((Ng,nk)=>{"use strict";(function(t,e,n){typeof Ng=="object"?nk.exports=Ng=e(Ee(),Ui(),ji(),Kr(),at()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Ng,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,s=[],o=[],a=[],c=i.Rabbit=r.extend({_doReset:function(){for(var l=this._key.words,d=this.cfg.iv,h=0;h<4;h++)l[h]=(l[h]<<8|l[h]>>>24)&16711935|(l[h]<<24|l[h]>>>8)&4278255360;var f=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],p=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var h=0;h<4;h++)u.call(this);for(var h=0;h<8;h++)p[h]^=f[h+4&7];if(d){var v=d.words,y=v[0],g=v[1],m=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,w=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,E=m>>>16|w&4294901760,C=w<<16|m&65535;p[0]^=m,p[1]^=E,p[2]^=w,p[3]^=C,p[4]^=m,p[5]^=E,p[6]^=w,p[7]^=C;for(var h=0;h<4;h++)u.call(this)}},_doProcessBlock:function(l,d){var h=this._X;u.call(this),s[0]=h[0]^h[5]>>>16^h[3]<<16,s[1]=h[2]^h[7]>>>16^h[5]<<16,s[2]=h[4]^h[1]>>>16^h[7]<<16,s[3]=h[6]^h[3]>>>16^h[1]<<16;for(var f=0;f<4;f++)s[f]=(s[f]<<8|s[f]>>>24)&16711935|(s[f]<<24|s[f]>>>8)&4278255360,l[d+f]^=s[f]},blockSize:128/32,ivSize:64/32});function u(){for(var l=this._X,d=this._C,h=0;h<8;h++)o[h]=d[h];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<o[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<o[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<o[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<o[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<o[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<o[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<o[6]>>>0?1:0)|0,this._b=d[7]>>>0<o[7]>>>0?1:0;for(var h=0;h<8;h++){var f=l[h]+d[h],p=f&65535,v=f>>>16,y=((p*p>>>17)+p*v>>>15)+v*v,g=((f&4294901760)*f|0)+((f&65535)*f|0);a[h]=y^g}l[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,l[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,l[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,l[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,l[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,l[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,l[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,l[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=r._createHelper(c)}(),t.Rabbit})});var sk=ge((Mg,ik)=>{"use strict";(function(t,e,n){typeof Mg=="object"?ik.exports=Mg=e(Ee(),Ui(),ji(),Kr(),at()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Mg,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,s=[],o=[],a=[],c=i.RabbitLegacy=r.extend({_doReset:function(){var l=this._key.words,d=this.cfg.iv,h=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],f=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var p=0;p<4;p++)u.call(this);for(var p=0;p<8;p++)f[p]^=h[p+4&7];if(d){var v=d.words,y=v[0],g=v[1],m=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,w=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,E=m>>>16|w&4294901760,C=w<<16|m&65535;f[0]^=m,f[1]^=E,f[2]^=w,f[3]^=C,f[4]^=m,f[5]^=E,f[6]^=w,f[7]^=C;for(var p=0;p<4;p++)u.call(this)}},_doProcessBlock:function(l,d){var h=this._X;u.call(this),s[0]=h[0]^h[5]>>>16^h[3]<<16,s[1]=h[2]^h[7]>>>16^h[5]<<16,s[2]=h[4]^h[1]>>>16^h[7]<<16,s[3]=h[6]^h[3]>>>16^h[1]<<16;for(var f=0;f<4;f++)s[f]=(s[f]<<8|s[f]>>>24)&16711935|(s[f]<<24|s[f]>>>8)&4278255360,l[d+f]^=s[f]},blockSize:128/32,ivSize:64/32});function u(){for(var l=this._X,d=this._C,h=0;h<8;h++)o[h]=d[h];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<o[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<o[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<o[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<o[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<o[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<o[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<o[6]>>>0?1:0)|0,this._b=d[7]>>>0<o[7]>>>0?1:0;for(var h=0;h<8;h++){var f=l[h]+d[h],p=f&65535,v=f>>>16,y=((p*p>>>17)+p*v>>>15)+v*v,g=((f&4294901760)*f|0)+((f&65535)*f|0);a[h]=y^g}l[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,l[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,l[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,l[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,l[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,l[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,l[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,l[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=r._createHelper(c)}(),t.RabbitLegacy})});var ak=ge((Pg,ok)=>{"use strict";(function(t,e,n){typeof Pg=="object"?ok.exports=Pg=e(Ee(),Ui(),ji(),Kr(),at()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Pg,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo;let s=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(p,v){let y=v>>24&255,g=v>>16&255,m=v>>8&255,w=v&255,E=p.sbox[0][y]+p.sbox[1][g];return E=E^p.sbox[2][m],E=E+p.sbox[3][w],E}function l(p,v,y){let g=v,m=y,w;for(let E=0;E<s;++E)g=g^p.pbox[E],m=u(p,g)^m,w=g,g=m,m=w;return w=g,g=m,m=w,m=m^p.pbox[s],g=g^p.pbox[s+1],{left:g,right:m}}function d(p,v,y){let g=v,m=y,w;for(let E=s+1;E>1;--E)g=g^p.pbox[E],m=u(p,g)^m,w=g,g=m,m=w;return w=g,g=m,m=w,m=m^p.pbox[1],g=g^p.pbox[0],{left:g,right:m}}function h(p,v,y){for(let C=0;C<4;C++){p.sbox[C]=[];for(let I=0;I<256;I++)p.sbox[C][I]=a[C][I]}let g=0;for(let C=0;C<s+2;C++)p.pbox[C]=o[C]^v[g],g++,g>=y&&(g=0);let m=0,w=0,E=0;for(let C=0;C<s+2;C+=2)E=l(p,m,w),m=E.left,w=E.right,p.pbox[C]=m,p.pbox[C+1]=w;for(let C=0;C<4;C++)for(let I=0;I<256;I+=2)E=l(p,m,w),m=E.left,w=E.right,p.sbox[C][I]=m,p.sbox[C][I+1]=w;return!0}var f=i.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var p=this._keyPriorReset=this._key,v=p.words,y=p.sigBytes/4;h(c,v,y)}},encryptBlock:function(p,v){var y=l(c,p[v],p[v+1]);p[v]=y.left,p[v+1]=y.right},decryptBlock:function(p,v){var y=d(c,p[v],p[v+1]);p[v]=y.left,p[v+1]=y.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(f)}(),t.Blowfish})});var uk=ge((kg,ck)=>{"use strict";(function(t,e,n){typeof kg=="object"?ck.exports=kg=e(Ee(),hl(),sP(),aP(),Ui(),lP(),ji(),FI(),og(),gP(),OI(),yP(),EP(),IP(),fg(),DP(),Kr(),at(),SP(),NP(),PP(),FP(),LP(),BP(),jP(),HP(),zP(),GP(),QP(),XP(),ZP(),tk(),rk(),sk(),ak()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(kg,function(t){return t})});var hx=null;var nm=1,rm=Symbol("SIGNAL");function kt(t){let e=hx;return hx=t,e}var fx={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function TO(t){if(!(om(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===nm)){if(!t.producerMustRecompute(t)&&!im(t)){t.dirty=!1,t.lastCleanEpoch=nm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=nm}}function px(t){return t&&(t.nextProducerIndex=0),kt(t)}function gx(t,e){if(kt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(om(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)sm(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function im(t){Fl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(TO(n),r!==n.version))return!0}return!1}function mx(t){if(Fl(t),om(t))for(let e=0;e<t.producerNode.length;e++)sm(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function sm(t,e){if(AO(t),Fl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)sm(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Fl(i),i.producerIndexOfThis[r]=e}}function om(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function AO(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function SO(){throw new Error}var RO=SO;function vx(t){RO=t}function se(t){return typeof t=="function"}function ao(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ol=ao(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(s){e=s instanceof Ol?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{yx(s)}catch(o){e=e??[],o instanceof Ol?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ol(e)}}add(e){var n;if(e&&e!==this)if(this.closed)yx(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&qi(n,e)}remove(e){let{_finalizers:n}=this;n&&qi(n,e),e instanceof t&&e._removeParent(this)}};Xe.EMPTY=(()=>{let t=new Xe;return t.closed=!0,t})();var am=Xe.EMPTY;function Ll(t){return t instanceof Xe||t&&"closed"in t&&se(t.remove)&&se(t.add)&&se(t.unsubscribe)}function yx(t){se(t)?t():t.unsubscribe()}var Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var co={setTimeout(t,e,...n){let{delegate:r}=co;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=co;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Vl(t){co.setTimeout(()=>{let{onUnhandledError:e}=Sn;if(e)e(t);else throw t})}function cc(){}var _x=cm("C",void 0,void 0);function Ex(t){return cm("E",void 0,t)}function wx(t){return cm("N",t,void 0)}function cm(t,e,n){return{kind:t,value:e,error:n}}var zi=null;function uo(t){if(Sn.useDeprecatedSynchronousErrorHandling){let e=!zi;if(e&&(zi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zi;if(zi=null,n)throw r}}else t()}function Ix(t){Sn.useDeprecatedSynchronousErrorHandling&&zi&&(zi.errorThrown=!0,zi.error=t)}var Wi=class extends Xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ll(e)&&e.add(this)):this.destination=PO}static create(e,n,r){return new lo(e,n,r)}next(e){this.isStopped?lm(wx(e),this):this._next(e)}error(e){this.isStopped?lm(Ex(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?lm(_x,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NO=Function.prototype.bind;function um(t,e){return NO.call(t,e)}var dm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Bl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Bl(r)}else Bl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Bl(n)}}},lo=class extends Wi{constructor(e,n,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Sn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&um(e.next,s),error:e.error&&um(e.error,s),complete:e.complete&&um(e.complete,s)}):i=e}this.destination=new dm(i)}};function Bl(t){Sn.useDeprecatedSynchronousErrorHandling?Ix(t):Vl(t)}function MO(t){throw t}function lm(t,e){let{onStoppedNotification:n}=Sn;n&&co.setTimeout(()=>n(t,e))}var PO={closed:!0,next:cc,error:MO,complete:cc};var ho=typeof Symbol=="function"&&Symbol.observable||"@@observable";function tn(t){return t}function Ul(...t){return hm(t)}function hm(t){return t.length===0?tn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var me=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=FO(n)?n:new lo(n,r,i);return uo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Cx(r),new r((i,s)=>{let o=new lo({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ho](){return this}pipe(...n){return hm(n)(this)}toPromise(n){return n=Cx(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Cx(t){var e;return(e=t??Sn.Promise)!==null&&e!==void 0?e:Promise}function kO(t){return t&&se(t.next)&&se(t.error)&&se(t.complete)}function FO(t){return t&&t instanceof Wi||kO(t)&&Ll(t)}function fm(t){return se(t?.lift)}function Ce(t){return e=>{if(fm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(t,e,n,r,i){return new pm(t,e,n,r,i)}var pm=class extends Wi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function fo(){return Ce((t,e)=>{let n=null;t._refCount++;let r=ve(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var po=class extends me{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,fm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xe;let n=this.getSubject();e.add(this.source.subscribe(ve(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xe.EMPTY)}return e}refCount(){return fo()(this)}};var xx=ao(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qt=(()=>{class t extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new jl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new xx}next(n){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){uo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?am:(this.currentObservers=null,s.push(n),new Xe(()=>{this.currentObservers=null,qi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new me;return n.source=this,n}}return t.create=(e,n)=>new jl(e,n),t})(),jl=class extends qt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:am}};var pt=class extends qt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var gm={now(){return(gm.delegate||Date).now()},delegate:void 0};var $l=class extends Xe{constructor(e,n){super()}schedule(e,n=0){return this}};var uc={setInterval(t,e,...n){let{delegate:r}=uc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=uc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var go=class extends $l{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return uc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&uc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,qi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var mo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};mo.now=gm.now;var vo=class extends mo{constructor(e,n=mo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var mm=new vo(go);var Hl=class extends go{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ql=class extends vo{};var vm=new ql(Hl);var fn=new me(t=>t.complete());function Dx(t){return t&&se(t.schedule)}function bx(t){return t[t.length-1]}function zl(t){return se(bx(t))?t.pop():void 0}function ei(t){return Dx(bx(t))?t.pop():void 0}function ym(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ax(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Tx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gi(t){return this instanceof Gi?(this.v=t,this):new Gi(t)}function Sx(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,v){s.push([h,f,p,v])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof Gi?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Rx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Tx=="function"?Tx(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var Wl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Gl(t){return se(t?.then)}function Kl(t){return se(t[ho])}function Ql(t){return Symbol.asyncIterator&&se(t?.[Symbol.asyncIterator])}function Yl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function OO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xl=OO();function Jl(t){return se(t?.[Xl])}function Zl(t){return Sx(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Gi(n.read());if(i)return yield Gi(void 0);yield yield Gi(r)}}finally{n.releaseLock()}})}function ed(t){return se(t?.getReader)}function tt(t){if(t instanceof me)return t;if(t!=null){if(Kl(t))return LO(t);if(Wl(t))return VO(t);if(Gl(t))return BO(t);if(Ql(t))return Nx(t);if(Jl(t))return UO(t);if(ed(t))return jO(t)}throw Yl(t)}function LO(t){return new me(e=>{let n=t[ho]();if(se(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VO(t){return new me(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function BO(t){return new me(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Vl)})}function UO(t){return new me(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Nx(t){return new me(e=>{$O(t,e).catch(n=>e.error(n))})}function jO(t){return Nx(Zl(t))}function $O(t,e){var n,r,i,s;return Ax(this,void 0,void 0,function*(){try{for(n=Rx(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function zt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ti(t,e=0){return Ce((n,r)=>{n.subscribe(ve(r,i=>zt(r,t,()=>r.next(i),e),()=>zt(r,t,()=>r.complete(),e),i=>zt(r,t,()=>r.error(i),e)))})}function ni(t,e=0){return Ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Mx(t,e){return tt(t).pipe(ni(e),ti(e))}function Px(t,e){return tt(t).pipe(ni(e),ti(e))}function kx(t,e){return new me(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Fx(t,e){return new me(n=>{let r;return zt(n,e,()=>{r=t[Xl](),zt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function td(t,e){if(!t)throw new Error("Iterable cannot be null");return new me(n=>{zt(n,e,()=>{let r=t[Symbol.asyncIterator]();zt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ox(t,e){return td(Zl(t),e)}function Lx(t,e){if(t!=null){if(Kl(t))return Mx(t,e);if(Wl(t))return kx(t,e);if(Gl(t))return Px(t,e);if(Ql(t))return td(t,e);if(Jl(t))return Fx(t,e);if(ed(t))return Ox(t,e)}throw Yl(t)}function He(t,e){return e?Lx(t,e):tt(t)}function Z(...t){let e=ei(t);return He(t,e)}function yo(t,e){let n=se(t)?t:()=>t,r=i=>i.error(n());return new me(e?i=>e.schedule(r,0,i):r)}function _m(t){return!!t&&(t instanceof me||se(t.lift)&&se(t.subscribe))}var xr=ao(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function le(t,e){return Ce((n,r)=>{let i=0;n.subscribe(ve(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:HO}=Array;function qO(t,e){return HO(e)?t(...e):t(e)}function nd(t){return le(e=>qO(t,e))}var{isArray:zO}=Array,{getPrototypeOf:WO,prototype:GO,keys:KO}=Object;function rd(t){if(t.length===1){let e=t[0];if(zO(e))return{args:e,keys:null};if(QO(e)){let n=KO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function QO(t){return t&&typeof t=="object"&&WO(t)===GO}function id(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function lc(...t){let e=ei(t),n=zl(t),{args:r,keys:i}=rd(t);if(r.length===0)return He([],e);let s=new me(YO(r,e,i?o=>id(i,o):tn));return n?s.pipe(nd(n)):s}function YO(t,e,n=tn){return r=>{Vx(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Vx(e,()=>{let u=He(t[c],e),l=!1;u.subscribe(ve(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Vx(t,e,n){t?zt(n,t,e):e()}function Bx(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=v=>u<r?p(v):c.push(v),p=v=>{s&&e.next(v),u++;let y=!1;tt(n(v,l++)).subscribe(ve(e,g=>{i?.(g),s?f(g):e.next(g)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){let g=c.shift();o?zt(e,o,()=>p(g)):p(g)}h()}catch(g){e.error(g)}}))};return t.subscribe(ve(e,f,()=>{d=!0,h()})),()=>{a?.()}}function nt(t,e,n=1/0){return se(e)?nt((r,i)=>le((s,o)=>e(r,s,i,o))(tt(t(r,i))),n):(typeof e=="number"&&(n=e),Ce((r,i)=>Bx(r,i,t,n)))}function _o(t=1/0){return nt(tn,t)}function Ux(){return _o(1)}function Eo(...t){return Ux()(He(t,ei(t)))}function sd(t){return new me(e=>{tt(t()).subscribe(e)})}function Em(...t){let e=zl(t),{args:n,keys:r}=rd(t),i=new me(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let l=0;l<o;l++){let d=!1;tt(n[l]).subscribe(ve(s,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||s.next(r?id(r,a):a),s.complete())}))}});return e?i.pipe(nd(e)):i}function nn(t,e){return Ce((n,r)=>{let i=0;n.subscribe(ve(r,s=>t.call(e,s,i++)&&r.next(s)))})}function ri(t){return Ce((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ve(n,void 0,void 0,o=>{s=tt(t(o,ri(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function jx(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(ve(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Ki(t,e){return se(e)?nt(t,e,1):nt(t,1)}function ii(t){return Ce((e,n)=>{let r=!1;e.subscribe(ve(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Dr(t){return t<=0?()=>fn:Ce((e,n)=>{let r=0;e.subscribe(ve(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function wm(t){return le(()=>t)}function od(t=XO){return Ce((e,n)=>{let r=!1;e.subscribe(ve(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function XO(){return new xr}function dc(t){return Ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function zn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?nn((i,s)=>t(i,s,r)):tn,Dr(1),n?ii(e):od(()=>new xr))}function wo(t){return t<=0?()=>fn:Ce((e,n)=>{let r=[];e.subscribe(ve(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Im(t,e){let n=arguments.length>=2;return r=>r.pipe(t?nn((i,s)=>t(i,s,r)):tn,wo(1),n?ii(e):od(()=>new xr))}function ad(t,e){return Ce(jx(t,e,arguments.length>=2,!0))}function cd(...t){let e=ei(t);return Ce((n,r)=>{(e?Eo(t,n,e):Eo(t,n)).subscribe(r)})}function pn(t,e){return Ce((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ve(r,c=>{i?.unsubscribe();let u=0,l=s++;tt(t(c,l)).subscribe(i=ve(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Cm(t){return Ce((e,n)=>{tt(t).subscribe(ve(n,()=>n.complete(),cc)),!n.closed&&e.subscribe(n)})}function rt(t,e,n){let r=se(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ce((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ve(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):tn}var DD="https://g.co/ng/security#xss",G=class extends Error{constructor(e,n){super(T0(e,n)),this.code=e}};function T0(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var Bm=class extends qt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=xm(s),i&&(i=xm(i)),o&&(o=xm(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Xe&&e.add(a),a}};function xm(t){return e=>{setTimeout(t,void 0,e)}}var wt=Bm;var he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(he||{});function Ot(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ot).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Um(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var bD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(bD||{}),Kn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Kn||{});function Cc(t){return{toString:t}.toString()}var Qi=globalThis;var Ao={},Gt=[];function Oe(t){for(let e in t)if(t[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function JO(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var ZO=Oe({\u0275cmp:Oe}),e2=Oe({\u0275dir:Oe}),t2=Oe({\u0275pipe:Oe}),n2=Oe({\u0275mod:Oe}),yd=Oe({\u0275fac:Oe}),hc=Oe({__NG_ELEMENT_ID__:Oe}),$x=Oe({__NG_ENV_ID__:Oe}),It=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(It||{});function TD(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function jm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];r2(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function AD(t){return t===3||t===4||t===6}function r2(t){return t.charCodeAt(0)===64}function fc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Hx(t,n,i,null,e[++r]):Hx(t,n,i,null,null))}}return t}function Hx(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var SD="ng-template";function i2(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&TD(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function RD(t){return t.type===4&&t.value!==SD}function s2(t,e,n){let r=t.type===4&&!n?SD:t.value;return e===r}function o2(t,e,n){let r=4,i=t.attrs||[],s=u2(i),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Rn(r)&&!Rn(c))return!1;if(o&&Rn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!s2(t,c,n)||c===""&&e.length===1){if(Rn(r))return!1;o=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!i2(t.attrs,u,n)){if(Rn(r))return!1;o=!0}continue}let l=r&8?"class":c,d=a2(l,i,RD(t),n);if(d===-1){if(Rn(r))return!1;o=!0;continue}if(u!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&TD(f,u,0)!==-1||r&2&&u!==h){if(Rn(r))return!1;o=!0}}}}return Rn(r)||o}function Rn(t){return(t&1)===0}function a2(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return l2(e,t)}function c2(t,e,n=!1){for(let r=0;r<e.length;r++)if(o2(t,e[r],n))return!0;return!1}function u2(t){for(let e=0;e<t.length;e++){let n=t[e];if(AD(n))return e}return t.length}function l2(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function qx(t,e){return t?":not("+e.trim()+")":e}function d2(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Rn(o)&&(e+=qx(s,i),i=""),r=o,s=s||!Rn(r);n++}return i!==""&&(e+=qx(s,i)),e}function h2(t){return t.map(d2).join(",")}function f2(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Rn(i))break;i=s}r++}return{attrs:e,classes:n}}function vn(t){return Cc(()=>{let e=OD(t),n=ke($({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Kn.Emulated,styles:t.styles||Gt,_:null,schemas:t.schemas||null,tView:null,id:""});LD(n);let r=t.dependencies;return n.directiveDefs=Wx(r,!1),n.pipeDefs=Wx(r,!0),n.id=m2(n),n})}function p2(t){return ai(t)||MD(t)}function g2(t){return t!==null}function xt(t){return Cc(()=>({type:t.type,bootstrap:t.bootstrap||Gt,declarations:t.declarations||Gt,imports:t.imports||Gt,exports:t.exports||Gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function zx(t,e){if(t==null)return Ao;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=It.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==It.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Lt(t){return Cc(()=>{let e=OD(t);return LD(e),e})}function ND(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ai(t){return t[ZO]||null}function MD(t){return t[e2]||null}function PD(t){return t[t2]||null}function kD(t){let e=ai(t)||MD(t)||PD(t);return e!==null?e.standalone:!1}function FD(t,e){let n=t[n2]||null;if(!n&&e===!0)throw new Error(`Type ${Ot(t)} does not have '\u0275mod' property.`);return n}function OD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ao,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zx(t.inputs,e),outputs:zx(t.outputs),debugInfo:null}}function LD(t){t.features?.forEach(e=>e(t))}function Wx(t,e){if(!t)return null;let n=e?PD:p2;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(g2)}function m2(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Rr=0,ye=1,ee=2,Ct=3,Mn=4,kn=5,_d=6,pc=7,Pn=8,So=9,br=10,Je=11,gc=12,Gx=13,Lo=14,Qn=15,Bd=16,Io=17,Ro=18,Ud=19,VD=20,oi=21,Dm=22,Ji=23,mn=25,BD=1;var Zi=7,Ed=8,wd=9,gn=10,A0=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(A0||{});function Yi(t){return Array.isArray(t)&&typeof t[BD]=="object"}function Nr(t){return Array.isArray(t)&&t[BD]===!0}function S0(t){return(t.flags&4)!==0}function jd(t){return t.componentOffset>-1}function $d(t){return(t.flags&1)===1}function ci(t){return!!t.template}function v2(t){return(t[ee]&512)!==0}var y2="svg",_2="math",E2=!1;function w2(){return E2}function Yn(t){for(;Array.isArray(t);)t=t[Rr];return t}function UD(t,e){return Yn(e[t])}function yn(t,e){return Yn(e[t.index])}function jD(t,e){return t.data[e]}function $D(t,e){return t[e]}function di(t,e){let n=e[t];return Yi(n)?n:n[Rr]}function R0(t){return(t[ee]&128)===128}function I2(t){return Nr(t[Ct])}function No(t,e){return e==null?null:t[e]}function HD(t){t[Io]=0}function C2(t){t[ee]&1024||(t[ee]|=1024,R0(t)&&mc(t))}function x2(t,e){for(;t>0;)e=e[Lo],t--;return e}function N0(t){return!!(t[ee]&9216||t[Ji]?.dirty)}function $m(t){N0(t)?mc(t):t[ee]&64&&(w2()?(t[ee]|=1024,mc(t)):t[br].changeDetectionScheduler?.notify())}function mc(t){t[br].changeDetectionScheduler?.notify();let e=vc(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!R0(e)));)e=vc(e)}function qD(t,e){if((t[ee]&256)===256)throw new G(911,!1);t[oi]===null&&(t[oi]=[]),t[oi].push(e)}function D2(t,e){if(t[oi]===null)return;let n=t[oi].indexOf(e);n!==-1&&t[oi].splice(n,1)}function vc(t){let e=t[Ct];return Nr(e)?e[Ct]:e}var fe={lFrame:JD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function b2(){return fe.lFrame.elementDepthCount}function T2(){fe.lFrame.elementDepthCount++}function A2(){fe.lFrame.elementDepthCount--}function zD(){return fe.bindingsEnabled}function S2(){return fe.skipHydrationRootTNode!==null}function R2(t){return fe.skipHydrationRootTNode===t}function N2(){fe.skipHydrationRootTNode=null}function Re(){return fe.lFrame.lView}function gt(){return fe.lFrame.tView}function Fn(t){return fe.lFrame.contextLView=t,t[Pn]}function On(t){return fe.lFrame.contextLView=null,t}function Vt(){let t=WD();for(;t!==null&&t.type===64;)t=t.parent;return t}function WD(){return fe.lFrame.currentTNode}function M2(){let t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ss(t,e){let n=fe.lFrame;n.currentTNode=t,n.isParent=e}function M0(){return fe.lFrame.isParent}function GD(){fe.lFrame.isParent=!1}function P2(){return fe.lFrame.contextLView}function P0(){let t=fe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function k2(t){return fe.lFrame.bindingIndex=t}function Hd(){return fe.lFrame.bindingIndex++}function KD(t){let e=fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function F2(){return fe.lFrame.inI18n}function O2(t,e){let n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hm(e)}function L2(){return fe.lFrame.currentDirectiveIndex}function Hm(t){fe.lFrame.currentDirectiveIndex=t}function V2(t){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function QD(t){fe.lFrame.currentQueryIndex=t}function B2(t){let e=t[ye];return e.type===2?e.declTNode:e.type===1?t[kn]:null}function YD(t,e,n){if(n&he.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&he.Host);)if(i=B2(s),i===null||(s=s[Lo],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=fe.lFrame=XD();return r.currentTNode=e,r.lView=t,!0}function k0(t){let e=XD(),n=t[ye];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function XD(){let t=fe.lFrame,e=t===null?null:t.child;return e===null?JD(t):e}function JD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ZD(){let t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var eb=ZD;function F0(){let t=ZD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function U2(t){return(fe.lFrame.contextLView=x2(t,fe.lFrame.contextLView))[Pn]}function os(){return fe.lFrame.selectedIndex}function es(t){fe.lFrame.selectedIndex=t}function O0(){let t=fe.lFrame;return jD(t.tView,t.selectedIndex)}function j2(){return fe.lFrame.currentNamespace}var tb=!0;function qd(){return tb}function zd(t){tb=t}function $2(){return Wd(Vt(),Re())}function Wd(t,e){return new hi(yn(t,e))}var hi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=$2;let t=e;return t})();function L0(t,e){t.forEach(n=>Array.isArray(n)?L0(n,e):e(n))}function nb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Id(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function H2(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function V0(t,e,n){let r=xc(t,e);return r>=0?t[r|1]=n:(r=~r,H2(t,r,e,n)),r}function bm(t,e){let n=xc(t,e);if(n>=0)return t[n|1]}function xc(t,e){return q2(t,e,1)}function q2(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}function rb(t){return(t.flags&128)===128}var qm;function ib(t){qm=t}function z2(){if(qm!==void 0)return qm;if(typeof document<"u")return document;throw new G(210,!1)}function Q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gd(t){return Kx(t,ob)||Kx(t,ab)}function sb(t){return Gd(t)!==null}function Kx(t,e){return t.hasOwnProperty(e)?t[e]:null}function W2(t){let e=t&&(t[ob]||t[ab]);return e||null}function Qx(t){return t&&(t.hasOwnProperty(Yx)||t.hasOwnProperty(G2))?t[Yx]:null}var ob=Oe({\u0275prov:Oe}),Yx=Oe({\u0275inj:Oe}),ab=Oe({ngInjectableDef:Oe}),G2=Oe({ngInjectorDef:Oe}),K=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},B0=new K("",{providedIn:"root",factory:()=>K2}),K2="ng",U0=new K(""),Jn=new K("",{providedIn:"platform",factory:()=>"unknown"});var j0=new K("",{providedIn:"root",factory:()=>z2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Q2=Oe({__forward_ref__:Oe});function Vo(t){return t.__forward_ref__=Vo,t.toString=function(){return Ot(this())},t}function Ft(t){return cb(t)?t():t}function cb(t){return typeof t=="function"&&t.hasOwnProperty(Q2)&&t.__forward_ref__===Vo}function ub(t){return t&&!!t.\u0275providers}function Kd(t){return typeof t=="string"?t:t==null?"":String(t)}function Y2(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Kd(t)}function X2(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new G(-200,t)}function $0(t,e){throw new G(-201,!1)}var zm;function lb(){return zm}function Wt(t){let e=zm;return zm=t,e}function db(t,e,n){let r=Gd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&he.Optional)return null;if(e!==void 0)return e;$0(t,"Injector")}var J2={},yc=J2,Wm="__NG_DI_FLAG__",Cd="ngTempTokenPath",Z2="ngTokenPath",eL=/\n/gm,tL="\u0275",Xx="__source",bo;function nL(){return bo}function si(t){let e=bo;return bo=t,e}function rL(t,e=he.Default){if(bo===void 0)throw new G(-203,!1);return bo===null?db(t,void 0,e):bo.get(t,e&he.Optional?null:void 0,e)}function te(t,e=he.Default){return(lb()||rL)(Ft(t),e)}function O(t,e=he.Default){return te(t,Qd(e))}function Qd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Gm(t){let e=[];for(let n=0;n<t.length;n++){let r=Ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,s=he.Default;for(let o=0;o<r.length;o++){let a=r[o],c=iL(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(te(i,s))}else e.push(te(r))}return e}function hb(t,e){return t[Wm]=e,t.prototype[Wm]=e,t}function iL(t){return t[Wm]}function sL(t,e,n,r){let i=t[Cd];throw e[Xx]&&i.unshift(e[Xx]),t.message=oL(`
`+t.message,i,n,r),t[Z2]=i,t[Cd]=null,t}function oL(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==tL?t.slice(2):t;let i=Ot(e);if(Array.isArray(e))i=e.map(Ot).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ot(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(eL,`
  `)}`}var aL="h",cL="b";var uL=()=>null;function H0(t,e,n=!1){return uL(t,e,n)}var ud="__parameters__";function lL(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function fb(t,e,n){return Cc(()=>{let r=lL(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(ud)?c[ud]:Object.defineProperty(c,ud,{value:[]})[ud];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ze=hb(fb("Optional"),8);var q0=hb(fb("SkipSelf"),4);function ts(t,e){let n=t.hasOwnProperty(yd);return n?t[yd]:null}var Mo=new K(""),pb=new K("",-1),gb=new K(""),xd=class{get(e,n=yc){if(n===yc){let r=new Error(`NullInjectorError: No provider for ${Ot(e)}!`);throw r.name="NullInjectorError",r}return n}};function Yd(t){return{\u0275providers:t}}function Bo(...t){return{\u0275providers:mb(!0,t),\u0275fromNgModule:!0}}function mb(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return L0(e,o=>{let a=o;Km(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&vb(i,s),n}function vb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];z0(i,s=>{e(s,r)})}}function Km(t,e,n,r){if(t=Ft(t),!t)return!1;let i=null,s=Qx(t),o=!s&&ai(t);if(!s&&!o){let c=t.ngModule;if(s=Qx(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Km(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{L0(s.imports,l=>{Km(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&vb(u,e)}if(!a){let u=ts(i)||(()=>new i);e({provide:i,useFactory:u,deps:Gt},i),e({provide:gb,useValue:i,multi:!0},i),e({provide:Mo,useValue:()=>te(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;z0(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function z0(t,e){for(let n of t)ub(n)&&(n=n.\u0275providers),Array.isArray(n)?z0(n,e):e(n)}var dL=Oe({provide:String,useValue:Oe});function yb(t){return t!==null&&typeof t=="object"&&dL in t}function hL(t){return!!(t&&t.useExisting)}function fL(t){return!!(t&&t.useFactory)}function Po(t){return typeof t=="function"}function pL(t){return!!t.useClass}var Xd=new K(""),fd={},gL={},Tm;function W0(){return Tm===void 0&&(Tm=new xd),Tm}var rn=class{},_c=class extends rn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ym(e,o=>this.processProvider(o)),this.records.set(pb,Co(void 0,this)),i.has("environment")&&this.records.set(rn,Co(void 0,this));let s=this.records.get(Xd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(gb,Gt,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=si(this),r=Wt(void 0),i;try{return e()}finally{si(n),Wt(r)}}get(e,n=yc,r=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($x))return e[$x](this);r=Qd(r);let i,s=si(this),o=Wt(void 0);try{if(!(r&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=EL(e)&&Gd(e);u&&this.injectableDefInScope(u)?c=Co(Qm(e),fd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&he.Self?W0():this.parent;return n=r&he.Optional&&n===yc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Cd]=a[Cd]||[]).unshift(Ot(e)),s)throw a;return sL(a,e,"R3InjectorError",this.source)}else throw a}finally{Wt(o),si(s)}}resolveInjectorInitializers(){let e=si(this),n=Wt(void 0),r;try{let i=this.get(Mo,Gt,he.Self);for(let s of i)s()}finally{si(e),Wt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){e=Ft(e);let n=Po(e)?e:Ft(e&&e.provide),r=vL(e);if(!Po(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Co(void 0,fd,!0),i.factory=()=>Gm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===fd&&(n.value=gL,n.value=n.factory()),typeof n.value=="object"&&n.value&&_L(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Qm(t){let e=Gd(t),n=e!==null?e.factory:ts(t);if(n!==null)return n;if(t instanceof K)throw new G(204,!1);if(t instanceof Function)return mL(t);throw new G(204,!1)}function mL(t){if(t.length>0)throw new G(204,!1);let n=W2(t);return n!==null?()=>n.factory(t):()=>new t}function vL(t){if(yb(t))return Co(void 0,t.useValue);{let e=_b(t);return Co(e,fd)}}function _b(t,e,n){let r;if(Po(t)){let i=Ft(t);return ts(i)||Qm(i)}else if(yb(t))r=()=>Ft(t.useValue);else if(fL(t))r=()=>t.useFactory(...Gm(t.deps||[]));else if(hL(t))r=()=>te(Ft(t.useExisting));else{let i=Ft(t&&(t.useClass||t.provide));if(yL(t))r=()=>new i(...Gm(t.deps));else return ts(i)||Qm(i)}return r}function Co(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yL(t){return!!t.deps}function _L(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function EL(t){return typeof t=="function"||typeof t=="object"&&t instanceof K}function Ym(t,e){for(let n of t)Array.isArray(n)?Ym(n,e):n&&ub(n)?Ym(n.\u0275providers,e):e(n)}function fi(t,e){t instanceof _c&&t.assertNotDestroyed();let n,r=si(t),i=Wt(void 0);try{return e()}finally{si(r),Wt(i)}}function wL(t){if(!lb()&&!nL())throw new G(-203,!1)}function IL(t){return typeof t=="function"}var Xm=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Eb(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function as(){return wb}function wb(t){return t.type.prototype.ngOnChanges&&(t.setInput=xL),CL}as.ngInherit=!0;function CL(){let t=Cb(this),e=t?.current;if(e){let n=t.previous;if(n===Ao)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function xL(t,e,n,r,i){let s=this.declaredInputs[r],o=Cb(t)||DL(t,{previous:Ao,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Xm(u&&u.currentValue,n,c===Ao),Eb(t,e,i,n)}var Ib="__ngSimpleChanges__";function Cb(t){return t[Ib]||null}function DL(t,e){return t[Ib]=e}var Jx=null;var Wn=function(t,e,n){Jx?.(t,e,n)};function bL(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=wb(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Jd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function pd(t,e,n){xb(t,e,3,n)}function gd(t,e,n,r){(t[ee]&3)===n&&xb(t,e,n,r)}function Am(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function xb(t,e,n,r){let i=r!==void 0?t[Io]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Io]+=65536),(a<s||s==-1)&&(TL(t,n,e,c),t[Io]=(t[Io]&4294901760)+c+2),c++}function Zx(t,e){Wn(4,t,e);let n=kt(null);try{e.call(t)}finally{kt(n),Wn(5,t,e)}}function TL(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ee]>>14<t[Io]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,Zx(a,s)):Zx(a,s)}var To=-1,ns=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function AL(t){return t instanceof ns}function SL(t){return(t.flags&8)!==0}function RL(t){return(t.flags&16)!==0}function Db(t){return t!==To}function Dd(t){return t&32767}function NL(t){return t>>16}function bd(t,e){let n=NL(t),r=e;for(;n>0;)r=r[Lo],n--;return r}var Jm=!0;function Td(t){let e=Jm;return Jm=t,e}var ML=256,bb=ML-1,Tb=5,PL=0,Gn={};function kL(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(hc)&&(r=n[hc]),r==null&&(r=n[hc]=PL++);let i=r&bb,s=1<<i;e.data[t+(i>>Tb)]|=s}function Ad(t,e){let n=Ab(t,e);if(n!==-1)return n;let r=e[ye];r.firstCreatePass&&(t.injectorIndex=e.length,Sm(r.data,t),Sm(e,null),Sm(r.blueprint,null));let i=G0(t,e),s=t.injectorIndex;if(Db(i)){let o=Dd(i),a=bd(i,e),c=a[ye].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Sm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ab(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function G0(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Pb(i),r===null)return To;if(n++,i=i[Lo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return To}function Zm(t,e,n){kL(t,e,n)}function FL(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(AD(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function Sb(t,e,n){if(n&he.Optional||t!==void 0)return t;$0(e,"NodeInjector")}function Rb(t,e,n,r){if(n&he.Optional&&r===void 0&&(r=null),!(n&(he.Self|he.Host))){let i=t[So],s=Wt(void 0);try{return i?i.get(e,r,n&he.Optional):db(e,r,n&he.Optional)}finally{Wt(s)}}return Sb(r,e,n)}function Nb(t,e,n,r=he.Default,i){if(t!==null){if(e[ee]&2048&&!(r&he.Self)){let o=UL(t,e,n,r,Gn);if(o!==Gn)return o}let s=Mb(t,e,n,r,Gn);if(s!==Gn)return s}return Rb(e,n,r,i)}function Mb(t,e,n,r,i){let s=VL(n);if(typeof s=="function"){if(!YD(e,t,r))return r&he.Host?Sb(i,n,r):Rb(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&he.Optional))$0(n);else return o}finally{eb()}}else if(typeof s=="number"){let o=null,a=Ab(t,e),c=To,u=r&he.Host?e[Qn][kn]:null;for((a===-1||r&he.SkipSelf)&&(c=a===-1?G0(t,e):e[a+8],c===To||!tD(r,!1)?a=-1:(o=e[ye],a=Dd(c),e=bd(c,e)));a!==-1;){let l=e[ye];if(eD(s,a,l.data)){let d=OL(a,e,n,o,r,u);if(d!==Gn)return d}c=e[a+8],c!==To&&tD(r,e[ye].data[a+8]===u)&&eD(s,a,e)?(o=l,a=Dd(c),e=bd(c,e)):a=-1}}return i}function OL(t,e,n,r,i,s){let o=e[ye],a=o.data[t+8],c=r==null?jd(a)&&Jm:r!=o&&(a.type&3)!==0,u=i&he.Host&&s===a,l=LL(a,o,n,c,u);return l!==null?ko(e,o,l,a):Gn}function LL(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=o[c];if(f&&ci(f)&&f.type===n)return c}return null}function ko(t,e,n,r){let i=t[n],s=e.data;if(AL(i)){let o=i;o.resolving&&X2(Y2(s[n]));let a=Td(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?Wt(o.injectImpl):null,l=YD(t,r,he.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&bL(n,s[n],e)}finally{u!==null&&Wt(u),Td(a),o.resolving=!1,eb()}}return i}function VL(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(hc)?t[hc]:void 0;return typeof e=="number"?e>=0?e&bb:BL:e}function eD(t,e,n){let r=1<<t;return!!(n[e+(t>>Tb)]&r)}function tD(t,e){return!(t&he.Self)&&!(t&he.Host&&e)}var Xi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Nb(this._tNode,this._lView,e,Qd(r),n)}};function BL(){return new Xi(Vt(),Re())}function Dc(t){return Cc(()=>{let e=t.prototype.constructor,n=e[yd]||e0(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[yd]||e0(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function e0(t){return cb(t)?()=>{let e=e0(Ft(t));return e&&e()}:ts(t)}function UL(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=Mb(s,o,n,r|he.Self,Gn);if(a!==Gn)return a;let c=s.parent;if(!c){let u=o[VD];if(u){let l=u.get(n,Gn,r);if(l!==Gn)return l}c=Pb(o),o=o[Lo]}s=c}return i}function Pb(t){let e=t[ye],n=e.type;return n===2?e.declTNode:n===1?t[kn]:null}function K0(t){return FL(Vt(),t)}function nD(t,e=null,n=null,r){let i=kb(t,e,n,r);return i.resolveInjectorInitializers(),i}function kb(t,e=null,n=null,r,i=new Set){let s=[n||Gt,Bo(t)];return r=r||(typeof t=="object"?void 0:Ot(t)),new _c(s,e||W0(),r||null,i)}var mt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return nD({name:""},i,r,"");{let s=r.name??"";return nD({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=yc,e.NULL=new xd,e.\u0275prov=Q({token:e,providedIn:"any",factory:()=>te(pb)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})(),jL="ngOriginalError";function Rm(t){return t[jL]}var Xn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Rm(e);for(;n&&Rm(n);)n=Rm(n);return n||null}},Fb=new K("",{providedIn:"root",factory:()=>O(Xn).handleError.bind(void 0)});var Ob=!1,$L=new K("",{providedIn:"root",factory:()=>Ob});var ld;function HL(){if(ld===void 0&&(ld=null,Qi.trustedTypes))try{ld=Qi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ld}function rD(t){return HL()?.createScriptURL(t)||t}var Sd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DD})`}};function Uo(t){return t instanceof Sd?t.changingThisBreaksApplicationSecurity:t}function Q0(t,e){let n=qL(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${DD})`)}return n===e}function qL(t){return t instanceof Sd&&t.getTypeName()||null}var zL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Lb(t){return t=String(t),t.match(zL)?t:"unsafe:"+t}var Zd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Zd||{});function bc(t){let e=Bb();return e?e.sanitize(Zd.URL,t)||"":Q0(t,"URL")?Uo(t):Lb(Kd(t))}function WL(t){let e=Bb();if(e)return rD(e.sanitize(Zd.RESOURCE_URL,t)||"");if(Q0(t,"ResourceURL"))return rD(Uo(t));throw new G(904,!1)}function GL(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?WL:bc}function Vb(t,e,n){return GL(e,n)(t)}function Bb(){let t=Re();return t&&t[br].sanitizer}var KL=/^>|^->|<!--|-->|--!>|<!-$/g,QL=/(<|>)/g,YL="\u200B$1\u200B";function XL(t){return t.replace(KL,e=>e.replace(QL,YL))}var Ub=new Map,JL=0;function ZL(){return JL++}function eV(t){Ub.set(t[Ud],t)}function tV(t){Ub.delete(t[Ud])}var iD="__ngContext__";function ui(t,e){Yi(e)?(t[iD]=e[Ud],eV(e)):t[iD]=e}function jb(t){return t instanceof Function?t():t}function nV(t){return(t??O(mt)).get(Jn)==="browser"}var Tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tr||{}),rV;function Y0(t,e){return rV(t,e)}function xo(t,e,n,r,i){if(r!=null){let s,o=!1;Nr(r)?s=r:Yi(r)&&(o=!0,r=r[Rr]);let a=Yn(r);t===0&&n!==null?i==null?Wb(e,n,a):Rd(e,n,a,i||null,!0):t===1&&n!==null?Rd(e,n,a,i||null,!0):t===2?wV(e,a,o):t===3&&e.destroyNode(a),s!=null&&CV(e,t,s,n,i)}}function iV(t,e){return t.createText(e)}function sV(t,e,n){t.setValue(e,n)}function oV(t,e){return t.createComment(XL(e))}function $b(t,e,n){return t.createElement(e,n)}function aV(t,e){Hb(t,e),e[Rr]=null,e[kn]=null}function cV(t,e,n,r,i,s){r[Rr]=i,r[kn]=e,th(t,r,n,1,i,s)}function Hb(t,e){th(t,e,e[Je],2,null,null)}function uV(t){let e=t[gc];if(!e)return Nm(t[ye],t);for(;e;){let n=null;if(Yi(e))n=e[gc];else{let r=e[gn];r&&(n=r)}if(!n){for(;e&&!e[Mn]&&e!==t;)Yi(e)&&Nm(e[ye],e),e=e[Ct];e===null&&(e=t),Yi(e)&&Nm(e[ye],e),n=e&&e[Mn]}e=n}}function lV(t,e,n,r){let i=gn+r,s=n.length;r>0&&(n[i-1][Mn]=e),r<s-gn?(e[Mn]=n[i],nb(n,gn+r,e)):(n.push(e),e[Mn]=null),e[Ct]=n;let o=e[Bd];o!==null&&n!==o&&dV(o,e);let a=e[Ro];a!==null&&a.insertView(t),$m(e),e[ee]|=128}function dV(t,e){let n=t[wd],i=e[Ct][Ct][Qn];e[Qn]!==i&&(t[ee]|=A0.HasTransplantedViews),n===null?t[wd]=[e]:n.push(e)}function qb(t,e){let n=t[wd],r=n.indexOf(e);n.splice(r,1)}function t0(t,e){if(t.length<=gn)return;let n=gn+e,r=t[n];if(r){let i=r[Bd];i!==null&&i!==t&&qb(i,r),e>0&&(t[n-1][Mn]=r[Mn]);let s=Id(t,gn+e);aV(r[ye],r);let o=s[Ro];o!==null&&o.detachView(s[ye]),r[Ct]=null,r[Mn]=null,r[ee]&=-129}return r}function zb(t,e){if(!(e[ee]&256)){let n=e[Je];n.destroyNode&&th(t,e,n,3,null,null),uV(e)}}function Nm(t,e){if(!(e[ee]&256)){e[ee]&=-129,e[ee]|=256,e[Ji]&&mx(e[Ji]),fV(t,e),hV(t,e),e[ye].type===1&&e[Je].destroy();let n=e[Bd];if(n!==null&&Nr(e[Ct])){n!==e[Ct]&&qb(n,e);let r=e[Ro];r!==null&&r.detachView(t)}tV(e)}}function hV(t,e){let n=t.cleanup,r=e[pc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[pc]=null);let i=e[oi];if(i!==null){e[oi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function fV(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ns)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Wn(4,a,c);try{c.call(a)}finally{Wn(5,a,c)}}else{Wn(4,i,s);try{s.call(i)}finally{Wn(5,i,s)}}}}}function pV(t,e,n){return gV(t,e.parent,n)}function gV(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Rr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Kn.None||s===Kn.Emulated)return null}return yn(r,n)}}function Rd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Wb(t,e,n){t.appendChild(e,n)}function sD(t,e,n,r,i){r!==null?Rd(t,e,n,r,i):Wb(t,e,n)}function mV(t,e,n,r){t.removeChild(e,n,r)}function X0(t,e){return t.parentNode(e)}function vV(t,e){return t.nextSibling(e)}function yV(t,e,n){return EV(t,e,n)}function _V(t,e,n){return t.type&40?yn(t,n):null}var EV=_V,oD;function eh(t,e,n,r){let i=pV(t,r,e),s=e[Je],o=r.parent||e[kn],a=yV(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)sD(s,i,n[c],a,!1);else sD(s,i,n,a,!1);oD!==void 0&&oD(s,r,e,n,i)}function md(t,e){if(e!==null){let n=e.type;if(n&3)return yn(e,t);if(n&4)return n0(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return md(t,r);{let i=t[e.index];return Nr(i)?n0(-1,i):Yn(i)}}else{if(n&32)return Y0(e,t)()||Yn(t[e.index]);{let r=Gb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=vc(t[Qn]);return md(i,r)}else return md(t,e.next)}}}return null}function Gb(t,e){if(e!==null){let r=t[Qn][kn],i=e.projection;return r.projection[i]}return null}function n0(t,e){let n=gn+t+1;if(n<e.length){let r=e[n],i=r[ye].firstChild;if(i!==null)return md(r,i)}return e[Zi]}function wV(t,e,n){let r=X0(t,e);r&&mV(t,r,e,n)}function J0(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&ui(Yn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)J0(t,e,n.child,r,i,s,!1),xo(e,t,i,a,s);else if(c&32){let u=Y0(n,r),l;for(;l=u();)xo(e,t,i,l,s);xo(e,t,i,a,s)}else c&16?IV(t,e,r,n,i,s):xo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function th(t,e,n,r,i,s){J0(n,r,t.firstChild,e,i,s,!1)}function IV(t,e,n,r,i,s){let o=n[Qn],c=o[kn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];xo(e,t,i,l,s)}else{let u=c,l=o[Ct];rb(r)&&(u.flags|=128),J0(t,e,u,l,i,s,!0)}}function CV(t,e,n,r,i){let s=n[Zi],o=Yn(n);s!==o&&xo(e,t,r,s,i);for(let a=gn;a<n.length;a++){let c=n[a];th(c[ye],c,t,e,r,s)}}function xV(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Tr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Tr.Important),t.setStyle(n,r,i,s))}}function DV(t,e,n){t.setAttribute(e,"style",n)}function Kb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Qb(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&jm(t,e,r),i!==null&&Kb(t,e,i),s!==null&&DV(t,e,s)}var Zn={};function xe(t=1){Yb(gt(),Re(),os()+t,!1)}function Yb(t,e,n,r){if(!r)if((e[ee]&3)===3){let s=t.preOrderCheckHooks;s!==null&&pd(e,s,n)}else{let s=t.preOrderHooks;s!==null&&gd(e,s,0,n)}es(n)}function De(t,e=he.Default){let n=Re();if(n===null)return te(t,e);let r=Vt();return Nb(r,n,Ft(t),e)}function Xb(){let t="invalid";throw new Error(t)}function Jb(t,e,n,r,i,s){let o=kt(null);try{let a=null;i&It.SignalBased&&(a=e[r][rm]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&It.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Eb(e,a,r,s)}finally{kt(o)}}function bV(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)es(~i);else{let s=i,o=n[++r],a=n[++r];O2(o,s);let c=e[s];a(2,c)}}}finally{es(-1)}}function nh(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[Rr]=i,d[ee]=r|4|128|8|64,(u!==null||t&&t[ee]&2048)&&(d[ee]|=2048),HD(d),d[Ct]=d[Lo]=t,d[Pn]=n,d[br]=o||t&&t[br],d[Je]=a||t&&t[Je],d[So]=c||t&&t[So]||null,d[kn]=s,d[Ud]=ZL(),d[_d]=l,d[VD]=u,d[Qn]=e.type==2?t[Qn]:d,d}function Tc(t,e,n,r,i){let s=t.data[e];if(s===null)s=TV(t,e,n,r,i),F2()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=M2();s.injectorIndex=o===null?-1:o.injectorIndex}return ss(s,!0),s}function TV(t,e,n,r,i){let s=WD(),o=M0(),a=o?s:s&&s.parent,c=t.data[e]=MV(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Zb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function eT(t,e,n,r,i){let s=os(),o=r&2;try{es(-1),o&&e.length>mn&&Yb(t,e,mn,!1),Wn(o?2:0,i),n(r,i)}finally{es(s),Wn(o?3:1,i)}}function Z0(t,e,n){if(S0(e)){let r=kt(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{kt(r)}}}function ev(t,e,n){zD()&&(VV(t,e,n,yn(n,e)),(n.flags&64)===64&&iT(t,e,n))}function tv(t,e,n=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function tT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=nv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function nv(t,e,n,r,i,s,o,a,c,u,l){let d=mn+r,h=d+i,f=AV(d,h),p=typeof u=="function"?u():u;return f[ye]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function AV(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Zn);return n}function SV(t,e,n,r){let s=r.get($L,Ob)||n===Kn.ShadowDom,o=t.selectRootElement(e,s);return RV(o),o}function RV(t){NV(t)}var NV=()=>null;function MV(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return S2()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function aD(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=It.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?cD(r,n,u,a,c):cD(r,n,u,a)}return r}function cD(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function PV(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=aD(0,d.inputs,l,c,f),u=aD(1,d.outputs,l,u,p);let v=c!==null&&o!==null&&!RD(e)?QV(c,l,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function kV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function nT(t,e,n,r,i,s,o,a){let c=yn(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(iv(t,n,l,r,i),jd(e)&&FV(n,e.index)):e.type&3?(r=kV(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function FV(t,e){let n=di(e,t);n[ee]&16||(n[ee]|=64)}function rv(t,e,n,r){if(zD()){let i=r===null?null:{"":-1},s=UV(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&rT(t,e,n,o,i,a),i&&jV(n,r,i)}n.mergedAttrs=fc(n.mergedAttrs,n.attrs)}function rT(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Zm(Ad(n,e),t,r[u].type);HV(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=Zb(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=fc(n.mergedAttrs,l.hostAttrs),qV(t,n,e,c,l),$V(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}PV(t,n,s)}function OV(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;LV(o)!=a&&o.push(a),o.push(n,r,s)}}function LV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function VV(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;jd(n)&&zV(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ad(n,e),ui(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=ko(e,t,a,n);if(ui(u,e),o!==null&&KV(e,a-i,u,c,n,o),ci(c)){let l=di(n.index,e);l[Pn]=ko(e,t,a,n)}}}function iT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=L2();try{es(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Hm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&BV(c,u)}}finally{es(-1),Hm(o)}}function BV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function UV(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(c2(e,o.selectors,!1))if(r||(r=[]),ci(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;r0(t,e,c)}else r.unshift(o),r0(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function r0(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function jV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new G(-301,!1);r.push(e[i],s)}}}function $V(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ci(e)&&(n[""]=t)}}function HV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function qV(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ts(i.type,!0)),o=new ns(s,ci(i),De);t.blueprint[r]=o,n[r]=o,OV(t,e,r,Zb(t,n,i.hostVars,Zn),i)}function zV(t,e,n){let r=yn(e,t),i=tT(n),s=t[br].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=rh(t,nh(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function WV(t,e,n,r,i,s){let o=yn(t,e);GV(e[Je],o,s,t.value,n,r,i)}function GV(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Kd(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function KV(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];Jb(r,n,c,u,l,d)}}function QV(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function sT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function oT(t,e){let n=t.contentQueries;if(n!==null){let r=kt(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];QD(s),a.contentQueries(2,e[o],o)}}}finally{kt(r)}}}function rh(t,e){return t[gc]?t[Gx][Mn]=e:t[gc]=e,t[Gx]=e,e}function i0(t,e,n){QD(0);let r=kt(null);try{e(t,n)}finally{kt(r)}}function YV(t){return t[pc]||(t[pc]=[])}function XV(t){return t.cleanup||(t.cleanup=[])}function aT(t,e){let n=t[So],r=n?n.get(Xn,null):null;r&&r.handleError(e)}function iv(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];Jb(l,u,r,a,c,i)}}function JV(t,e,n){let r=UD(e,t);sV(t[Je],r,n)}function ZV(t,e){let n=di(e,t),r=n[ye];eB(r,n);let i=n[Rr];i!==null&&n[_d]===null&&(n[_d]=H0(i,n[So])),sv(r,n,n[Pn])}function eB(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function sv(t,e,n){k0(e);try{let r=t.viewQuery;r!==null&&i0(1,r,n);let i=t.template;i!==null&&eT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ro]?.finishViewCreation(t),t.staticContentQueries&&oT(t,e),t.staticViewQueries&&i0(2,t.viewQuery,n);let s=t.components;s!==null&&tB(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,F0()}}function tB(t,e){for(let n=0;n<e.length;n++)ZV(t,e[n])}function nB(t,e,n,r){let i=e.tView,o=t[ee]&4096?4096:16,a=nh(t,i,n,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Bd]=c;let u=t[Ro];return u!==null&&(a[Ro]=u.createEmbeddedView(i)),sv(i,a,n),a}function uD(t,e){return!e||e.firstChild===null||rb(t)}function rB(t,e,n,r=!0){let i=e[ye];if(lV(i,e,t,n),r){let o=n0(n,t),a=e[Je],c=X0(a,t[Zi]);c!==null&&cV(i,t[kn],a,e,c,o)}let s=e[_d];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Nd(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Yn(s)),Nr(s)&&iB(s,r);let o=n.type;if(o&8)Nd(t,e,n.child,r);else if(o&32){let a=Y0(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Gb(e,n);if(Array.isArray(a))r.push(...a);else{let c=vc(e[Qn]);Nd(c[ye],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function iB(t,e){for(let n=gn;n<t.length;n++){let r=t[n],i=r[ye].firstChild;i!==null&&Nd(r[ye],r,i,e)}t[Zi]!==t[Rr]&&e.push(t[Zi])}var cT=[];function sB(t){return t[Ji]??oB(t)}function oB(t){let e=cT.pop()??Object.create(cB);return e.lView=t,e}function aB(t){t.lView[Ji]!==t&&(t.lView=null,cT.push(t))}var cB=ke($({},fx),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{mc(t.lView)},consumerOnSignalRead(){this.lView[Ji]=this}});function uT(t){return dT(t[gc])}function lT(t){return dT(t[Mn])}function dT(t){for(;t!==null&&!Nr(t);)t=t[Mn];return t}var hT=100;function fT(t,e=!0,n=0){let r=t[br],i=r.rendererFactory,s=!1;s||i.begin?.();try{uB(t,n)}catch(o){throw e&&aT(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function uB(t,e){s0(t,e);let n=0;for(;N0(t);){if(n===hT)throw new G(103,!1);n++,s0(t,1)}}function lB(t,e,n,r){let i=e[ee];if((i&256)===256)return;let s=!1;!s&&e[br].inlineEffectRunner?.flush(),k0(e);let o=null,a=null;!s&&dB(t)&&(a=sB(e),o=px(a));try{HD(e),k2(t.bindingStartIndex),n!==null&&eT(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&pd(e,d,null)}else{let d=t.preOrderHooks;d!==null&&gd(e,d,0,null),Am(e,0)}if(hB(e),pT(e,0),t.contentQueries!==null&&oT(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&pd(e,d)}else{let d=t.contentHooks;d!==null&&gd(e,d,1),Am(e,1)}bV(t,e);let u=t.components;u!==null&&mT(e,u,0);let l=t.viewQuery;if(l!==null&&i0(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&pd(e,d)}else{let d=t.viewHooks;d!==null&&gd(e,d,2),Am(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dm]){for(let d of e[Dm])d();e[Dm]=null}s||(e[ee]&=-73)}catch(c){throw mc(e),c}finally{a!==null&&(gx(a,o),aB(a)),F0()}}function dB(t){return t.type!==2}function pT(t,e){for(let n=uT(t);n!==null;n=lT(n))for(let r=gn;r<n.length;r++){let i=n[r];gT(i,e)}}function hB(t){for(let e=uT(t);e!==null;e=lT(e)){if(!(e[ee]&A0.HasTransplantedViews))continue;let n=e[wd];for(let r=0;r<n.length;r++){let i=n[r],s=i[Ct];C2(i)}}}function fB(t,e,n){let r=di(e,t);gT(r,n)}function gT(t,e){R0(t)&&s0(t,e)}function s0(t,e){let r=t[ye],i=t[ee],s=t[Ji],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&im(s)),s&&(s.dirty=!1),t[ee]&=-9217,o)lB(r,t,r.template,t[Pn]);else if(i&8192){pT(t,1);let a=r.components;a!==null&&mT(t,a,1)}}function mT(t,e,n){for(let r=0;r<e.length;r++)fB(t,e[r],n)}function ov(t){for(t[br].changeDetectionScheduler?.notify();t;){t[ee]|=64;let e=vc(t);if(v2(t)&&!e)return t;t=e}return null}var rs=class{get rootNodes(){let e=this._lView,n=e[ye];return Nd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pn]}set context(e){this._lView[Pn]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Nr(e)){let n=e[Ed],r=n?n.indexOf(this):-1;r>-1&&(t0(e,r),Id(n,r))}this._attachedToViewContainer=!1}zb(this._lView[ye],this._lView)}onDestroy(e){qD(this._lView,e)}markForCheck(){ov(this._cdRefInjectingView||this._lView)}detach(){this._lView[ee]&=-129}reattach(){$m(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,fT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Hb(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e,$m(this._lView)}},ih=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mB;let t=e;return t})(),pB=ih,gB=class extends pB{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=nB(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new rs(i)}};function mB(){return vB(Vt(),Re())}function vB(t,e){return t.type&4?new gB(e,t,Wd(t,e)):null}var lZ=new RegExp(`^(\\d+)*(${cL}|${aL})*(.*)`);var yB=()=>null;function lD(t,e){return yB(t,e)}var o0=class{},a0=class{},Md=class{};function _B(t){let e=Error(`No component factory found for ${Ot(t)}.`);return e[EB]=t,e}var EB="ngComponent";var c0=class{resolveComponentFactory(e){throw _B(e)}},sh=(()=>{let e=class e{};e.NULL=new c0;let t=e;return t})(),Ec=class{},cs=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>wB();let t=e;return t})();function wB(){let t=Re(),e=Vt(),n=di(e.index,t);return(Yi(n)?n:t)[Je]}var IB=(()=>{let e=class e{};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Mm={};function CB(t){return typeof t=="function"&&t[rm]!==void 0}function vT(t){return CB(t)&&typeof t.set=="function"}function av(t){let e=kt(null);try{return t()}finally{kt(e)}}function yT(t){return DB(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function xB(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function DB(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var u0=class{constructor(){}supports(e){return yT(e)}create(e){return new l0(e)}},bB=(t,e)=>e,l0=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bB}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<dD(r,i,s)?n:r,a=dD(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!yT(e))throw new G(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,xB(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new d0(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},d0=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},h0=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Pd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new h0,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function hD(){return new cv([new u0])}var cv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||hD()),deps:[[e,new q0,new Ze]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new G(901,!1)}};e.\u0275prov=Q({token:e,providedIn:"root",factory:hD});let t=e;return t})();var us=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=TB;let t=e;return t})();function TB(t){return AB(Vt(),Re(),(t&16)===16)}function AB(t,e,n){if(jd(t)&&!n){let r=di(t.index,e);return new rs(r,r)}else if(t.type&47){let r=e[Qn];return new rs(r,e)}return null}var _T=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=SB,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),f0=class extends _T{constructor(e){super(),this._lView=e}onDestroy(e){return qD(this._lView,e),()=>D2(this._lView,e)}};function SB(){return new f0(Re())}var fD=new Set;function uv(t){fD.has(t)||(fD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function pD(...t){}function RB(){let t=typeof Qi.requestAnimationFrame=="function",e=Qi[t?"requestAnimationFrame":"setTimeout"],n=Qi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Se=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wt(!1),this.onMicrotaskEmpty=new wt(!1),this.onStable=new wt(!1),this.onError=new wt(!1),typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=RB().nativeRequestAnimationFrame,PB(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,NB,pD,pD);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},NB={};function lv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function MB(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Qi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,p0(t),t.isCheckStableRunning=!0,lv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),p0(t))}function PB(t){let e=()=>{MB(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(kB(a))return n.invokeTask(i,s,o,a);try{return gD(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),mD(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return gD(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),mD(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,p0(t),lv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function p0(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function gD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mD(t){t._nesting--,lv(t)}function kB(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Do=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Do||{}),FB={destroy(){}};function dv(t,e){!e&&wL(dv);let n=e?.injector??O(mt);if(!nV(n))return FB;uv("NgAfterNextRender");let r=n.get(hv),i=r.handler??=new m0,s=e?.phase??Do.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(_T).onDestroy(o),c=new g0(n,s,()=>{o(),t()});return i.register(c),{destroy:o}}var g0=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(Se),this.errorHandler=e.get(Xn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},m0=class{constructor(){this.executingCallbacks=!1,this.buckets={[Do.EarlyRead]:new Set,[Do.Write]:new Set,[Do.MixedReadWrite]:new Set,[Do.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},hv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function kd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Um(i,a);else if(s==2){let c=a,u=e[++o];r=Um(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Fd=class extends sh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ai(e);return new Fo(n,this.ngModule)}};function vD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function OB(t){let e=t.toLowerCase();return e==="svg"?y2:e==="math"?_2:null}var v0=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Qd(r);let i=this.injector.get(e,Mm,r);return i!==Mm||n===Mm?i:this.parentInjector.get(e,n,r)}},Fo=class extends Md{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=vD(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return vD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=h2(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let s=i instanceof rn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new v0(e,s):e,a=o.get(Ec,null);if(a===null)throw new G(407,!1);let c=o.get(IB,null),u=o.get(hv,null),l=o.get(o0,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?SV(h,r,this.componentDef.encapsulation,o):$b(h,f,OB(f)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let y=null;p!==null&&(y=H0(p,o,!0));let g=nv(0,null,null,1,0,null,null,null,null,null,null),m=nh(null,g,null,v,null,null,d,h,o,null,y);k0(m);let w,E;try{let C=this.componentDef,I,S=null;C.findHostDirectiveDefs?(I=[],S=new Map,C.findHostDirectiveDefs(C,I,S),I.push(C)):I=[C];let b=LB(m,p),k=VB(b,p,C,I,m,d,h);E=jD(g,mn),p&&jB(h,C,p,r),n!==void 0&&$B(E,this.ngContentSelectors,n),w=UB(k,C,I,S,m,[HB]),sv(g,m,null)}finally{F0()}return new y0(this.componentType,w,Wd(E,m),m,E)}},y0=class extends a0{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new rs(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;iv(s[ye],s,i,e,n),this.previousInputValues.set(e,n);let o=di(this._tNode.index,s);ov(o)}}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function LB(t,e){let n=t[ye],r=mn;return t[r]=e,Tc(n,r,2,"#host",null)}function VB(t,e,n,r,i,s,o){let a=i[ye];BB(r,t,e,o);let c=null;e!==null&&(c=H0(e,i[So]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=nh(i,tT(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&r0(a,t,r.length-1),rh(i,d),i[t.index]=d}function BB(t,e,n,r){for(let i of t)e.mergedAttrs=fc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(kd(e,e.mergedAttrs,!0),n!==null&&Qb(r,n,e))}function UB(t,e,n,r,i,s){let o=Vt(),a=i[ye],c=yn(o,i);rT(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=ko(i,a,d,o);ui(h,i)}iT(a,i,o),c&&ui(c,i);let u=ko(i,a,o.directiveStart+o.componentOffset,o);if(t[Pn]=i[Pn]=u,s!==null)for(let l of s)l(u,e);return Z0(a,o,t),u}function jB(t,e,n,r){if(r)jm(t,n,["ng-version","17.2.1"]);else{let{attrs:i,classes:s}=f2(e.selectors[0]);i&&jm(t,n,i),s&&s.length>0&&Kb(t,n,s.join(" "))}}function $B(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function HB(){let t=Vt();Jd(Re()[ye],t)}var jo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qB;let t=e;return t})();function qB(){let t=Vt();return WB(t,Re())}var zB=jo,ET=class extends zB{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Wd(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){let e=G0(this._hostTNode,this._hostLView);if(Db(e)){let n=bd(e,this._hostLView),r=Dd(e),i=n[ye].data[r+8];return new Xi(i,n)}else return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=yD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-gn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=lD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,uD(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!IL(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Fo(ai(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let v=(o?u:this.parentInjector).get(rn,null);v&&(s=v)}let l=ai(c.componentType??{}),d=lD(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,uD(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(I2(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ct],u=new ET(c,c[kn],c[Ct]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return rB(o,i,s,r),e.attachToViewContainerRef(),nb(Pm(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=yD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=t0(this._lContainer,n);r&&(Id(Pm(this._lContainer),n),zb(r[ye],r))}detach(e){let n=this._adjustIndex(e,-1),r=t0(this._lContainer,n);return r&&Id(Pm(this._lContainer),n)!=null?new rs(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function yD(t){return t[Ed]}function Pm(t){return t[Ed]||(t[Ed]=[])}function WB(t,e){let n,r=e[t.index];return Nr(r)?n=r:(n=sT(r,e,null,t),e[t.index]=n,rh(e,n)),KB(n,e,t,r),new ET(n,t,e)}function GB(t,e){let n=t[Je],r=n.createComment(""),i=yn(e,t),s=X0(n,i);return Rd(n,s,r,vV(n,i),!1),r}var KB=XB,QB=()=>!1;function YB(t,e,n){return QB(t,e,n)}function XB(t,e,n,r){if(t[Zi])return;let i;n.type&8?i=Yn(r):i=GB(e,n),t[Zi]=i}function JB(t){return Object.getPrototypeOf(t.prototype).constructor}function pi(t){let e=JB(t.type),n=!0,r=[t];for(;e;){let i;if(ci(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=dd(t.inputs),o.inputTransforms=dd(t.inputTransforms),o.declaredInputs=dd(t.declaredInputs),o.outputs=dd(t.outputs);let a=i.hostBindings;a&&r4(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&t4(t,c),u&&n4(t,u),ZB(t,i),JO(t.outputs,i.outputs),ci(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===pi&&(n=!1)}}e=Object.getPrototypeOf(e)}e4(r)}function ZB(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function e4(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fc(i.hostAttrs,n=fc(n,i.hostAttrs))}}function dd(t){return t===Ao?{}:t===Gt?[]:t}function t4(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function n4(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function r4(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function fv(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var li=class{},wc=class{};var _0=class extends li{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fd(this);let i=FD(e);this._bootstrapComponents=jb(i.bootstrap),this._r3Injector=kb(e,n,[{provide:li,useValue:this},{provide:sh,useValue:this.componentFactoryResolver},...r],Ot(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},E0=class extends wc{constructor(e){super(),this.moduleType=e}create(e){return new _0(this.moduleType,e,[])}};var Od=class extends li{constructor(e){super(),this.componentFactoryResolver=new Fd(this),this.instance=null;let n=new _c([...e.providers,{provide:li,useValue:this},{provide:sh,useValue:this.componentFactoryResolver}],e.parent||W0(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function oh(t,e,n=null){return new Od({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ah=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pv(t,e,n){return t[e]=n}function i4(t,e){return t[e]}function Ar(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function _D(t,e,n,r){let i=Ar(t,e,n);return Ar(t,e+1,r)||i}function s4(t,e,n,r,i,s){let o=_D(t,e,n,r);return _D(t,e+2,i,s)||o}function o4(t,e,n,r,i,s,o,a,c){let u=e.consts,l=Tc(e,t,4,o||null,No(u,a));rv(e,n,l,No(u,c)),Jd(e,l);let d=l.tView=nv(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Mr(t,e,n,r,i,s,o,a){let c=Re(),u=gt(),l=t+mn,d=u.firstCreatePass?o4(l,u,c,e,n,r,i,s,o):u.data[l];ss(d,!1);let h=a4(u,c,d,t);qd()&&eh(u,c,h,d),ui(h,c);let f=sT(h,c,h,d);return c[l]=f,rh(c,f),YB(f,d,c),$d(d)&&ev(u,c,d),o!=null&&tv(c,d,a),Mr}var a4=c4;function c4(t,e,n,r){return zd(!0),e[Je].createComment("")}function ch(t,e,n,r){let i=Re(),s=Hd();if(Ar(i,s,e)){let o=gt(),a=O0();WV(a,i,t,e,n,r)}return ch}function wT(t,e,n,r){return Ar(t,Hd(),n)?e+Kd(n)+r:Zn}function hd(t,e){return t<<17|e<<2}function is(t){return t>>17&32767}function u4(t){return(t&2)==2}function l4(t,e){return t&131071|e<<17}function w0(t){return t|2}function Oo(t){return(t&131068)>>2}function km(t,e){return t&-131069|e<<2}function d4(t){return(t&1)===1}function I0(t){return t|1}function h4(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=is(o),c=Oo(o);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||xc(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=is(t[a+1]);t[r+1]=hd(h,a),h!==0&&(t[h+1]=km(t[h+1],r)),t[a+1]=l4(t[a+1],r)}else t[r+1]=hd(a,0),a!==0&&(t[a+1]=km(t[a+1],r)),a=r;else t[r+1]=hd(c,0),a===0?a=r:t[c+1]=km(t[c+1],r),c=r;u&&(t[r+1]=w0(t[r+1])),ED(t,l,r,!0),ED(t,l,r,!1),f4(e,l,t,r,s),o=hd(a,c),s?e.classBindings=o:e.styleBindings=o}function f4(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&xc(s,e)>=0&&(n[r+1]=I0(n[r+1]))}function ED(t,e,n,r){let i=t[n+1],s=e===null,o=r?is(i):Oo(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],u=t[o+1];p4(c,e)&&(a=!0,t[o+1]=r?I0(u):w0(u)),o=r?is(u):Oo(u)}a&&(t[n+1]=r?w0(i):I0(i))}function p4(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?xc(t,e)>=0:!1}var Nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function g4(t){return t.substring(Nn.key,Nn.keyEnd)}function m4(t){return v4(t),IT(t,CT(t,0,Nn.textEnd))}function IT(t,e){let n=Nn.textEnd;return n===e?-1:(e=Nn.keyEnd=y4(t,Nn.key=e,n),CT(t,e,n))}function v4(t){Nn.key=0,Nn.keyEnd=0,Nn.value=0,Nn.valueEnd=0,Nn.textEnd=t.length}function CT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function y4(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Kt(t,e,n){let r=Re(),i=Hd();if(Ar(r,i,e)){let s=gt(),o=O0();nT(s,o,r,t,e,r[Je],n,!1)}return Kt}function C0(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";iv(t,n,s[o],o,r)}function uh(t,e){return E4(t,e,null,!0),uh}function _4(t,e){for(let n=m4(e);n>=0;n=IT(e,n))V0(t,g4(e),!0)}function E4(t,e,n,r){let i=Re(),s=gt(),o=KD(2);if(s.firstUpdatePass&&DT(s,t,o,r),e!==Zn&&Ar(i,o,e)){let a=s.data[os()];bT(s,a,i,i[Je],t,i[o+1]=A4(e,n),r,o)}}function w4(t,e,n,r){let i=gt(),s=KD(2);i.firstUpdatePass&&DT(i,null,s,r);let o=Re();if(n!==Zn&&Ar(o,s,n)){let a=i.data[os()];if(TT(a,r)&&!xT(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Um(c,n||"")),C0(i,a,o,n,r)}else T4(i,a,o,o[Je],o[s+1],o[s+1]=b4(t,e,n),r,s)}}function xT(t,e){return e>=t.expandoStartIndex}function DT(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[os()],o=xT(t,n);TT(s,r)&&e===null&&!o&&(e=!1),e=I4(i,s,e,r),h4(i,s,e,n,o,r)}}function I4(t,e,n,r){let i=V2(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Fm(null,t,e,n,r),n=Ic(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Fm(i,t,e,n,r),s===null){let c=C4(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Fm(null,t,e,c[1],r),c=Ic(c,e.attrs,r),x4(t,e,r,c))}else s=D4(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function C4(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Oo(r)!==0)return t[is(r)]}function x4(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[is(i)]=r}function D4(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ic(r,o,n)}return Ic(r,e.attrs,n)}function Fm(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ic(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ic(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),V0(t,o,n?!0:e[++s]))}return t===void 0?null:t}function b4(t,e,n){if(n==null||n==="")return Gt;let r=[],i=Uo(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function T4(t,e,n,r,i,s,o,a){i===Zn&&(i=Gt);let c=0,u=0,l=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;l!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=u<s.length?s[u+1]:void 0,p=null,v;l===d?(c+=2,u+=2,h!==f&&(p=d,v=f)):d===null||l!==null&&l<d?(c+=2,p=l):(u+=2,p=d,v=f),p!==null&&bT(t,e,n,r,p,v,o,a),l=c<i.length?i[c]:null,d=u<s.length?s[u]:null}}function bT(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=d4(u)?wD(c,e,n,i,Oo(u),o):void 0;if(!Ld(l)){Ld(s)||u4(u)&&(s=wD(c,null,n,i,a,o));let d=UD(os(),n);xV(r,o,d,i,s)}}function wD(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===Zn&&(h=d?Gt:void 0);let f=d?bm(h,r):l===r?h:void 0;if(u&&!Ld(f)&&(f=bm(c,r)),Ld(f)&&(a=f,o))return a;let p=t[i+1];i=o?is(p):Oo(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=bm(c,r))}return a}function Ld(t){return t!==void 0}function A4(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ot(Uo(t)))),t}function TT(t,e){return(t.flags&(e?8:16))!==0}function lh(t,e,n){let r=Re(),i=wT(r,t,e,n);w4(V0,_4,i,!0)}function S4(t,e,n,r,i,s){let o=e.consts,a=No(o,i),c=Tc(e,t,2,r,a);return rv(e,n,c,No(o,s)),c.attrs!==null&&kd(c,c.attrs,!1),c.mergedAttrs!==null&&kd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function H(t,e,n,r){let i=Re(),s=gt(),o=mn+t,a=i[Je],c=s.firstCreatePass?S4(o,s,i,e,n,r):s.data[o],u=R4(s,i,c,a,e,t);i[o]=u;let l=$d(c);return ss(c,!0),Qb(a,u,c),(c.flags&32)!==32&&qd()&&eh(s,i,u,c),b2()===0&&ui(u,i),T2(),l&&(ev(s,i,c),Z0(s,c,i)),r!==null&&tv(i,c),H}function q(){let t=Vt();M0()?GD():(t=t.parent,ss(t,!1));let e=t;R2(e)&&N2(),A2();let n=gt();return n.firstCreatePass&&(Jd(n,t),S0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&SL(e)&&C0(n,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&RL(e)&&C0(n,e,Re(),e.stylesWithoutHost,!1),q}function bt(t,e,n,r){return H(t,e,n,r),q(),bt}var R4=(t,e,n,r,i,s)=>(zd(!0),$b(r,i,j2()));function N4(t,e,n,r,i){let s=e.consts,o=No(s,r),a=Tc(e,t,8,"ng-container",o);o!==null&&kd(a,o,!0);let c=No(s,i);return rv(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function gv(t,e,n){let r=Re(),i=gt(),s=t+mn,o=i.firstCreatePass?N4(s,i,r,e,n):i.data[s];ss(o,!0);let a=M4(i,r,o,t);return r[s]=a,qd()&&eh(i,r,a,o),ui(a,r),$d(o)&&(ev(i,r,o),Z0(i,o,r)),n!=null&&tv(r,o),gv}function mv(){let t=Vt(),e=gt();return M0()?GD():(t=t.parent,ss(t,!1)),e.firstCreatePass&&(Jd(e,t),S0(t)&&e.queries.elementEnd(t)),mv}var M4=(t,e,n,r)=>(zd(!0),oV(e[Je],""));function gi(){return Re()}var Vd="en-US";var P4=Vd;function k4(t){typeof t=="string"&&(P4=t.toLowerCase().replace(/_/g,"-"))}function vt(t,e,n,r){let i=Re(),s=gt(),o=Vt();return AT(s,i,i[Je],o,t,e,r),vt}function F4(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[pc],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function AT(t,e,n,r,i,s,o){let a=$d(r),u=t.firstCreatePass&&XV(t),l=e[Pn],d=YV(e),h=!0;if(r.type&3||o){let v=yn(r,e),y=o?o(v):v,g=d.length,m=o?E=>o(Yn(E[r.index])):r.index,w=null;if(!o&&a&&(w=F4(t,e,i,r.index)),w!==null){let E=w.__ngLastListenerFn__||w;E.__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,h=!1}else{s=CD(r,e,l,s,!1);let E=n.listen(y,i,s);d.push(s,E),u&&u.push(i,m,g,g+1)}}else s=CD(r,e,l,s,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let v=p.length;if(v)for(let y=0;y<v;y+=2){let g=p[y],m=p[y+1],C=e[g][m].subscribe(s),I=d.length;if(d.push(s,C),u){let S=typeof C=="function"?I+1:-(I+1);u.push(i,r.index,I,S)}}}}function ID(t,e,n,r){try{return Wn(6,e,n),n(r)!==!1}catch(i){return aT(t,i),!1}finally{Wn(7,e,n)}}function CD(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?di(t.index,e):e;ov(a);let c=ID(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=ID(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Pr(t=1){return U2(t)}function O4(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function $o(t){let e=P2();return $D(e,mn+t)}function ne(t,e=""){let n=Re(),r=gt(),i=t+mn,s=r.firstCreatePass?Tc(r,i,1,e,null):r.data[i],o=L4(r,n,s,e,t);n[i]=o,qd()&&eh(r,n,o,s),ss(s,!1)}var L4=(t,e,n,r,i)=>(zd(!0),iV(e[Je],r));function mi(t){return Qt("",t,""),mi}function Qt(t,e,n){let r=Re(),i=wT(r,t,e,n);return i!==Zn&&JV(r,os(),i),Qt}function kr(t,e,n){vT(e)&&(e=e());let r=Re(),i=Hd();if(Ar(r,i,e)){let s=gt(),o=O0();nT(s,o,r,t,e,r[Je],n,!1)}return kr}function vi(t,e){let n=vT(t);return n&&t.set(e),n}function Fr(t,e){let n=Re(),r=gt(),i=Vt();return AT(r,n,n[Je],i,t,e),Fr}function V4(t,e,n){let r=gt();if(r.firstCreatePass){let i=ci(t);x0(n,r.data,r.blueprint,i,!0),x0(e,r.data,r.blueprint,i,!1)}}function x0(t,e,n,r,i){if(t=Ft(t),Array.isArray(t))for(let s=0;s<t.length;s++)x0(t[s],e,n,r,i);else{let s=gt(),o=Re(),a=Vt(),c=Po(t)?t:Ft(t.provide),u=_b(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Po(t)||!t.multi){let f=new ns(u,i,De),p=Lm(c,e,i?l:l+h,d);p===-1?(Zm(Ad(a,o),s,c),Om(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=Lm(c,e,l+h,d),p=Lm(c,e,l,l+h),v=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!v){Zm(Ad(a,o),s,c);let g=j4(i?U4:B4,n.length,i,r,u);!i&&y&&(n[p].providerFactory=g),Om(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),o.push(g)}else{let g=ST(n[i?p:f],u,!i&&r);Om(s,t,f>-1?f:p,g)}!i&&r&&y&&n[p].componentProviders++}}}function Om(t,e,n,r){let i=Po(e),s=pL(e);if(i||s){let c=(s?Ft(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function ST(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function B4(t,e,n,r){return D0(this.multi,[])}function U4(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ko(n,n[ye],this.providerFactory.index,r);s=a.slice(0,o),D0(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],D0(i,s);return s}function D0(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function j4(t,e,n,r,i){let s=new ns(t,n,De);return s.multi=[],s.index=e,s.componentProviders=0,ST(s,i,r&&!n),s}function dh(t,e=[]){return n=>{n.providersResolver=(r,i)=>V4(r,i?i(t):t,e)}}var $4=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=mb(!1,r.type),s=i.length>0?oh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Q({token:e,providedIn:"environment",factory:()=>new e(te(rn))});let t=e;return t})();function _n(t){uv("NgStandalone"),t.getStandaloneInjector=e=>e.get($4).getOrCreateStandaloneInjector(t)}function hh(t,e,n){let r=P0()+t,i=Re();return i[r]===Zn?pv(i,r,n?e.call(n):e()):i4(i,r)}function RT(t,e,n,r,i,s,o){return q4(Re(),P0(),t,e,n,r,i,s,o)}function NT(t,e){let n=t[e];return n===Zn?void 0:n}function H4(t,e,n,r,i,s){let o=e+n;return Ar(t,o,i)?pv(t,o+1,s?r.call(s,i):r(i)):NT(t,o+1)}function q4(t,e,n,r,i,s,o,a,c){let u=e+n;return s4(t,u,i,s,o,a)?pv(t,u+4,c?r.call(c,i,s,o,a):r(i,s,o,a)):NT(t,u+4)}function MT(t,e){let n=gt(),r,i=t+mn;n.firstCreatePass?(r=z4(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=ts(r.type,!0)),o,a=Wt(De);try{let c=Td(!1),u=s();return Td(c),O4(n,Re(),i,u),u}finally{Wt(a)}}function z4(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function PT(t,e,n){let r=t+mn,i=Re(),s=$D(i,r);return W4(i,r)?H4(i,P0(),e,s.transform,n,s):s.transform(n)}function W4(t,e){return t[ye].data[e].pure}var Sr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},kT=new Sr("17.2.1"),fh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var FT=new K("");function yi(t){return!!t&&typeof t.then=="function"}function vv(t){return!!t&&typeof t.subscribe=="function"}var ph=new K(""),OT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=O(ph,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(yi(o))r.push(o);else if(vv(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gh=new K("");function G4(){vx(()=>{throw new G(600,!1)})}function K4(t){return t.isBoundToModule}function Q4(t,e,n){try{let r=n();return yi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ac=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(Fb),this.afterRenderEffectManager=O(hv),this.componentTypes=[],this.components=[],this.isStable=O(ah).hasPendingTasks.pipe(le(r=>!r)),this._injector=O(rn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Md;if(!this._injector.get(OT).done){let f=!s&&kD(r),p=!1;throw new G(405,p)}let a;s?a=r:a=this._injector.get(sh).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=K4(a)?void 0:this._injector.get(li),u=i||a.selector,l=a.create(mt.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(FT,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Vm(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new G(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0;do{if(r===hT)throw new G(103,!1);let i=r===0;for(let{_lView:s,notifyErrorHandler:o}of this._views)!i&&!xD(s)||this.detectChangesInView(s,o,i);this.afterRenderEffectManager.execute(),r++}while(this._views.some(({_lView:i})=>xD(i)))}detectChangesInView(r,i,s){let o;s?(o=0,r[ee]|=1024):r[ee]&64?o=0:o=1,fT(r,i,o)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Vm(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(gh,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Vm(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new G(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Vm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xD(t){return N0(t)}var b0=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},mh=(()=>{let e=class e{compileModuleSync(r){return new E0(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=FD(r),o=jb(s.declarations).reduce((a,c)=>{let u=ai(c);return u&&a.push(new Fo(u)),a},[]);return new b0(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Y4=(()=>{let e=class e{constructor(){this.zone=O(Se),this.applicationRef=O(Ac)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function X4(t){return[{provide:Se,useFactory:t},{provide:Mo,multi:!0,useFactory:()=>{let e=O(Y4,{optional:!0});return()=>e.initialize()}},{provide:Mo,multi:!0,useFactory:()=>{let e=O(t8);return()=>{e.initialize()}}},{provide:Fb,useFactory:J4}]}function J4(){let t=O(Se),e=O(Xn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Z4(t){let e=X4(()=>new Se(e8(t)));return Yd([[],e])}function e8(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var t8=(()=>{let e=class e{constructor(){this.subscription=new Xe,this.initialized=!1,this.zone=O(Se),this.pendingTasks=O(ah)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Se.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function n8(){return typeof $localize<"u"&&$localize.locale||Vd}var yv=new K("",{providedIn:"root",factory:()=>O(yv,he.Optional|he.SkipSelf)||n8()});var LT=new K("");var vd=null;function r8(t=[],e){return mt.create({name:e,providers:[{provide:Xd,useValue:"platform"},{provide:LT,useValue:new Set([()=>vd=null])},...t]})}function i8(t=[]){if(vd)return vd;let e=r8(t);return vd=e,G4(),s8(e),e}function s8(t){t.get(U0,null)?.forEach(n=>n())}function VT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=i8(r),s=[Z4(),...n||[]],a=new Od({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Se);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Xn,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(LT);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),Q4(u,c,()=>{let f=a.get(OT);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(yv,Vd);k4(p||Vd);let v=a.get(Ac);return e!==void 0&&v.bootstrap(e),v})})})}catch(e){return Promise.reject(e)}}function ls(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function BT(t){let e=ai(t);if(!e)return null;let n=new Fo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var qT=null;function Lr(){return qT}function zT(t){qT??=t}var vh=class{};var Yt=new K(""),Dv=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>O(o8),providedIn:"platform"});let t=e;return t})(),WT=new K(""),o8=(()=>{let e=class e extends Dv{constructor(){super(),this._doc=O(Yt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lr().getBaseHref(this._doc)}onPopState(r){let i=Lr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Lr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function bv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function UT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Or(t){return t&&t[0]!=="?"?"?"+t:t}var Vr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>O(Tv),providedIn:"root"});let t=e;return t})(),GT=new K(""),Tv=(()=>{let e=class e extends Vr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??O(Yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return bv(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Or(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Or(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Or(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(te(Dv),te(GT,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),KT=(()=>{let e=class e extends Vr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=bv(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Or(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Or(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(te(Dv),te(GT,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Ho=(()=>{let e=class e{constructor(r){this._subject=new wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=u8(UT(jT(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Or(i))}normalize(r){return e.stripTrailingSlash(c8(this._basePath,jT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Or(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Or(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Or,e.joinWithSlash=bv,e.stripTrailingSlash=UT,e.\u0275fac=function(i){return new(i||e)(te(Vr))},e.\u0275prov=Q({token:e,factory:()=>a8(),providedIn:"root"});let t=e;return t})();function a8(){return new Ho(te(Vr))}function c8(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jT(t){return t.replace(/\/index.html$/,"")}function u8(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function QT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var _v=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},_h=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new _v(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),$T(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);$T(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(De(jo),De(ih),De(cv))},e.\u0275dir=Lt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function $T(t,e){t.context.$implicit=e.item}var qo=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ev,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){HT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){HT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(De(jo),De(ih))},e.\u0275dir=Lt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ev=class{constructor(){this.$implicit=null,this.ngIf=null}};function HT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ot(e)}'.`)}function l8(t,e){return new G(2100,!1)}var wv=class{createSubscription(e,n){return av(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){av(()=>e.unsubscribe())}},Iv=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},d8=new Iv,h8=new wv,YT=(()=>{let e=class e{constructor(r){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(yi(r))return d8;if(vv(r))return h8;throw l8(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this._ref.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(De(us,16))},e.\u0275pipe=ND({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var ds=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=xt({type:e}),e.\u0275inj=Dt({});let t=e;return t})(),Av="browser",f8="server";function p8(t){return t===Av}function Sv(t){return t===f8}var XT=(()=>{let e=class e{};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>p8(O(Jn))?new Cv(O(Yt),window):new xv});let t=e;return t})(),Cv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=g8(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function g8(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var xv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},yh=class{};var Mv=class extends vh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Pv=class t extends Mv{static makeCurrent(){zT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=m8();return n==null?null:v8(n)}resetBaseElement(){Sc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return QT(document.cookie,e)}},Sc=null;function m8(){return Sc=Sc||document.querySelector("base"),Sc?Sc.getAttribute("href"):null}function v8(t){return new URL(t,document.baseURI).pathname}var y8=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),kv=new K(""),tA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new G(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(te(kv),te(Se))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),wh=class{constructor(e){this._doc=e}},Rv="ng-app-id",nA=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sv(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Rv}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Rv),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Rv,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(te(Yt),te(B0),te(j0,8),te(Jn))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Nv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ov=/%COMP%/g,rA="%COMP%",_8=`_nghost-${rA}`,E8=`_ngcontent-${rA}`,w8=!0,I8=new K("",{providedIn:"root",factory:()=>w8});function C8(t){return E8.replace(Ov,t)}function x8(t){return _8.replace(Ov,t)}function iA(t,e){return e.map(n=>n.replace(Ov,t))}var JT=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Sv(c),this.defaultRenderer=new Rc(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Kn.ShadowDom&&(i=ke($({},i),{encapsulation:Kn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ih?s.applyToHost(r):s instanceof Nc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Kn.Emulated:o=new Ih(u,l,i,this.appId,d,a,c,h);break;case Kn.ShadowDom:return new Fv(u,l,r,i,a,c,this.nonce,h);default:o=new Nc(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(te(tA),te(nA),te(B0),te(I8),te(Yt),te(Jn),te(Se),te(j0))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Rc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Nv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ZT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ZT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Nv[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Nv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Tr.DashCase|Tr.Important)?e.style.setProperty(n,r,i&Tr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Lr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function ZT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Fv=class extends Rc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=iA(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Nc=class extends Rc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?iA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ih=class extends Nc{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=C8(u),this.hostAttr=x8(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},D8=(()=>{let e=class e extends wh{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(te(Yt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),eA=["alt","control","meta","shift"],b8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},T8={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},A8=(()=>{let e=class e extends wh{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),eA.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=b8[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),eA.forEach(a=>{if(a!==s){let c=T8[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(te(Yt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function sA(t,e){return VT($({rootComponent:t},S8(e)))}function S8(t){return{appProviders:[...k8,...t?.providers??[]],platformProviders:P8}}function R8(){Pv.makeCurrent()}function N8(){return new Xn}function M8(){return ib(document),document}var P8=[{provide:Jn,useValue:Av},{provide:U0,useValue:R8,multi:!0},{provide:Yt,useFactory:M8,deps:[]}];var k8=[{provide:Xd,useValue:"root"},{provide:Xn,useFactory:N8,deps:[]},{provide:kv,useClass:D8,multi:!0,deps:[Yt,Se,Jn]},{provide:kv,useClass:A8,multi:!0,deps:[Yt]},JT,nA,tA,{provide:Ec,useExisting:JT},{provide:yh,useClass:y8,deps:[]},[]];var oA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(te(Yt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ce="primary",Gc=Symbol("RouteTitle"),jv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Qo(t){return new jv(t)}function O8(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function L8(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!er(t[n],e[n]))return!1;return!0}function er(t,e){let n=t?$v(t):void 0,r=e?$v(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!gA(t[i],e[i]))return!1;return!0}function $v(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function gA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function mA(t){return t.length>0?t[t.length-1]:null}function Ii(t){return _m(t)?t:yi(t)?He(Promise.resolve(t)):Z(t)}var V8={exact:yA,subset:_A},vA={exact:B8,subset:U8,ignored:()=>!0};function aA(t,e,n){return V8[n.paths](t.root,e.root,n.matrixParams)&&vA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function B8(t,e){return er(t,e)}function yA(t,e,n){if(!fs(t.segments,e.segments)||!Dh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!yA(t.children[r],e.children[r],n))return!1;return!0}function U8(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>gA(t[n],e[n]))}function _A(t,e,n){return EA(t,e,e.segments,n)}function EA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!fs(i,n)||e.hasChildren()||!Dh(i,n,r))}else if(t.segments.length===n.length){if(!fs(t.segments,n)||!Dh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!_A(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!fs(t.segments,i)||!Dh(t.segments,i,r)||!t.children[ce]?!1:EA(t.children[ce],e,s,r)}}function Dh(t,e,n){return e.every((r,i)=>vA[n](t[i].parameters,r.parameters))}var _i=class{constructor(e=new Me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){return H8.serialize(this)}},Me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bh(this)}},hs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Qo(this.parameters),this._parameterMap}toString(){return IA(this)}};function j8(t,e){return fs(t,e)&&t.every((n,r)=>er(n.parameters,e[r].parameters))}function fs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function $8(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ce&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ce&&(n=n.concat(e(i,r)))}),n}var Kc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>new Vc,providedIn:"root"});let t=e;return t})(),Vc=class{parse(e){let n=new qv(e);return new _i(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Mc(e.root,!0)}`,r=W8(e.queryParams),i=typeof e.fragment=="string"?`#${q8(e.fragment)}`:"";return`${n}${r}${i}`}},H8=new Vc;function bh(t){return t.segments.map(e=>IA(e)).join("/")}function Mc(t,e){if(!t.hasChildren())return bh(t);if(e){let n=t.children[ce]?Mc(t.children[ce],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ce&&r.push(`${i}:${Mc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=$8(t,(r,i)=>i===ce?[Mc(t.children[ce],!1)]:[`${i}:${Mc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ce]!=null?`${bh(t)}/${n[0]}`:`${bh(t)}/(${n.join("//")})`}}function wA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ch(t){return wA(t).replace(/%3B/gi,";")}function q8(t){return encodeURI(t)}function Hv(t){return wA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Th(t){return decodeURIComponent(t)}function cA(t){return Th(t.replace(/\+/g,"%20"))}function IA(t){return`${Hv(t.path)}${z8(t.parameters)}`}function z8(t){return Object.entries(t).map(([e,n])=>`;${Hv(e)}=${Hv(n)}`).join("")}function W8(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ch(n)}=${Ch(i)}`).join("&"):`${Ch(n)}=${Ch(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var G8=/^[^\/()?;#]+/;function Lv(t){let e=t.match(G8);return e?e[0]:""}var K8=/^[^\/()?;=#]+/;function Q8(t){let e=t.match(K8);return e?e[0]:""}var Y8=/^[^=?&#]+/;function X8(t){let e=t.match(Y8);return e?e[0]:""}var J8=/^[^&#]+/;function Z8(t){let e=t.match(J8);return e?e[0]:""}var qv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ce]=new Me(e,n)),r}parseSegment(){let e=Lv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new hs(Th(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Q8(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Lv(this.remaining);i&&(r=i,this.capture(r))}e[Th(n)]=Th(r)}parseQueryParam(e){let n=X8(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Z8(this.remaining);o&&(r=o,this.capture(r))}let i=cA(n),s=cA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Lv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ce]:new Me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function CA(t){return t.segments.length>0?new Me([],{[ce]:t}):t}function xA(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=xA(i);if(r===ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Me(t.segments,e);return e3(n)}function e3(t){if(t.numberOfChildren===1&&t.children[ce]){let e=t.children[ce];return new Me(t.segments.concat(e.segments),e.children)}return t}function Yo(t){return t instanceof _i}function t3(t,e,n=null,r=null){let i=DA(t);return bA(i,e,n,r)}function DA(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new Me(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=CA(r);return e??i}function bA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Vv(i,i,i,n,r);let s=n3(e);if(s.toRoot())return Vv(i,i,new Me([],{}),n,r);let o=r3(s,i,t),a=o.processChildren?Fc(o.segmentGroup,o.index,s.commands):AA(o.segmentGroup,o.index,s.commands);return Vv(i,o.segmentGroup,a,n,r)}function Ah(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Bc(t){return typeof t=="object"&&t!=null&&t.outlets}function Vv(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=TA(t,e,n);let a=CA(xA(o));return new _i(a,s,i)}function TA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=TA(s,e,n)}),new Me(t.segments,r)}var Sh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ah(r[0]))throw new G(4003,!1);let i=r.find(Bc);if(i&&i!==mA(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function n3(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Sh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Sh(n,e,r)}var Go=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function r3(t,e,n){if(t.isAbsolute)return new Go(e,!0,0);if(!n)return new Go(e,!1,NaN);if(n.parent===null)return new Go(n,!0,0);let r=Ah(t.commands[0])?0:1,i=n.segments.length-1+r;return i3(n,i,t.numberOfDoubleDots)}function i3(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new Go(r,!1,i-s)}function s3(t){return Bc(t[0])?t[0].outlets:{[ce]:t}}function AA(t,e,n){if(t??=new Me([],{}),t.segments.length===0&&t.hasChildren())return Fc(t,e,n);let r=o3(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Me(t.segments.slice(0,r.pathIndex),{});return s.children[ce]=new Me(t.segments.slice(r.pathIndex),t.children),Fc(s,0,i)}else return r.match&&i.length===0?new Me(t.segments,{}):r.match&&!t.hasChildren()?zv(t,e,n):r.match?Fc(t,0,i):zv(t,e,n)}function Fc(t,e,n){if(n.length===0)return new Me(t.segments,{});{let r=s3(n),i={};if(Object.keys(r).some(s=>s!==ce)&&t.children[ce]&&t.numberOfChildren===1&&t.children[ce].segments.length===0){let s=Fc(t.children[ce],e,n);return new Me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=AA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Me(t.segments,i)}}function o3(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Bc(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!lA(c,u,o))return s;r+=2}else{if(!lA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function zv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Bc(s)){let c=a3(s.outlets);return new Me(r,c)}if(i===0&&Ah(n[0])){let c=t.segments[e];r.push(new hs(c.path,uA(n[0]))),i++;continue}let o=Bc(s)?s.outlets[ce]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ah(a)?(r.push(new hs(o,uA(a))),i+=2):(r.push(new hs(o,{})),i++)}return new Me(r,{})}function a3(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=zv(new Me([],{}),0,r))}),e}function uA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function lA(t,e,n){return t==n.path&&er(e,n.parameters)}var Oc="imperative",ct=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ct||{}),wn=class{constructor(e,n){this.id=e,this.url=n}},Xo=class extends wn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends wn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},En=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(En||{}),Rh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Rh||{}),Ei=class extends wn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wi=class extends wn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},Uc=class extends wn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Nh=class extends wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wv=class extends wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gv=class extends wn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kv=class extends wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qv=class extends wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yv=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xv=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jv=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zv=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ey=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ty=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mh=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},jc=class{},$c=class{constructor(e){this.url=e}};var ny=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qc,this.attachRef=null}},Qc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new ny,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ph=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ry(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ry(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=iy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iy(e,this._root).map(n=>n.value)}};function ry(t,e){if(t===e.value)return e;for(let n of e.children){let r=ry(t,n);if(r)return r}return null}function iy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=iy(t,n);if(r.length)return r.unshift(e),r}return[]}var sn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Wo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var kh=class extends Ph{constructor(e,n){super(e),this.snapshot=n,py(this,e)}toString(){return this.snapshot.toString()}};function SA(t){let e=c3(t),n=new pt([new hs("",{})]),r=new pt({}),i=new pt({}),s=new pt({}),o=new pt(""),a=new nr(n,r,s,o,i,ce,t,e.root);return a.snapshot=e.root,new kh(new sn(a,[]),e)}function c3(t){let e={},n={},r={},i="",s=new Hc([],e,r,i,n,ce,t,null,{});return new Fh("",new sn(s,[]))}var nr=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(le(u=>u[Gc]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fy(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),t.params),data:$($({},e.data),t.data),resolve:$($($($({},t.data),e.data),i?.data),t._resolvedData)}:r={params:$({},t.params),data:$({},t.data),resolve:$($({},t.data),t._resolvedData??{})},i&&NA(i)&&(r.resolve[Gc]=i.title),r}var Hc=class{get title(){return this.data?.[Gc]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Fh=class extends Ph{constructor(e,n){super(n),this.url=e,py(this,n)}toString(){return RA(this._root)}};function py(t,e){e.value._routerState=t,e.children.forEach(n=>py(t,n))}function RA(t){let e=t.children.length>0?` { ${t.children.map(RA).join(", ")} } `:"";return`${t.value}${e}`}function Bv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,er(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),er(e.params,n.params)||t.paramsSubject.next(n.params),L8(e.url,n.url)||t.urlSubject.next(n.url),er(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function sy(t,e){let n=er(t.params,e.params)&&j8(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||sy(t.parent,e.parent))}function NA(t){return typeof t.title=="string"||t.title===null}var gy=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new wt,this.deactivateEvents=new wt,this.attachEvents=new wt,this.detachEvents=new wt,this.parentContexts=O(Qc),this.location=O(jo),this.changeDetector=O(us),this.environmentInjector=O(rn),this.inputBinder=O(Bh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new oy(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Lt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[as]});let t=e;return t})(),oy=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===nr?this.route:e===Qc?this.childContexts:this.parent.get(e,n)}},Bh=new K(""),dA=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=lc([i.queryParams,i.params,i.data]).pipe(pn(([o,a,c],u)=>(c=$($($({},o),a),c),u===0?Z(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=BT(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function u3(t,e,n){let r=qc(t,e._root,n?n._root:void 0);return new kh(r,e)}function qc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=l3(t,e,n);return new sn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qc(t,a)),o}}let r=d3(e.value),i=e.children.map(s=>qc(t,s));return new sn(r,i)}}function l3(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return qc(t,r,i);return qc(t,r)})}function d3(t){return new nr(new pt(t.url),new pt(t.params),new pt(t.queryParams),new pt(t.fragment),new pt(t.data),t.outlet,t.component,t)}var MA="ngNavigationCancelingError";function PA(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Yo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kA(!1,En.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function kA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[MA]=!0,n.cancellationCode=e,n}function h3(t){return FA(t)&&Yo(t.url)}function FA(t){return!!t&&t[MA]}var f3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=vn({type:e,selectors:[["ng-component"]],standalone:!0,features:[_n],decls:1,vars:0,template:function(i,s){i&1&&bt(0,"router-outlet")},dependencies:[gy],encapsulation:2});let t=e;return t})();function p3(t,e){return t.providers&&!t._injector&&(t._injector=oh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function my(t){let e=t.children&&t.children.map(my),n=e?ke($({},t),{children:e}):$({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ce&&(n.component=f3),n}function rr(t){return t.outlet||ce}function g3(t,e){let n=t.filter(r=>rr(r)===e);return n.push(...t.filter(r=>rr(r)!==e)),n}function Yc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var m3=(t,e,n,r)=>le(i=>(new ay(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ay=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Bv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Wo(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Wo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Wo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Wo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ty(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zv(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Bv(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Bv(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Yc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Oh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ko=class{constructor(e,n){this.component=e,this.route=n}};function v3(t,e,n){let r=t._root,i=e?e._root:null;return Pc(r,i,n,[r.value])}function y3(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Zo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!sb(t)?t:e.get(t):r}function Pc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Wo(e);return t.children.forEach(o=>{_3(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Lc(a,n.getContext(o),i)),i}function _3(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=E3(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Oh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Pc(t,e,a?a.children:null,r,i):Pc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ko(a.outlet.component,o))}else o&&Lc(e,a,i),i.canActivateChecks.push(new Oh(r)),s.component?Pc(t,null,a?a.children:null,r,i):Pc(t,null,n,r,i);return i}function E3(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!fs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fs(t.url,e.url)||!er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sy(t,e)||!er(t.queryParams,e.queryParams);case"paramsChange":default:return!sy(t,e)}}function Lc(t,e,n){let r=Wo(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Lc(o,e.children.getContext(s),n):Lc(o,null,n):Lc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ko(e.outlet.component,i)):n.canDeactivateChecks.push(new Ko(null,i)):n.canDeactivateChecks.push(new Ko(null,i))}function Xc(t){return typeof t=="function"}function w3(t){return typeof t=="boolean"}function I3(t){return t&&Xc(t.canLoad)}function C3(t){return t&&Xc(t.canActivate)}function x3(t){return t&&Xc(t.canActivateChild)}function D3(t){return t&&Xc(t.canDeactivate)}function b3(t){return t&&Xc(t.canMatch)}function OA(t){return t instanceof xr||t?.name==="EmptyError"}var xh=Symbol("INITIAL_VALUE");function Jo(){return pn(t=>lc(t.map(e=>e.pipe(Dr(1),cd(xh)))).pipe(le(e=>{for(let n of e)if(n!==!0){if(n===xh)return xh;if(n===!1||n instanceof _i)return n}return!0}),nn(e=>e!==xh),Dr(1)))}function T3(t,e){return nt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Z(ke($({},n),{guardsResult:!0})):A3(o,r,i,t).pipe(nt(a=>a&&w3(a)?S3(r,s,t,e):Z(a)),le(a=>ke($({},n),{guardsResult:a})))})}function A3(t,e,n,r){return He(t).pipe(nt(i=>k3(i.component,i.route,n,e,r)),zn(i=>i!==!0,!0))}function S3(t,e,n,r){return He(e).pipe(Ki(i=>Eo(N3(i.route.parent,r),R3(i.route,r),P3(t,i.path,n),M3(t,i.route,n))),zn(i=>i!==!0,!0))}function R3(t,e){return t!==null&&e&&e(new ey(t)),Z(!0)}function N3(t,e){return t!==null&&e&&e(new Jv(t)),Z(!0)}function M3(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(s=>sd(()=>{let o=Yc(e)??n,a=Zo(s,o),c=C3(a)?a.canActivate(e,t):fi(o,()=>a(e,t));return Ii(c).pipe(zn())}));return Z(i).pipe(Jo())}function P3(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>y3(o)).filter(o=>o!==null).map(o=>sd(()=>{let a=o.guards.map(c=>{let u=Yc(o.node)??n,l=Zo(c,u),d=x3(l)?l.canActivateChild(r,t):fi(u,()=>l(r,t));return Ii(d).pipe(zn())});return Z(a).pipe(Jo())}));return Z(s).pipe(Jo())}function k3(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let c=Yc(e)??i,u=Zo(a,c),l=D3(u)?u.canDeactivate(t,e,n,r):fi(c,()=>u(t,e,n,r));return Ii(l).pipe(zn())});return Z(o).pipe(Jo())}function F3(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let s=i.map(o=>{let a=Zo(o,t),c=I3(a)?a.canLoad(e,n):fi(t,()=>a(e,n));return Ii(c)});return Z(s).pipe(Jo(),LA(r))}function LA(t){return Ul(rt(e=>{if(Yo(e))throw PA(t,e)}),le(e=>e===!0))}function O3(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let s=i.map(o=>{let a=Zo(o,t),c=b3(a)?a.canMatch(e,n):fi(t,()=>a(e,n));return Ii(c)});return Z(s).pipe(Jo(),LA(r))}var zc=class{constructor(e){this.segmentGroup=e||null}},Lh=class extends Error{constructor(e){super(),this.urlTree=e}};function zo(t){return yo(new zc(t))}function L3(t){return yo(new G(4e3,!1))}function V3(t){return yo(kA(!1,En.GuardRejected))}var cy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ce])return L3(e.redirectTo);i=i.children[ce]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Lh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new _i(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},uy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B3(t,e,n,r,i){let s=vy(t,e,n);return s.matched?(r=p3(e,r),O3(r,e,n,i).pipe(le(o=>o===!0?s:$({},uy)))):Z(s)}function vy(t,e,n){if(e.path==="**")return U3(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?$({},uy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||O8)(n,t,e);if(!i)return $({},uy);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?$($({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function U3(t){return{matched:!0,parameters:t.length>0?mA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function hA(t,e,n,r){return n.length>0&&H3(t,n,r)?{segmentGroup:new Me(e,$3(r,new Me(n,t.children))),slicedSegments:[]}:n.length===0&&q3(t,n,r)?{segmentGroup:new Me(t.segments,j3(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Me(t.segments,t.children),slicedSegments:n}}function j3(t,e,n,r){let i={};for(let s of n)if(Uh(t,e,s)&&!r[rr(s)]){let o=new Me([],{});i[rr(s)]=o}return $($({},r),i)}function $3(t,e){let n={};n[ce]=e;for(let r of t)if(r.path===""&&rr(r)!==ce){let i=new Me([],{});n[rr(r)]=i}return n}function H3(t,e,n){return n.some(r=>Uh(t,e,r)&&rr(r)!==ce)}function q3(t,e,n){return n.some(r=>Uh(t,e,r))}function Uh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function z3(t,e,n,r){return rr(t)!==r&&(r===ce||!Uh(e,n,t))?!1:vy(e,t,n).matched}function W3(t,e,n){return e.length===0&&!t.children[n]}var ly=class{};function G3(t,e,n,r,i,s,o="emptyOnly"){return new dy(t,e,n,r,i,o,s).recognize()}var K3=31,dy=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new cy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=hA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(n=>{let r=new Hc([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,{},ce,this.rootComponentType,null,{}),i=new sn(r,n),s=new Fh("",i),o=t3(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ce).pipe(ri(r=>{if(r instanceof Lh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof zc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=fy(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(le(s=>s instanceof sn?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return He(i).pipe(Ki(s=>{let o=r.children[s],a=g3(n,s);return this.processSegmentGroup(e,a,o,s)}),ad((s,o)=>(s.push(...o),s)),ii(null),Im(),nt(s=>{if(s===null)return zo(r);let o=VA(s);return Q3(o),Z(o)}))}processSegment(e,n,r,i,s,o){return He(n).pipe(Ki(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(ri(c=>{if(c instanceof zc)return Z(null);throw c}))),zn(a=>!!a),ri(a=>{if(OA(a))return W3(r,i,s)?Z(new ly):zo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return z3(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):zo(i):zo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=vy(n,i,s);if(!a)return zo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>K3&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(nt(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=B3(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(pn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(pn(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Hc(l,h,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,X3(r),rr(r),r.component??r._loadedComponent??null,r,J3(r)),{segmentGroup:p,slicedSegments:v}=hA(n,l,d,c);if(v.length===0&&p.hasChildren())return this.processChildren(u,c,p).pipe(le(g=>g===null?null:new sn(f,g)));if(c.length===0&&v.length===0)return Z(new sn(f,[]));let y=rr(r)===s;return this.processSegment(u,c,p,v,y?ce:s,!0).pipe(le(g=>new sn(f,g instanceof sn?[g]:[])))}))):zo(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):F3(e,n,r,this.urlSerializer).pipe(nt(i=>i?this.configLoader.loadChildren(e,n).pipe(rt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):V3(n))):Z({routes:[],injector:e})}};function Q3(t){t.sort((e,n)=>e.value.outlet===ce?-1:n.value.outlet===ce?1:e.value.outlet.localeCompare(n.value.outlet))}function Y3(t){let e=t.value.routeConfig;return e&&e.path===""}function VA(t){let e=[],n=new Set;for(let r of t){if(!Y3(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=VA(r.children);e.push(new sn(r.value,i))}return e.filter(r=>!n.has(r))}function X3(t){return t.data||{}}function J3(t){return t.resolve||{}}function Z3(t,e,n,r,i,s){return nt(o=>G3(t,e,n,r,o.extractedUrl,i,s).pipe(le(({state:a,tree:c})=>ke($({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function eU(t,e){return nt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of BA(c))o.add(u);let a=0;return He(o).pipe(Ki(c=>s.has(c)?tU(c,r,t,e):(c.data=fy(c,c.parent,t).resolve,Z(void 0))),rt(()=>a++),wo(1),nt(c=>a===o.size?Z(n):fn))})}function BA(t){let e=t.children.map(n=>BA(n)).flat();return[t,...e]}function tU(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!NA(i)&&(s[Gc]=i.title),nU(s,t,e,r).pipe(le(o=>(t._resolvedData=o,t.data=fy(t,t.parent,n).resolve,null)))}function nU(t,e,n,r){let i=$v(t);if(i.length===0)return Z({});let s={};return He(i).pipe(nt(o=>rU(t[o],e,n,r).pipe(zn(),rt(a=>{s[o]=a}))),wo(1),wm(s),ri(o=>OA(o)?fn:yo(o)))}function rU(t,e,n,r){let i=Yc(e)??r,s=Zo(t,i),o=s.resolve?s.resolve(e,n):fi(i,()=>s(e,n));return Ii(o)}function Uv(t){return pn(e=>{let n=t(e);return n?He(n).pipe(le(()=>e)):Z(e)})}var UA=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ce);return i}getResolvedTitleForRoute(r){return r.data[Gc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>O(iU),providedIn:"root"});let t=e;return t})(),iU=(()=>{let e=class e extends UA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(te(oA))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jc=new K("",{providedIn:"root",factory:()=>({})}),Wc=new K(""),yy=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(mh)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ii(r.loadComponent()).pipe(le(jA),rt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),dc(()=>{this.componentLoaders.delete(r)})),s=new po(i,()=>new qt).pipe(fo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=sU(i,this.compiler,r,this.onLoadEndListener).pipe(dc(()=>{this.childrenLoaders.delete(i)})),a=new po(o,()=>new qt).pipe(fo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sU(t,e,n,r){return Ii(t.loadChildren()).pipe(le(jA),nt(i=>i instanceof wc||Array.isArray(i)?Z(i):He(e.compileModuleAsync(i))),le(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Wc,[],{optional:!0,self:!0}).flat()),{routes:o.map(my),injector:s}}))}function oU(t){return t&&typeof t=="object"&&"default"in t}function jA(t){return oU(t)?t.default:t}var _y=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>O(aU),providedIn:"root"});let t=e;return t})(),aU=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$A=new K(""),HA=new K("");function cU(t,e,n){let r=t.get(HA),i=t.get(Yt);return t.get(Se).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),uU(t))),{onViewTransitionCreated:c}=r;return c&&fi(t,()=>c({transition:a,from:e,to:n})),o})}function uU(t){return new Promise(e=>{dv(e,{injector:t})})}var Ey=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qt,this.transitionAbortSubject=new qt,this.configLoader=O(yy),this.environmentInjector=O(rn),this.urlSerializer=O(Kc),this.rootContexts=O(Qc),this.location=O(Ho),this.inputBindingEnabled=O(Bh,{optional:!0})!==null,this.titleStrategy=O(UA),this.options=O(Jc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(_y),this.createViewTransition=O($A,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Yv(s)),i=s=>this.events.next(new Xv(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ke($($({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new pt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Oc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(nn(o=>o.id!==0),le(o=>ke($({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pn(o=>{this.currentTransition=o;let a=!1,c=!1;return Z(o).pipe(rt(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ke($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),pn(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new wi(u.id,this.urlSerializer.serialize(u.rawUrl),h,Rh.IgnoredSameUrlNavigation)),u.resolve(null),fn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(pn(h=>{let f=this.transitions?.getValue();return this.events.next(new Xo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?fn:Promise.resolve(h)}),Z3(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),rt(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ke($({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Nh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:v,extras:y}=u,g=new Xo(h,this.urlSerializer.serialize(f),p,v);this.events.next(g);let m=SA(this.rootComponentType).snapshot;return this.currentTransition=o=ke($({},u),{targetSnapshot:m,urlAfterRedirects:f,extras:ke($({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Z(o)}else{let h="";return this.events.next(new wi(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Rh.IgnoredByUrlHandlingStrategy)),u.resolve(null),fn}}),rt(u=>{let l=new Wv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),le(u=>(this.currentTransition=o=ke($({},u),{guards:v3(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),T3(this.environmentInjector,u=>this.events.next(u)),rt(u=>{if(o.guardsResult=u.guardsResult,Yo(u.guardsResult))throw PA(this.urlSerializer,u.guardsResult);let l=new Gv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),nn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",En.GuardRejected),!1)),Uv(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(rt(l=>{let d=new Kv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),pn(l=>{let d=!1;return Z(l).pipe(eU(this.paramsInheritanceStrategy,this.environmentInjector),rt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",En.NoDataFromResolver)}}))}),rt(l=>{let d=new Qv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Uv(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(rt(f=>{d.component=f}),le(()=>{})));for(let f of d.children)h.push(...l(f));return h};return lc(l(u.targetSnapshot.root)).pipe(ii(null),Dr(1))}),Uv(()=>this.afterPreactivation()),pn(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?He(d).pipe(le(()=>o)):Z(o)}),le(u=>{let l=u3(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ke($({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),rt(()=>{this.events.next(new jc)}),m3(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Dr(1),rt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Cm(this.transitionAbortSubject.pipe(rt(u=>{throw u}))),dc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",En.SupersededByNewNavigation),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),ri(u=>{if(c=!0,FA(u))this.events.next(new Ei(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),h3(u)?this.events.next(new $c(u.url)):o.resolve(!1);else{this.events.next(new Uc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return fn}))}))}cancelNavigationTransition(r,i,s){let o=new Ei(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lU(t){return t!==Oc}var dU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>O(hU),providedIn:"root"});let t=e;return t})(),hy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hU=(()=>{let e=class e extends hy{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Dc(e)))(s||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>O(fU),providedIn:"root"});let t=e;return t})(),fU=(()=>{let e=class e extends qA{constructor(){super(...arguments),this.location=O(Ho),this.urlSerializer=O(Kc),this.options=O(Jc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(_y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _i,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=SA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Xo)this.stateMemento=this.createStateMemento();else if(r instanceof wi)this.rawUrlTree=i.initialUrl;else if(r instanceof Nh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof jc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ei&&(r.code===En.GuardRejected||r.code===En.NoDataFromResolver)?this.restoreHistory(i):r instanceof Uc?this.restoreHistory(i,!0):r instanceof tr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=$($({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=$($({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Dc(e)))(s||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(kc||{});function zA(t,e){t.events.pipe(nn(n=>n instanceof tr||n instanceof Ei||n instanceof Uc||n instanceof wi),le(n=>n instanceof tr||n instanceof wi?kc.COMPLETE:(n instanceof Ei?n.code===En.Redirect||n.code===En.SupersededByNewNavigation:!1)?kc.REDIRECTING:kc.FAILED),nn(n=>n!==kc.REDIRECTING),Dr(1)).subscribe(()=>{e()})}function pU(t){throw t}var gU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ln=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=O(fh),this.stateManager=O(qA),this.options=O(Jc,{optional:!0})||{},this.pendingTasks=O(ah),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(Ey),this.urlSerializer=O(Kc),this.location=O(Ho),this.urlHandlingStrategy=O(_y),this._events=new qt,this.errorHandler=this.options.errorHandler||pU,this.navigated=!1,this.routeReuseStrategy=O(dU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(Wc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Bh,{optional:!0}),this.eventsSubscription=new Xe,this.isNgZoneEnabled=O(Se)instanceof Se&&Se.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ei&&i.code!==En.Redirect&&i.code!==En.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof tr)this.navigated=!0;else if(i instanceof $c){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||lU(s.source)};this.scheduleNavigation(a,Oc,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}yU(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Oc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=$({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(my),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=DA(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return bA(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Yo(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Oc,null,i)}navigate(r,i={skipLocationChange:!1}){return vU(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=$({},gU):i===!1?s=$({},mU):s=i,Yo(r))return aA(this.currentUrlTree,r,s);let o=this.parseUrl(r);return aA(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return zA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new G(4008,!1)}function yU(t){return!(t instanceof jc)&&!(t instanceof $c)}var jh=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new qt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof tr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Vb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(De(Ln),De(nr),K0("tabindex"),De(cs),De(hi),De(Vr))},e.\u0275dir=Lt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&vt("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ch("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[It.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ls],skipLocationChange:[It.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ls],replaceUrl:[It.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ls],routerLink:"routerLink"},standalone:!0,features:[fv,as]});let t=e;return t})();var Vh=class{};var _U=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(nn(r=>r instanceof tr),Ki(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=oh(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return He(s).pipe(_o())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=Z(null);let o=s.pipe(nt(a=>a===null?Z(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return He([o,a]).pipe(_o())}else return o})}};e.\u0275fac=function(i){return new(i||e)(te(Ln),te(mh),te(rn),te(Vh),te(yy))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),WA=new K(""),EU=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Xo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof tr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof wi&&r.code===Rh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Mh&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Mh(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Xb()},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function GA(t,...e){return Yd([{provide:Wc,multi:!0,useValue:t},[],{provide:nr,useFactory:KA,deps:[Ln]},{provide:gh,multi:!0,useFactory:QA},e.map(n=>n.\u0275providers)])}function KA(t){return t.routerState.root}function Zc(t,e){return{\u0275kind:t,\u0275providers:e}}function QA(){let t=O(mt);return e=>{let n=t.get(Ac);if(e!==n.components[0])return;let r=t.get(Ln),i=t.get(YA);t.get(wy)===1&&r.initialNavigation(),t.get(XA,null,he.Optional)?.setUpPreloading(),t.get(WA,null,he.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YA=new K("",{factory:()=>new qt}),wy=new K("",{providedIn:"root",factory:()=>1});function wU(){return Zc(2,[{provide:wy,useValue:0},{provide:ph,multi:!0,deps:[mt],useFactory:e=>{let n=e.get(WT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Ln),s=e.get(YA);zA(i,()=>{r(!0)}),e.get(Ey).afterPreactivation=()=>(r(!0),s.closed?Z(void 0):s),i.initialNavigation()}))}}])}function IU(){return Zc(3,[{provide:ph,multi:!0,useFactory:()=>{let e=O(Ln);return()=>{e.setUpLocationChangeListener()}}},{provide:wy,useValue:2}])}var XA=new K("");function CU(t){return Zc(0,[{provide:XA,useExisting:_U},{provide:Vh,useExisting:t}])}function xU(){return Zc(8,[dA,{provide:Bh,useExisting:dA}])}function DU(t){let e=[{provide:$A,useValue:cU},{provide:HA,useValue:$({skipNextTransition:!!t?.skipInitialTransition},t)}];return Zc(9,e)}var fA=new K("ROUTER_FORROOT_GUARD"),bU=[Ho,{provide:Kc,useClass:Vc},Ln,Qc,{provide:nr,useFactory:KA,deps:[Ln]},yy,[]],$h=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[bU,[],{provide:Wc,multi:!0,useValue:r},{provide:fA,useFactory:RU,deps:[[Ln,new Ze,new q0]]},{provide:Jc,useValue:i||{}},i?.useHash?AU():SU(),TU(),i?.preloadingStrategy?CU(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?NU(i):[],i?.bindToComponentInputs?xU().\u0275providers:[],i?.enableViewTransitions?DU().\u0275providers:[],MU()]}}static forChild(r){return{ngModule:e,providers:[{provide:Wc,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(te(fA,8))},e.\u0275mod=xt({type:e}),e.\u0275inj=Dt({});let t=e;return t})();function TU(){return{provide:WA,useFactory:()=>{let t=O(XT),e=O(Se),n=O(Jc),r=O(Ey),i=O(Kc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new EU(i,r,t,e,n)}}}function AU(){return{provide:Vr,useClass:KT}}function SU(){return{provide:Vr,useClass:Tv}}function RU(t){return"guarded"}function NU(t){return[t.initialNavigation==="disabled"?IU().\u0275providers:[],t.initialNavigation==="enabledBlocking"?wU().\u0275providers:[]]}var pA=new K("");function MU(){return[{provide:pA,useFactory:QA},{provide:gh,multi:!0,useExisting:pA}]}var ZA={production:!0,firebase:{projectId:"pass-man-1ca5f",appId:"1:342537638250:web:b27feac583f90c819dd513",storageBucket:"pass-man-1ca5f.appspot.com",apiKey:"AIzaSyBWvb70uWG3wvHCzNl14l2QsWauAFHkiMU",authDomain:"pass-man-1ca5f.firebaseapp.com",messagingSenderId:"342537638250"}};var aS=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(De(cs),De(hi))},e.\u0275dir=Lt({type:e});let t=e;return t})(),PU=(()=>{let e=class e extends aS{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Dc(e)))(s||e)}})(),e.\u0275dir=Lt({type:e,features:[pi]});let t=e;return t})(),cS=new K("");var kU={provide:cS,useExisting:Vo(()=>Ci),multi:!0};function FU(){let t=Lr()?Lr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var OU=new K(""),Ci=(()=>{let e=class e extends aS{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!FU())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(De(cs),De(hi),De(OU,8))},e.\u0275dir=Lt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&vt("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[dh([kU]),pi]});let t=e;return t})();var uS=new K(""),lS=new K("");function dS(t){return t!=null}function hS(t){return yi(t)?He(t):t}function fS(t){let e={};return t.forEach(n=>{e=n!=null?$($({},e),n):e}),Object.keys(e).length===0?null:e}function pS(t,e){return e.map(n=>n(t))}function LU(t){return!t.validate}function gS(t){return t.map(e=>LU(e)?e:n=>e.validate(n))}function VU(t){if(!t)return null;let e=t.filter(dS);return e.length==0?null:function(n){return fS(pS(n,e))}}function Cy(t){return t!=null?VU(gS(t)):null}function BU(t){if(!t)return null;let e=t.filter(dS);return e.length==0?null:function(n){let r=pS(n,e).map(hS);return Em(r).pipe(le(fS))}}function xy(t){return t!=null?BU(gS(t)):null}function eS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function UU(t){return t._rawValidators}function jU(t){return t._rawAsyncValidators}function Iy(t){return t?Array.isArray(t)?t:[t]:[]}function qh(t,e){return Array.isArray(t)?t.includes(e):t===e}function tS(t,e){let n=Iy(e);return Iy(t).forEach(i=>{qh(n,i)||n.push(i)}),n}function nS(t,e){return Iy(e).filter(n=>!qh(t,n))}var zh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ta=class extends zh{get formDirective(){return null}get path(){return null}},ru=class extends zh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Wh=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},$U={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$ee=ke($({},$U),{"[class.ng-submitted]":"isSubmitted"}),na=(()=>{let e=class e extends Wh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(De(ru,2))},e.\u0275dir=Lt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&uh("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[pi]});let t=e;return t})(),ra=(()=>{let e=class e extends Wh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(De(ta,10))},e.\u0275dir=Lt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&uh("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[pi]});let t=e;return t})();var eu="VALID",Hh="INVALID",ea="PENDING",tu="DISABLED";function mS(t){return(Qh(t)?t.validators:t)||null}function HU(t){return Array.isArray(t)?Cy(t):t||null}function vS(t,e){return(Qh(e)?e.asyncValidators:t)||null}function qU(t){return Array.isArray(t)?xy(t):t||null}function Qh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function zU(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function WU(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var Gh=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===eu}get invalid(){return this.status===Hh}get pending(){return this.status==ea}get disabled(){return this.status===tu}get enabled(){return this.status!==tu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nS(e,this._rawAsyncValidators))}hasValidator(e){return qh(this._rawValidators,e)}hasAsyncValidator(e){return qh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ea,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=tu,this.errors=null,this._forEachChild(r=>{r.disable(ke($({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ke($({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=eu,this._forEachChild(r=>{r.enable(ke($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ke($({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===eu||this.status===ea)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tu:eu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ea,this._hasOwnPendingAsyncValidator=!0;let n=hS(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new wt,this.statusChanges=new wt}_calculateStatus(){return this._allControlsDisabled()?tu:this.errors?Hh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ea)?ea:this._anyControlsHaveStatus(Hh)?Hh:eu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=HU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=qU(this._rawAsyncValidators)}},Kh=class extends Gh{constructor(e,n,r){super(mS(n),vS(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){WU(this,!0,e),Object.keys(e).forEach(r=>{zU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Dy=new K("CallSetDisabledState",{providedIn:"root",factory:()=>by}),by="always";function GU(t,e){return[...e.path,t]}function yS(t,e,n=by){_S(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),QU(t,e),XU(t,e),YU(t,e),KU(t,e)}function rS(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function KU(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function _S(t,e){let n=UU(t);e.validator!==null?t.setValidators(eS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=jU(t);e.asyncValidator!==null?t.setAsyncValidators(eS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();rS(e._rawValidators,i),rS(e._rawAsyncValidators,i)}function QU(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ES(t,e)})}function YU(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ES(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ES(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function XU(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function JU(t,e){t==null,_S(t,e)}function ZU(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function e6(t){return Object.getPrototypeOf(t.constructor)===PU}function t6(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function n6(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Ci?n=s:e6(s)?r=s:i=s}),i||r||n||null}var r6={provide:ta,useExisting:Vo(()=>ps)},nu=Promise.resolve(),ps=(()=>{let e=class e extends ta{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new wt,this.form=new Kh({},Cy(r),xy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){nu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),yS(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){nu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){nu.then(()=>{let i=this._findContainer(r.path),s=new Kh({});JU(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){nu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){nu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,t6(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(De(uS,10),De(lS,10),De(Dy,8))},e.\u0275dir=Lt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&vt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[It.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[dh([r6]),pi]});let t=e;return t})();function iS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var i6=class extends Gh{constructor(e=null,n,r){super(mS(n),vS(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var s6={provide:ru,useExisting:Vo(()=>gs)},oS=Promise.resolve(),gs=(()=>{let e=class e extends ru{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new i6,this._registered=!1,this.name="",this.update=new wt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=n6(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),ZU(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){yS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){oS.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&ls(i);oS.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?GU(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(De(ta,9),De(uS,10),De(lS,10),De(cS,10),De(us,8),De(Dy,8))},e.\u0275dir=Lt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[It.None,"disabled","isDisabled"],model:[It.None,"ngModel","model"],options:[It.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[dh([s6]),pi,as]});let t=e;return t})(),ia=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Lt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var o6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=xt({type:e}),e.\u0275inj=Dt({});let t=e;return t})();var sa=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Dy,useValue:r.callSetDisabledState??by}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=xt({type:e}),e.\u0275inj=Dt({imports:[o6]});let t=e;return t})();var Sy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var L=function(t,e){if(!t)throw vs(e)},vs=function(t){return new Error("Firebase Database ("+Sy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var IS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},a6=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new Ry;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ry=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},My=function(t){let e=IS(t);return Xh.encodeByteArray(e,!0)},iu=function(t){return My(t).replace(/\./g,"")},su=function(t){try{return Xh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function CS(t){return xS(void 0,t)}function xS(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!c6(n)||(t[n]=xS(t[n],e[n]));return t}function c6(t){return t!=="__proto__"}function u6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var l6=()=>u6().__FIREBASE_DEFAULTS__,d6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},h6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&su(t[1]);return e&&JSON.parse(e)},Jh=()=>{try{return l6()||d6()||h6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Py=t=>{var e,n;return(n=(e=Jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zh=t=>{let e=Py(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ky=()=>{var t;return(t=Jh())===null||t===void 0?void 0:t.config},Fy=t=>{var e;return(e=Jh())===null||e===void 0?void 0:e[`_${t}`]};var ms=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ef(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[iu(JSON.stringify(n)),iu(JSON.stringify(o)),""].join(".")}function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ou(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function f6(){var t;let e=(t=Jh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bS(){let t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ir(){return Sy.NODE_CLIENT===!0||Sy.NODE_ADMIN===!0}function TS(){return!f6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nf(){try{return typeof indexedDB=="object"}catch{return!1}}function AS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var p6="FirebaseError",on=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=p6,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Br.prototype.create)}},Br=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?g6(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new on(i,a,r)}};function g6(t,e){return t.replace(m6,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var m6=/\{\$([^}]+)}/g;function oa(t){return JSON.parse(t)}function ut(t){return JSON.stringify(t)}var SS=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=oa(su(s[0])||""),n=oa(su(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var RS=function(t){let e=SS(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},NS=function(t){let e=SS(t).claims;return typeof e=="object"&&e.admin===!0};function sr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ys(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function au(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cu(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function _s(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(wS(s)&&wS(o)){if(!_s(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function wS(t){return t!==null&&typeof t=="object"}function Es(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aa(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ca(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Yh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,l;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),l=1518500249):(u=s^o^a,l=1859775393):d<60?(u=s&o|a&(s|o),l=2400959708):(u=s^o^a,l=3395469782);let h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function MS(t,e){let n=new Ny(t,e);return n.subscribe.bind(n)}var Ny=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");v6(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ay),i.error===void 0&&(i.error=Ay),i.complete===void 0&&(i.complete=Ay);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function v6(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ay(){}function PS(t,e){return`${t} failed: ${e} argument `}var kS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,L(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uu=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var zee=4*60*60*1e3;function et(t){return t&&t._delegate?t._delegate:t}var Xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ws="[DEFAULT]";var rf=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ms;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_6(e))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ws){return this.instances.has(e)}getOptions(e=ws){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ws){return this.component?this.component.multipleInstances?e:ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function y6(t){return t===ws?void 0:t}function _6(t){return t.instantiationMode==="EAGER"}var lu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new rf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var E6=[],pe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(pe||{}),w6={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},I6=pe.INFO,C6={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},x6=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=C6[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},or=class{constructor(e){this.name=e,this._logLevel=I6,this._logHandler=x6,this._userLogHandler=null,E6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var D6=(t,e)=>e.some(n=>t instanceof n),FS,OS;function b6(){return FS||(FS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T6(){return OS||(OS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var LS=new WeakMap,Ly=new WeakMap,VS=new WeakMap,Oy=new WeakMap,By=new WeakMap;function A6(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ar(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&LS.set(n,t)}).catch(()=>{}),By.set(e,t),e}function S6(t){if(Ly.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ly.set(t,e)}var Vy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ly.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BS(t){Vy=t(Vy)}function R6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(sf(this),e,...n);return VS.set(r,e.sort?e.sort():[e]),ar(r)}:T6().includes(t)?function(...e){return t.apply(sf(this),e),ar(LS.get(this))}:function(...e){return ar(t.apply(sf(this),e))}}function N6(t){return typeof t=="function"?R6(t):(t instanceof IDBTransaction&&S6(t),D6(t,b6())?new Proxy(t,Vy):t)}function ar(t){if(t instanceof IDBRequest)return A6(t);if(Oy.has(t))return Oy.get(t);let e=N6(t);return e!==t&&(Oy.set(t,e),By.set(e,t)),e}var sf=t=>By.get(t);function jS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=ar(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ar(o.result),c.oldVersion,c.newVersion,ar(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var M6=["get","getKey","getAll","getAllKeys","count"],P6=["put","add","delete","clear"],Uy=new Map;function US(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uy.get(e))return Uy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=P6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M6.includes(n)))return;let s=function(o,...a){return _(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Uy.set(e,s),s}BS(t=>ke($({},t),{get:(e,n,r)=>US(e,n)||t.get(e,n,r),has:(e,n)=>!!US(e,n)||t.has(e,n)}));var $y=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k6(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function k6(t){let e=t.getComponent();return e?.type==="VERSION"}var Hy="@firebase/app",$S="0.9.27";var Is=new or("@firebase/app"),F6="@firebase/app-compat",O6="@firebase/analytics-compat",L6="@firebase/analytics",V6="@firebase/app-check-compat",B6="@firebase/app-check",U6="@firebase/auth",j6="@firebase/auth-compat",$6="@firebase/database",H6="@firebase/database-compat",q6="@firebase/functions",z6="@firebase/functions-compat",W6="@firebase/installations",G6="@firebase/installations-compat",K6="@firebase/messaging",Q6="@firebase/messaging-compat",Y6="@firebase/performance",X6="@firebase/performance-compat",J6="@firebase/remote-config",Z6="@firebase/remote-config-compat",ej="@firebase/storage",tj="@firebase/storage-compat",nj="@firebase/firestore",rj="@firebase/firestore-compat",ij="firebase",sj="10.8.0";var qy="[DEFAULT]",oj={[Hy]:"fire-core",[F6]:"fire-core-compat",[L6]:"fire-analytics",[O6]:"fire-analytics-compat",[B6]:"fire-app-check",[V6]:"fire-app-check-compat",[U6]:"fire-auth",[j6]:"fire-auth-compat",[$6]:"fire-rtdb",[H6]:"fire-rtdb-compat",[q6]:"fire-fn",[z6]:"fire-fn-compat",[W6]:"fire-iid",[G6]:"fire-iid-compat",[K6]:"fire-fcm",[Q6]:"fire-fcm-compat",[Y6]:"fire-perf",[X6]:"fire-perf-compat",[J6]:"fire-rc",[Z6]:"fire-rc-compat",[ej]:"fire-gcs",[tj]:"fire-gcs-compat",[nj]:"fire-fst",[rj]:"fire-fst-compat","fire-js":"fire-js",[ij]:"fire-js-all"};var du=new Map,zy=new Map;function aj(t,e){try{t.container.addComponent(e)}catch(n){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cr(t){let e=t.name;if(zy.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;zy.set(e,t);for(let n of du.values())aj(n,t);return!0}function Cs(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var cj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},xi=new Br("app","Firebase",cj);var Wy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}};var ur=sj;function Qy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:qy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw xi.create("bad-app-name",{appName:String(i)});if(n||(n=ky()),!n)throw xi.create("no-options");let s=du.get(i);if(s){if(_s(n,s.options)&&_s(r,s.config))return s;throw xi.create("duplicate-app",{appName:i})}let o=new lu(i);for(let c of zy.values())o.addComponent(c);let a=new Wy(n,r,o);return du.set(i,a),a}function Di(t=qy){let e=du.get(t);if(!e&&t===qy&&ky())return Qy();if(!e)throw xi.create("no-app",{appName:t});return e}function of(){return Array.from(du.values())}function qe(t,e,n){var r;let i=(r=oj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(a.join(" "));return}cr(new Xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var uj="firebase-heartbeat-database",lj=1,hu="firebase-heartbeat-store",jy=null;function WS(){return jy||(jy=jS(uj,lj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hu)}catch(n){console.warn(n)}}}}).catch(t=>{throw xi.create("idb-open",{originalErrorMessage:t.message})})),jy}function dj(t){return _(this,null,function*(){try{let n=(yield WS()).transaction(hu),r=yield n.objectStore(hu).get(GS(t));return yield n.done,r}catch(e){if(e instanceof on)Is.warn(e.message);else{let n=xi.create("idb-get",{originalErrorMessage:e?.message});Is.warn(n.message)}}})}function HS(t,e){return _(this,null,function*(){try{let r=(yield WS()).transaction(hu,"readwrite");yield r.objectStore(hu).put(e,GS(t)),yield r.done}catch(n){if(n instanceof on)Is.warn(n.message);else{let r=xi.create("idb-set",{originalErrorMessage:n?.message});Is.warn(r.message)}}})}function GS(t){return`${t.name}!${t.options.appId}`}var hj=1024,fj=30*24*60*60*1e3,Gy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ky(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qS();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=fj}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return _(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=qS(),{heartbeatsToSend:r,unsentEntries:i}=pj(this._heartbeatsCache.heartbeats),s=iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function qS(){return new Date().toISOString().substring(0,10)}function pj(t,e=hj){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zS(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ky=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return nf()?AS().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield dj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return HS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return HS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function zS(t){return iu(JSON.stringify({version:2,heartbeats:t})).length}function gj(t){cr(new Xt("platform-logger",e=>new $y(e),"PRIVATE")),cr(new Xt("heartbeat",e=>new Gy(e),"PRIVATE")),qe(Hy,$S,t),qe(Hy,$S,"esm2017"),qe("fire-js","")}gj("");var mj="firebase",vj="10.8.0";qe(mj,vj,"app");var Ur=new Sr("ANGULARFIRE2_VERSION");function la(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ds=(t,e)=>{let n=e?[e]:of(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},bi=class{constructor(){return Ds(yj)}},yj="app-check";function ua(){}var af=class{zone;delegate;constructor(e,n=vm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Yy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ua,{},ua,ua)),n.pipe(rt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ti=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new af(Zone.current)),this.insideAngular=n.run(()=>new af(Zone.current,mm)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(te(Se))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function _j(t){return cf().ngZone.runOutsideAngular(()=>t())}function xs(t){return cf().ngZone.run(()=>t())}function Ej(t){return wj(cf())(t)}function wj(t){return function(n){return n=n.lift(new Yy(t.ngZone)),n.pipe(ni(t.outsideAngular),ti(t.insideAngular))}}var Ij=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),xs(()=>t.apply(void 0,r))},Ut=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=xs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ua,{},ua,ua))),r[s]=Ij(r[s],n));let i=_j(()=>t.apply(this,r));if(!e)if(i instanceof me){let s=cf();return i.pipe(ni(s.outsideAngular),ti(s.insideAngular))}else return xs(()=>i);return i instanceof me?i.pipe(Ej):i instanceof Promise?xs(()=>new Promise((s,o)=>i.then(a=>xs(()=>s(a)),a=>xs(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:xs(()=>i)};var Vn=class{constructor(e){return e}},jr=class{constructor(){return of()}};function Cj(t){return t&&t.length===1?t[0]:new Vn(Di())}var Xy=new K("angularfire2._apps"),xj={provide:Vn,useFactory:Cj,deps:[[new Ze,Xy]]},Dj={provide:jr,deps:[[new Ze,Xy]]};function bj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Vn(r)}}var Tj=(()=>{class t{constructor(n){qe("angularfire",Ur.full,"core"),qe("angularfire",Ur.full,"app"),qe("angular",kT.full,n.toString())}static \u0275fac=function(r){return new(r||t)(te(Jn))};static \u0275mod=xt({type:t});static \u0275inj=Dt({providers:[xj,Dj]})}return t})();function KS(t,...e){return{ngModule:Tj,providers:[{provide:Xy,useFactory:bj(t),multi:!0,deps:[Se,mt,Ti,...e]}]}}var QS=Ut(Qy,!0);function h1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var f1=h1,p1=new Br("auth","Firebase",h1());var pf=new or("@firebase/auth");function Aj(t,...e){pf.logLevel<=pe.WARN&&pf.warn(`Auth (${ur}): ${t}`,...e)}function lf(t,...e){pf.logLevel<=pe.ERROR&&pf.error(`Auth (${ur}): ${t}`,...e)}function dr(t,...e){throw __(t,...e)}function bs(t,...e){return __(t,...e)}function Sj(t,e,n){let r=Object.assign(Object.assign({},f1()),{[e]:n});return new Br("auth","Firebase",r).create(e,{appName:t.name})}function __(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return p1.create(t,...e)}function re(t,e,...n){if(!t)throw __(e,...n)}function $r(t){let e="INTERNAL ASSERTION FAILED: "+t;throw lf(e),new Error(e)}function Si(t,e){t||$r(e)}function t_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Rj(){return YS()==="http:"||YS()==="https:"}function YS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Nj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rj()||DS()||"connection"in navigator)?navigator.onLine:!0}function Mj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ts=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=ou()||tf()}get(){return Nj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function E_(t,e){Si(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var gf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Pj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var kj=new Ts(3e4,6e4);function Ss(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ri(s,o,a,c){return _(this,arguments,function*(t,e,n,r,i={}){return g1(t,i,()=>_(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Es(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),gf.fetch()(m1(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function g1(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Pj),e);try{let i=new n_(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw uf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw uf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw uf(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Sj(t,l,u);dr(t,l)}}catch(i){if(i instanceof on)throw i;dr(t,"network-request-failed",{message:String(i)})}})}function Tf(s,o,a,c){return _(this,arguments,function*(t,e,n,r,i={}){let u=yield Ri(t,e,n,r,i);return"mfaPendingCredential"in u&&dr(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function m1(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?E_(t.config,i):`${t.config.apiScheme}://${i}`}function Fj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var n_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bs(this.auth,"network-request-failed")),kj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function uf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=bs(t,e,r);return i.customData._tokenResponse=n,i}function XS(t){return t!==void 0&&t.enterprise!==void 0}var r_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Fj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Oj(t,e){return _(this,null,function*(){return Ri(t,"GET","/v2/recaptchaConfig",Ss(t,e))})}function Lj(t,e){return _(this,null,function*(){return Ri(t,"POST","/v1/accounts:delete",e)})}function Vj(t,e){return _(this,null,function*(){return Ri(t,"POST","/v1/accounts:lookup",e)})}function fu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function w_(t,e=!1){return _(this,null,function*(){let n=et(t),r=yield n.getIdToken(e),i=I_(r);re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:fu(Jy(i.auth_time)),issuedAtTime:fu(Jy(i.iat)),expirationTime:fu(Jy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Jy(t){return Number(t)*1e3}function I_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{let i=su(n);return i?JSON.parse(i):(lf("Failed to decode base64 JWT payload"),null)}catch(i){return lf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Bj(t){let e=I_(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function pu(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof on&&Uj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Uj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var i_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var mf=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function vf(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield pu(t,Vj(n,{idToken:r}));re(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$j(s.providerUserInfo):[],a=jj(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mf(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function C_(t){return _(this,null,function*(){let e=et(t);yield vf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function jj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $j(t){return t.map(e=>{var{providerId:n}=e,r=ym(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Hj(t,e){return _(this,null,function*(){let n=yield g1(t,{},()=>_(this,null,function*(){let r=Es({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=m1(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function qj(t,e){return _(this,null,function*(){return Ri(t,"POST","/v2/accounts:revokeToken",Ss(t,e))})}var yf=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return _(this,null,function*(){return re(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Hj(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return $r("not implemented")}};function Ai(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var gu=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mf(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield pu(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return w_(this,e)}reload(){return C_(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield vf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){let e=yield this.getIdToken();return yield pu(this,Lj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,g=(u=n.createdAt)!==null&&u!==void 0?u:void 0,m=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:w,emailVerified:E,isAnonymous:C,providerData:I,stsTokenManager:S}=n;re(w&&S,e,"internal-error");let b=yf.fromJSON(this.name,S);re(typeof w=="string",e,"internal-error"),Ai(d,e.name),Ai(h,e.name),re(typeof E=="boolean",e,"internal-error"),re(typeof C=="boolean",e,"internal-error"),Ai(f,e.name),Ai(p,e.name),Ai(v,e.name),Ai(y,e.name),Ai(g,e.name),Ai(m,e.name);let k=new t({uid:w,auth:e,email:h,emailVerified:E,displayName:d,isAnonymous:C,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:b,createdAt:g,lastLoginAt:m});return I&&Array.isArray(I)&&(k.providerData=I.map(U=>Object.assign({},U))),y&&(k._redirectEventId=y),k}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new yf;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield vf(s),s})}};var JS=new Map;function Hr(t){Si(t instanceof Function,"Expected a class definition");let e=JS.get(t);return e?(Si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JS.set(t,e),e)}var zj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),s_=zj;function df(t,e,n){return`firebase:${t}:${e}:${n}`}var _f=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=df(this.userKey,i.apiKey,s),this.fullPersistenceKey=df("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?gu._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Hr(s_),e,r);let i=(yield Promise.all(n.map(u=>_(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Hr(s_),o=df(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=gu._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>_(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function ZS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w1(e))return"Blackberry";if(I1(e))return"Webos";if(x_(e))return"Safari";if((e.includes("chrome/")||y1(e))&&!e.includes("edge/"))return"Chrome";if(E1(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function v1(t=We()){return/firefox\//i.test(t)}function x_(t=We()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y1(t=We()){return/crios\//i.test(t)}function _1(t=We()){return/iemobile/i.test(t)}function E1(t=We()){return/android/i.test(t)}function w1(t=We()){return/blackberry/i.test(t)}function I1(t=We()){return/webos/i.test(t)}function Af(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wj(t=We()){var e;return Af(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Gj(){return bS()&&document.documentMode===10}function C1(t=We()){return Af(t)||E1(t)||I1(t)||w1(t)||/windows phone/i.test(t)||_1(t)}function Kj(){try{return!!(window&&window!==window.top)}catch{return!1}}function x1(t,e=[]){let n;switch(t){case"Browser":n=ZS(We());break;case"Worker":n=`${ZS(We())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ur}/${r}`}var o_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Qj(n){return _(this,arguments,function*(t,e={}){return Ri(t,"GET","/v2/passwordPolicy",Ss(t,e))})}var Yj=6,a_=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Yj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var c_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ef(this),this.idTokenSubscription=new Ef(this),this.beforeStateQueue=new o_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hr(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield _f.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield vf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Mj()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){let n=e?et(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Hr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Qj(this),n=new a_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Br("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield qj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Hr(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=yield _f.create(this,[Hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Aj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function da(t){return et(t)}var Ef=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=MS(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Sf={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xj(t){Sf=t}function D1(t){return Sf.loadJS(t)}function Jj(){return Sf.recaptchaEnterpriseScript}function Zj(){return Sf.gapiScript}function b1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var e5="recaptcha-enterprise",t5="NO_RECAPTCHA",u_=class{constructor(e){this.type=e5,this.auth=da(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(this,null,function*(){Oj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new r_(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;XS(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(t5)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&XS(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Jj();c.length!==0&&(c+=a),D1(c).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})})}};function e1(t,e,n,r=!1){return _(this,null,function*(){let i=new u_(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function t1(t,e,n,r){return _(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield e1(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield e1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function D_(t,e){let n=Cs(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(_s(s,e??{}))return i;dr(i,"already-initialized")}return n.initialize({options:e})}function n5(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Hr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function b_(t,e,n){let r=da(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=T1(e),{host:o,port:a}=r5(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||i5()}function T1(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function r5(t){let e=T1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:n1(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:n1(o)}}}function n1(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function i5(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var mu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}};function s5(t,e){return _(this,null,function*(){return Ri(t,"POST","/v1/accounts:signUp",e)})}function o5(t,e){return _(this,null,function*(){return Tf(t,"POST","/v1/accounts:signInWithPassword",Ss(t,e))})}function a5(t,e){return _(this,null,function*(){return Tf(t,"POST","/v1/accounts:signInWithEmailLink",Ss(t,e))})}function c5(t,e){return _(this,null,function*(){return Tf(t,"POST","/v1/accounts:signInWithEmailLink",Ss(t,e))})}var vu=class t extends mu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t1(e,n,"signInWithPassword",o5);case"emailLink":return a5(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t1(e,r,"signUpPassword",s5);case"emailLink":return c5(e,{idToken:n,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Zy(t,e){return _(this,null,function*(){return Tf(t,"POST","/v1/accounts:signInWithIdp",Ss(t,e))})}function u5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l5(t){let e=aa(ca(t)).link,n=e?aa(ca(e)).deep_link_id:null,r=aa(ca(t)).deep_link_id;return(r?aa(ca(r)).link:null)||r||n||e||t}var wf=class t{constructor(e){var n,r,i,s,o,a;let c=aa(ca(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=u5((i=c.mode)!==null&&i!==void 0?i:null);re(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=l5(e);try{return new t(n)}catch{return null}}};var A1=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return vu._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=wf.parseLink(r);return re(i,"argument-error"),vu._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),If=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var l_=class extends If{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var yu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield gu._fromIdTokenResponse(e,r,i),o=r1(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=r1(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function r1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var d_=class t extends on{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function S1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?d_._fromErrorAndOperation(t,s,e,r):s})}function d5(t,e,n=!1){return _(this,null,function*(){let r=yield pu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return yu._forOperation(t,"link",r)})}function h5(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t,i="reauthenticate";try{let s=yield pu(t,S1(r,i,e,t),n);re(s.idToken,r,"internal-error");let o=I_(s.idToken);re(o,r,"internal-error");let{sub:a}=o;return re(t.uid===a,r,"user-mismatch"),yu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&dr(r,"user-mismatch"),s}})}function R1(t,e,n=!1){return _(this,null,function*(){let r="signIn",i=yield S1(t,r,e),s=yield yu._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function T_(t,e){return _(this,null,function*(){return R1(da(t),e)})}function f5(t){return _(this,null,function*(){let e=da(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function A_(t,e,n){return T_(et(t),A1.credential(e,n)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&f5(t),r}))}function S_(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function R_(t,e,n){return et(t).beforeAuthStateChanged(e,n)}var Cf="__sak";var xf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function p5(){let t=We();return x_(t)||Af(t)}var g5=1e3,m5=10,v5=(()=>{class t extends xf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=p5()&&Kj(),this.fallbackToPolling=C1(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Gj()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,m5):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},g5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Zr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Zr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Zr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),N1=v5;var y5=(()=>{class t extends xf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),N_=y5;function _5(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var E5=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(l=>_(this,null,function*(){return l(r.origin,o)})),u=yield _5(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function M1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var h_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=M1("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function lr(){return window}function w5(t){lr().location.href=t}function P1(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}function I5(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function C5(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function x5(){return P1()?self:null}var k1="firebaseLocalStorageDb",D5=1,Df="firebaseLocalStorage",F1="fbase_key",As=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Rf(t,e){return t.transaction([Df],e?"readwrite":"readonly").objectStore(Df)}function b5(){let t=indexedDB.deleteDatabase(k1);return new As(t).toPromise()}function f_(){let t=indexedDB.open(k1,D5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Df,{keyPath:F1})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Df)?e(r):(r.close(),yield b5(),e(yield f_()))}))})}function i1(t,e,n){return _(this,null,function*(){let r=Rf(t,!0).put({[F1]:e,value:n});return new As(r).toPromise()})}function T5(t,e){return _(this,null,function*(){let n=Rf(t,!1).get(e),r=yield new As(n).toPromise();return r===void 0?null:r.value})}function s1(t,e){let n=Rf(t,!0).delete(e);return new As(n).toPromise()}var A5=800,S5=3,R5=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield f_(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>S5)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return P1()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=E5._getInstance(x5()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield I5(),!this.activeServiceWorker)return;this.sender=new h_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||C5()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield f_();return yield i1(n,Cf,"1"),yield s1(n,Cf),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>i1(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>T5(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>s1(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=Rf(s,!1).getAll();return new As(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),A5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),O1=R5;var Fte=b1("rcb"),Ote=new Ts(3e4,6e4);function N5(t,e){return e?Hr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var _u=class extends mu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function M5(t){return R1(t.auth,new _u(t),t.bypassAuthState)}function P5(t){let{auth:e,user:n}=t;return re(n,e,"internal-error"),h5(n,new _u(t),t.bypassAuthState)}function k5(t){return _(this,null,function*(){let{auth:e,user:n}=t;return re(n,e,"internal-error"),d5(n,new _u(t),t.bypassAuthState)})}var p_=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M5;case"linkViaPopup":case"linkViaRedirect":return k5;case"reauthViaPopup":case"reauthViaRedirect":return P5;default:dr(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Lte=new Ts(2e3,1e4);var F5="pendingRedirect",hf=new Map,g_=class t extends p_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=hf.get(this.auth._key());if(!e){try{let r=(yield O5(this.resolver,this.auth))?yield Zr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hf.set(this.auth._key(),e)}return this.bypassAuthState||hf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Zr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Zr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function O5(t,e){return _(this,null,function*(){let n=B5(e),r=V5(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function L5(t,e){hf.set(t._key(),e)}function V5(t){return Hr(t._redirectPersistence)}function B5(t){return df(F5,t.config.apiKey,t.name)}function U5(t,e,n=!1){return _(this,null,function*(){let r=da(t),i=N5(r,e),o=yield new g_(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var j5=10*60*1e3,m_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!L1(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j5&&this.cachedEventUids.clear(),this.cachedEventUids.has(o1(e))}saveEventToCache(e){this.cachedEventUids.add(o1(e)),this.lastProcessedEventTime=Date.now()}};function o1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function L1({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function $5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L1(t);default:return!1}}function H5(n){return _(this,arguments,function*(t,e={}){return Ri(t,"GET","/v1/projects",e)})}var q5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z5=/^https?/;function W5(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield H5(t);for(let n of e)try{if(G5(n))return}catch{}dr(t,"unauthorized-domain")})}function G5(t){let e=t_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!z5.test(n))return!1;if(q5.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var K5=new Ts(3e4,6e4);function a1(){let t=lr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q5(t){return new Promise((e,n)=>{var r,i,s;function o(){a1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{a1(),n(bs(t,"network-request-failed"))},timeout:K5.get()})}if(!((i=(r=lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lr().gapi)===null||s===void 0)&&s.load)o();else{let a=b1("iframefcb");return lr()[a]=()=>{gapi.load?o():n(bs(t,"network-request-failed"))},D1(`${Zj()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw ff=null,e})}var ff=null;function Y5(t){return ff=ff||Q5(t),ff}var X5=new Ts(5e3,15e3),J5="__/auth/iframe",Z5="emulator/auth/iframe",e9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n9(t){let e=t.config;re(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?E_(e,Z5):`https://${t.config.authDomain}/${J5}`,r={apiKey:e.apiKey,appName:t.name,v:ur},i=t9.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Es(r).slice(1)}`}function r9(t){return _(this,null,function*(){let e=yield Y5(t),n=lr().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:n9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e9,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=bs(t,"network-request-failed"),a=lr().setTimeout(()=>{s(o)},X5.get());function c(){lr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var i9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s9=500,o9=600,a9="_blank",c9="http://localhost",bf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function u9(t,e,n,r=s9,i=o9){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},i9),{width:r.toString(),height:i.toString(),top:s,left:o}),u=We().toLowerCase();n&&(a=y1(u)?a9:n),v1(u)&&(e=e||c9,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(Wj(u)&&a!=="_self")return l9(e||"",a),new bf(null);let d=window.open(e||"",a,l);re(d,t,"popup-blocked");try{d.focus()}catch{}return new bf(d)}function l9(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var d9="__/auth/handler",h9="emulator/auth/handler",f9=encodeURIComponent("fac");function c1(t,e,n,r,i,s){return _(this,null,function*(){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ur,eventId:i};if(e instanceof If){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",au(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof l_){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${f9}=${encodeURIComponent(c)}`:"";return`${p9(t)}?${Es(a).slice(1)}${u}`})}function p9({config:t}){return t.emulator?E_(t,h9):`https://${t.authDomain}/${d9}`}var e_="webStorageSupport",v_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N_,this._completeRedirectFn=U5,this._overrideRedirectResult=L5}_openPopup(e,n,r,i){return _(this,null,function*(){var s;Si((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield c1(e,n,r,t_(),i);return u9(e,o,M1())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield c1(e,n,r,t_(),i);return w5(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Si(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield r9(e),r=new m_(e);return n.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(e_,{type:e_},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[e_];o!==void 0&&n(!!o),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=W5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return C1()||x_()||Af()}},V1=v_;var u1="@firebase/auth",l1="1.6.0";var y_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function g9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m9(t){cr(new Xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x1(t)},u=new c_(r,i,s,c);return n5(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cr(new Xt("auth-internal",e=>{let n=da(e.getProvider("auth").getImmediate());return(r=>new y_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qe(u1,l1,g9(t)),qe(u1,l1,"esm2017")}var v9=5*60,y9=Fy("authIdTokenMaxAge")||v9,d1=null,_9=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>y9)return;let i=n?.token;d1!==i&&(d1=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function M_(t=Di()){let e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();let n=D_(t,{popupRedirectResolver:V1,persistence:[O1,N1,N_]}),r=Fy("authTokenSyncURL");if(r){let s=_9(r);R_(n,s,()=>s(n.currentUser)),S_(n,o=>s(o))}let i=Py("auth");return i&&b_(n,`http://${i}`),n}function E9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Xj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=bs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",E9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m9("Browser");var B1="auth",Rs=class{constructor(e){return e}},Ns=class{constructor(){return Ds(B1)}};var P_=new K("angularfire2.auth-instances");function h$(t,e){let n=la(B1,t,e);return n&&new Rs(n)}function f$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Rs(r)}}var p$={provide:Ns,deps:[[new Ze,P_]]},g$={provide:Rs,useFactory:h$,deps:[[new Ze,P_],Vn]},m$=(()=>{class t{constructor(){qe("angularfire",Ur.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=xt({type:t});static \u0275inj=Dt({providers:[g$,p$]})}return t})();function U1(t,...e){return{ngModule:m$,providers:[{provide:P_,useFactory:f$(t),multi:!0,deps:[Se,mt,Ti,jr,[new Ze,bi],...e]}]}}var j1=Ut(M_,!0);var $1=Ut(A_,!0);var v$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Un={},V,tE=tE||{},ie=v$||self;function qf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Pu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function y$(t){return Object.prototype.hasOwnProperty.call(t,k_)&&t[k_]||(t[k_]=++_$)}var k_="closure_uid_"+(1e9*Math.random()>>>0),_$=0;function E$(t,e,n){return t.call.apply(t.bind,arguments)}function w$(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Tt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Tt=E$:Tt=w$,Tt.apply(null,arguments)}function Nf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function dt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ni(){this.s=this.s,this.o=this.o}var I$=0;Ni.prototype.s=!1;Ni.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),I$!=0)&&y$(this)};Ni.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var tR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function nE(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function H1(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(qf(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var C$=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};ie.addEventListener("test",n,e),ie.removeEventListener("test",n,e)}catch{}return t}();function Du(t){return/^[\s\xa0]*$/.test(t)}function zf(){var t=ie.navigator;return t&&(t=t.userAgent)?t:""}function hr(t){return zf().indexOf(t)!=-1}function rE(t){return rE[" "](t),t}rE[" "]=function(){};function x$(t,e){var n=hH;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var D$=hr("Opera"),ga=hr("Trident")||hr("MSIE"),nR=hr("Edge"),B_=nR||ga,rR=hr("Gecko")&&!(zf().toLowerCase().indexOf("webkit")!=-1&&!hr("Edge"))&&!(hr("Trident")||hr("MSIE"))&&!hr("Edge"),b$=zf().toLowerCase().indexOf("webkit")!=-1&&!hr("Edge");function iR(){var t=ie.document;return t?t.documentMode:void 0}var U_;e:{if(Mf="",Pf=function(){var t=zf();if(rR)return/rv:([^\);]+)(\)|;)/.exec(t);if(nR)return/Edge\/([\d\.]+)/.exec(t);if(ga)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(b$)return/WebKit\/(\S+)/.exec(t);if(D$)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Pf&&(Mf=Pf?Pf[1]:""),ga&&(kf=iR(),kf!=null&&kf>parseFloat(Mf))){U_=String(kf);break e}U_=Mf}var Mf,Pf,kf,j_;ie.document&&ga?(F_=iR(),j_=F_||parseInt(U_,10)||void 0):j_=void 0;var F_,T$=j_;function bu(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(rR){e:{try{rE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:A$[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&bu.$.h.call(this)}}dt(bu,At);var A$={2:"touch",3:"pen",4:"mouse"};bu.prototype.h=function(){bu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ku="closure_listenable_"+(1e6*Math.random()|0),S$=0;function R$(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++S$,this.fa=this.ia=!1}function Wf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function iE(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function N$(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function sR(t){let e={};for(let n in t)e[n]=t[n];return e}var q1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oR(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<q1.length;s++)n=q1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Gf(t){this.src=t,this.g={},this.h=0}Gf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=H_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new R$(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function $_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=tR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Wf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function H_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var sE="closure_lm_"+(1e6*Math.random()|0),O_={};function aR(t,e,n,r,i){if(r&&r.once)return uR(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)aR(t,e[s],n,r,i);return null}return n=cE(n),t&&t[ku]?t.O(e,n,Pu(r)?!!r.capture:!!r,i):cR(t,e,n,!1,r,i)}function cR(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Pu(i)?!!i.capture:!!i,a=aE(t);if(a||(t[sE]=a=new Gf(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=M$(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)C$||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dR(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function M$(){function t(n){return e.call(t.src,t.listener,n)}let e=P$;return t}function uR(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)uR(t,e[s],n,r,i);return null}return n=cE(n),t&&t[ku]?t.P(e,n,Pu(r)?!!r.capture:!!r,i):cR(t,e,n,!0,r,i)}function lR(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)lR(t,e[s],n,r,i);else r=Pu(r)?!!r.capture:!!r,n=cE(n),t&&t[ku]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=H_(s,n,r,i),-1<n&&(Wf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=aE(t))&&(e=t.g[e.toString()],t=-1,e&&(t=H_(e,n,r,i)),(n=-1<t?e[t]:null)&&oE(n))}function oE(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ku])$_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dR(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=aE(e))?($_(n,t),n.h==0&&(n.src=null,e[sE]=null)):Wf(t)}}}function dR(t){return t in O_?O_[t]:O_[t]="on"+t}function P$(t,e){if(t.fa)t=!0;else{e=new bu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&oE(t),t=n.call(r,e)}return t}function aE(t){return t=t[sE],t instanceof Gf?t:null}var L_="__closure_events_fn_"+(1e9*Math.random()>>>0);function cE(t){return typeof t=="function"?t:(t[L_]||(t[L_]=function(e){return t.handleEvent(e)}),t[L_])}function lt(){Ni.call(this),this.i=new Gf(this),this.S=this,this.J=null}dt(lt,Ni);lt.prototype[ku]=!0;lt.prototype.removeEventListener=function(t,e,n,r){lR(this,t,e,n,r)};function _t(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var i=e;e=new At(r,t),oR(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Ff(o,r,!0,e)&&i}if(o=e.g=t,i=Ff(o,r,!0,e)&&i,i=Ff(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Ff(o,r,!1,e)&&i}lt.prototype.N=function(){if(lt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wf(n[r]);delete t.g[e],t.h--}}this.J=null};lt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};lt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ff(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&$_(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var uE=ie.JSON.stringify,q_=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function k$(){var t=lE;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var z_=class{constructor(){this.h=this.g=null}add(e,n){let r=hR.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},hR=new q_(()=>new W_,t=>t.reset()),W_=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function F$(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function O$(t){ie.setTimeout(()=>{throw t},0)}var Tu,Au=!1,lE=new z_,fR=()=>{let t=ie.Promise.resolve(void 0);Tu=()=>{t.then(L$)}},L$=()=>{for(var t;t=k$();){try{t.h.call(t.g)}catch(n){O$(n)}var e=hR;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Au=!1};function Kf(t,e){lt.call(this),this.h=t||1,this.g=e||ie,this.j=Tt(this.qb,this),this.l=Date.now()}dt(Kf,lt);V=Kf.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_t(this,"tick"),this.ga&&(dE(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function dE(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}V.N=function(){Kf.$.N.call(this),dE(this),delete this.g};function hE(t,e,n){if(typeof t=="function")n&&(t=Tt(t,n));else if(t&&typeof t.handleEvent=="function")t=Tt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ie.setTimeout(t,e||0)}function pR(t){t.g=hE(()=>{t.g=null,t.i&&(t.i=!1,pR(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var G_=class extends Ni{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pR(this)}N(){super.N(),this.g&&(ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Su(t){Ni.call(this),this.h=t,this.g={}}dt(Su,Ni);var z1=[];function gR(t,e,n,r){Array.isArray(n)||(n&&(z1[0]=n.toString()),n=z1);for(var i=0;i<n.length;i++){var s=aR(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function mR(t){iE(t.g,function(e,n){this.g.hasOwnProperty(n)&&oE(e)},t),t.g={}}Su.prototype.N=function(){Su.$.N.call(this),mR(this)};Su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Qf(){this.g=!0}Qf.prototype.Ea=function(){this.g=!1};function V$(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function B$(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function fa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+j$(t,n)+(r?" "+r:"")})}function U$(t,e){t.info(function(){return"TIMEOUT: "+e})}Qf.prototype.info=function(){};function j$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return uE(n)}catch{return e}}var Fs={},W1=null;function Yf(){return W1=W1||new lt}Fs.Ta="serverreachability";function vR(t){At.call(this,Fs.Ta,t)}dt(vR,At);function Ru(t){let e=Yf();_t(e,new vR(e))}Fs.STAT_EVENT="statevent";function yR(t,e){At.call(this,Fs.STAT_EVENT,t),this.stat=e}dt(yR,At);function jt(t){let e=Yf();_t(e,new yR(e,t))}Fs.Ua="timingevent";function _R(t,e){At.call(this,Fs.Ua,t),this.size=e}dt(_R,At);function Fu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ie.setTimeout(function(){t()},e)}var Xf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ER={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fE(){}fE.prototype.h=null;function G1(t){return t.h||(t.h=t.i())}function wR(){}var Ou={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pE(){At.call(this,"d")}dt(pE,At);function gE(){At.call(this,"c")}dt(gE,At);var K_;function Jf(){}dt(Jf,fE);Jf.prototype.g=function(){return new XMLHttpRequest};Jf.prototype.i=function(){return{}};K_=new Jf;function Lu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Su(this),this.P=$$,t=B_?125:void 0,this.V=new Kf(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new IR}function IR(){this.i=null,this.g="",this.h=!1}var $$=45e3,CR={},Q_={};V=Lu.prototype;V.setTimeout=function(t){this.P=t};function Y_(t,e,n){t.L=1,t.A=ep(zr(e)),t.u=n,t.S=!0,xR(t,null)}function xR(t,e){t.G=Date.now(),Vu(t),t.B=zr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),MR(n.i,"t",r),t.o=0,n=t.l.J,t.h=new IR,t.g=ZR(t.l,n?e:null,!t.u),0<t.O&&(t.M=new G_(Tt(t.Pa,t,t.g),t.O)),gR(t.U,t.g,"readystatechange",t.nb),e=t.I?sR(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ru(),V$(t.j,t.v,t.B,t.m,t.W,t.u)}V.nb=function(t){t=t.target;let e=this.M;e&&fr(t)==3?e.l():this.Pa(t)};V.Pa=function(t){try{if(t==this.g)e:{let l=fr(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||B_||this.g&&(this.h.h||this.g.ja()||X1(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Ru(3):Ru(2)),Zf(this);var n=this.g.da();this.ca=n;t:if(DR(this)){var r=X1(this.g);t="";var i=r.length,s=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ms(this),xu(this);var o="";break t}this.h.i=new ie.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,B$(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Du(a)){var u=a;break t}}u=null}if(n=u)fa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,X_(this,n);else{this.i=!1,this.s=3,jt(12),Ms(this),xu(this);break e}}this.S?(bR(this,l,o),B_&&this.i&&l==3&&(gR(this.U,this.V,"tick",this.mb),this.V.start())):(fa(this.j,this.m,o,null),X_(this,o)),l==4&&Ms(this),this.i&&!this.J&&(l==4?QR(this.l,this):(this.i=!1,Vu(this)))}else uH(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),Ms(this),xu(this)}}}catch{}finally{}};function DR(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function bR(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=H$(t,n),i==Q_){e==4&&(t.s=4,jt(14),r=!1),fa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==CR){t.s=4,jt(15),fa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else fa(t.j,t.m,i,null),X_(t,i);DR(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,jt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),wE(e),e.M=!0,jt(11))):(fa(t.j,t.m,n,"[Invalid Chunked Response]"),Ms(t),xu(t))}V.mb=function(){if(this.g){var t=fr(this.g),e=this.g.ja();this.o<e.length&&(Zf(this),bR(this,t,e),this.i&&t!=4&&Vu(this))}};function H$(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Q_:(n=Number(e.substring(n,r)),isNaN(n)?CR:(r+=1,r+n>e.length?Q_:(e=e.slice(r,r+n),t.o=r+n,e)))}V.cancel=function(){this.J=!0,Ms(this)};function Vu(t){t.Y=Date.now()+t.P,TR(t,t.P)}function TR(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Fu(Tt(t.lb,t),e)}function Zf(t){t.C&&(ie.clearTimeout(t.C),t.C=null)}V.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(U$(this.j,this.B),this.L!=2&&(Ru(),jt(17)),Ms(this),this.s=2,xu(this)):TR(this,this.Y-t)};function xu(t){t.l.H==0||t.J||QR(t.l,t)}function Ms(t){Zf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,dE(t.V),mR(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function X_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||J_(n.i,t))){if(!t.K&&J_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Uf(n),rp(n);else break e;EE(n),jt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Fu(Tt(n.ib,n),6e3));if(1>=FR(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ps(n,11)}else if((t.K||n.g==t)&&Uf(n),!Du(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(mE(s,s.h),s.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,Ue(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=JR(r,r.J?r.pa:null,r.Y),o.K){OR(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Zf(a),Vu(a)),r.g=o}else GR(r);0<n.j.length&&ip(n)}else u[0]!="stop"&&u[0]!="close"||Ps(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ps(n,7):_E(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Ru(4)}catch{}}function q$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(qf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function z$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(qf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function AR(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(qf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=z$(t),r=q$(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var SR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function W$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ks(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ks){this.h=t.h,Vf(this,t.j),this.s=t.s,this.g=t.g,Bf(this,t.m),this.l=t.l;var e=t.i,n=new Nu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),K1(this,n),this.o=t.o}else t&&(e=String(t).match(SR))?(this.h=!1,Vf(this,e[1]||"",!0),this.s=Iu(e[2]||""),this.g=Iu(e[3]||"",!0),Bf(this,e[4]),this.l=Iu(e[5]||"",!0),K1(this,e[6]||"",!0),this.o=Iu(e[7]||"")):(this.h=!1,this.i=new Nu(null,this.h))}ks.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Cu(e,Q1,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Cu(e,Q1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Cu(n,n.charAt(0)=="/"?Q$:K$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Cu(n,X$)),t.join("")};function zr(t){return new ks(t)}function Vf(t,e,n){t.j=n?Iu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Bf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function K1(t,e,n){e instanceof Nu?(t.i=e,J$(t.i,t.h)):(n||(e=Cu(e,Y$)),t.i=new Nu(e,t.h))}function Ue(t,e,n){t.i.set(e,n)}function ep(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Iu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,G$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function G$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Q1=/[#\/\?@]/g,K$=/[#\?:]/g,Q$=/[#\?]/g,Y$=/[#\?@]/g,X$=/#/g;function Nu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Mi(t){t.g||(t.g=new Map,t.h=0,t.i&&W$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}V=Nu.prototype;V.add=function(t,e){Mi(this),this.i=null,t=ma(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function RR(t,e){Mi(t),e=ma(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function NR(t,e){return Mi(t),e=ma(t,e),t.g.has(e)}V.forEach=function(t,e){Mi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};V.ta=function(){Mi(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};V.Z=function(t){Mi(this);let e=[];if(typeof t=="string")NR(this,t)&&(e=e.concat(this.g.get(ma(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};V.set=function(t,e){return Mi(this),this.i=null,t=ma(this,t),NR(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function MR(t,e,n){RR(t,e),0<n.length&&(t.i=null,t.g.set(ma(t,e),nE(n)),t.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ma(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function J$(t,e){e&&!t.j&&(Mi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(RR(this,r),MR(this,i,n))},t)),t.j=e}var Z$=class{constructor(t,e){this.g=t,this.map=e}};function PR(t){this.l=t||eH,ie.PerformanceNavigationTiming?(t=ie.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ie.g&&ie.g.Ka&&ie.g.Ka()&&ie.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eH=10;function kR(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function FR(t){return t.h?1:t.g?t.g.size:0}function J_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function mE(t,e){t.g?t.g.add(e):t.h=e}function OR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}PR.prototype.cancel=function(){if(this.i=LR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function LR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return nE(t.i)}var tH=class{stringify(t){return ie.JSON.stringify(t,void 0)}parse(t){return ie.JSON.parse(t,void 0)}};function nH(){this.g=new tH}function rH(t,e,n){let r=n||"";try{AR(t,function(i,s){let o=i;Pu(i)&&(o=uE(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function iH(t,e){let n=new Qf;if(ie.Image){let r=new Image;r.onload=Nf(Of,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Nf(Of,n,r,"TestLoadImage: error",!1,e),r.onabort=Nf(Of,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Nf(Of,n,r,"TestLoadImage: timeout",!1,e),ie.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Of(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Bu(t){this.l=t.ec||null,this.j=t.ob||!1}dt(Bu,fE);Bu.prototype.g=function(){return new tp(this.l,this.j)};Bu.prototype.i=function(t){return function(){return t}}({});function tp(t,e){lt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=vE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dt(tp,lt);var vE=0;V=tp.prototype;V.open=function(t,e){if(this.readyState!=vE)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Mu(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ie).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uu(this)),this.readyState=vE};V.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Mu(this)),this.g&&(this.readyState=3,Mu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ie.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function VR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}V.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Uu(this):Mu(this),this.readyState==3&&VR(this)}};V.Za=function(t){this.g&&(this.response=this.responseText=t,Uu(this))};V.Ya=function(t){this.g&&(this.response=t,Uu(this))};V.ka=function(){this.g&&Uu(this)};function Uu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Mu(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Mu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(tp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var sH=ie.JSON.parse;function Ge(t){lt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=BR,this.L=this.M=!1}dt(Ge,lt);var BR="",oH=/^https?$/i,aH=["POST","PUT"];V=Ge.prototype;V.Oa=function(t){this.M=t};V.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():K_.g(),this.C=this.u?G1(this.u):G1(K_),this.g.onreadystatechange=Tt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Y1(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ie.FormData&&t instanceof ie.FormData,!(0<=tR(aH,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{$R(this),0<this.B&&((this.L=cH(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tt(this.ua,this)):this.A=hE(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Y1(this,s)}};function cH(t){return ga&&typeof t.timeout=="number"&&t.ontimeout!==void 0}V.ua=function(){typeof tE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_t(this,"timeout"),this.abort(8))};function Y1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,UR(t),np(t)}function UR(t){t.F||(t.F=!0,_t(t,"complete"),_t(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,_t(this,"complete"),_t(this,"abort"),np(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),np(this,!0)),Ge.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?jR(this):this.kb())};V.kb=function(){jR(this)};function jR(t){if(t.h&&typeof tE<"u"&&(!t.C[1]||fr(t)!=4||t.da()!=2)){if(t.v&&fr(t)==4)hE(t.La,0,t);else if(_t(t,"readystatechange"),fr(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(SR)[1]||null;!i&&ie.self&&ie.self.location&&(i=ie.self.location.protocol.slice(0,-1)),r=!oH.test(i?i.toLowerCase():"")}n=r}if(n)_t(t,"complete"),_t(t,"success");else{t.m=6;try{var s=2<fr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",UR(t)}}finally{np(t)}}}}function np(t,e){if(t.g){$R(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||_t(t,"ready");try{n.onreadystatechange=r}catch{}}}function $R(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ie.clearTimeout(t.A),t.A=null)}V.isActive=function(){return!!this.g};function fr(t){return t.g?t.g.readyState:0}V.da=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),sH(e)}};function X1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case BR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function uH(t){let e={};t=(t.g&&2<=fr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Du(t[r]))continue;var n=F$(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}N$(e,function(r){return r.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function HR(t){let e="";return iE(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function yE(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=HR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ue(t,e,n))}function Eu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qR(t){this.Ga=0,this.j=[],this.l=new Qf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Eu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Eu("baseRetryDelayMs",5e3,t),this.hb=Eu("retryDelaySeedMs",1e4,t),this.eb=Eu("forwardChannelMaxRetries",2,t),this.xa=Eu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new PR(t&&t.concurrentRequestLimit),this.Ja=new nH,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=qR.prototype;V.ra=8;V.H=1;function _E(t){if(zR(t),t.H==3){var e=t.W++,n=zr(t.I);if(Ue(n,"SID",t.K),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),ju(t,n),e=new Lu(t,t.l,e),e.L=2,e.A=ep(zr(n)),n=!1,ie.navigator&&ie.navigator.sendBeacon)try{n=ie.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ie.Image&&(new Image().src=e.A,n=!0),n||(e.g=ZR(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Vu(e)}XR(t)}function rp(t){t.g&&(wE(t),t.g.cancel(),t.g=null)}function zR(t){rp(t),t.u&&(ie.clearTimeout(t.u),t.u=null),Uf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ie.clearTimeout(t.m),t.m=null)}function ip(t){if(!kR(t.i)&&!t.m){t.m=!0;var e=t.Na;Tu||fR(),Au||(Tu(),Au=!0),lE.add(e,t),t.C=0}}function lH(t,e){return FR(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Fu(Tt(t.Na,t,e),YR(t,t.C)),t.C++,!0)}V.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Lu(this,this.l,t),s=this.s;if(this.U&&(s?(s=sR(s),oR(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=WR(this,i,e),n=zr(this.I),Ue(n,"RID",t),Ue(n,"CVER",22),this.F&&Ue(n,"X-HTTP-Session-Id",this.F),ju(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(HR(s)))+"&"+e:this.o&&yE(n,this.o,s)),mE(this.i,i),this.bb&&Ue(n,"TYPE","init"),this.P?(Ue(n,"$req",e),Ue(n,"SID","null"),i.aa=!0,Y_(i,n,null)):Y_(i,n,e),this.H=2}}else this.H==3&&(t?J1(this,t):this.j.length==0||kR(this.i)||J1(this))};function J1(t,e){var n;e?n=e.m:n=t.W++;let r=zr(t.I);Ue(r,"SID",t.K),Ue(r,"RID",n),Ue(r,"AID",t.V),ju(t,r),t.o&&t.s&&yE(r,t.o,t.s),n=new Lu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=WR(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),mE(t.i,n),Y_(n,r,e)}function ju(t,e){t.na&&iE(t.na,function(n,r){Ue(e,r,n)}),t.h&&AR({},function(n,r){Ue(e,r,n)})}function WR(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Tt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{rH(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function GR(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Tu||fR(),Au||(Tu(),Au=!0),lE.add(e,t),t.A=0}}function EE(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Fu(Tt(t.Ma,t),YR(t,t.A)),t.A++,!0)}V.Ma=function(){if(this.u=null,KR(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Fu(Tt(this.jb,this),t)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,jt(10),rp(this),KR(this))};function wE(t){t.B!=null&&(ie.clearTimeout(t.B),t.B=null)}function KR(t){t.g=new Lu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=zr(t.wa);Ue(e,"RID","rpc"),Ue(e,"SID",t.K),Ue(e,"AID",t.V),Ue(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ue(e,"TO",t.qa),Ue(e,"TYPE","xmlhttp"),ju(t,e),t.o&&t.s&&yE(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ep(zr(e)),n.u=null,n.S=!0,xR(n,t)}V.ib=function(){this.v!=null&&(this.v=null,rp(this),EE(this),jt(19))};function Uf(t){t.v!=null&&(ie.clearTimeout(t.v),t.v=null)}function QR(t,e){var n=null;if(t.g==e){Uf(t),wE(t),t.g=null;var r=2}else if(J_(t.i,e))n=e.F,OR(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Yf(),_t(r,new _R(r,n)),ip(t)}else GR(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&lH(t,e)||r==2&&EE(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ps(t,5);break;case 4:Ps(t,10);break;case 3:Ps(t,6);break;default:Ps(t,2)}}}function YR(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ps(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Tt(t.pb,t);n||(n=new ks("//www.google.com/images/cleardot.gif"),ie.location&&ie.location.protocol=="http"||Vf(n,"https"),ep(n)),iH(n.toString(),r)}else jt(2);t.H=0,t.h&&t.h.za(e),XR(t),zR(t)}V.pb=function(t){t?(this.l.info("Successfully pinged google.com"),jt(2)):(this.l.info("Failed to ping google.com"),jt(1))};function XR(t){if(t.H=0,t.ma=[],t.h){let e=LR(t.i);(e.length!=0||t.j.length!=0)&&(H1(t.ma,e),H1(t.ma,t.j),t.i.i.length=0,nE(t.j),t.j.length=0),t.h.ya()}}function JR(t,e,n){var r=n instanceof ks?zr(n):new ks(n);if(r.g!="")e&&(r.g=e+"."+r.g),Bf(r,r.m);else{var i=ie.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ks(null);r&&Vf(s,r),e&&(s.g=e),i&&Bf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ue(r,n,e),Ue(r,"VER",t.ra),ju(t,r),r}function ZR(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ge(new Bu({ob:n})):new Ge(t.va),e.Oa(t.J),e}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function eN(){}V=eN.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function jf(){if(ga&&!(10<=Number(T$)))throw Error("Environmental error: no available transport.")}jf.prototype.g=function(t,e){return new an(t,e)};function an(t,e){lt.call(this),this.g=new qR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Du(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Du(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new va(this)}dt(an,lt);an.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;jt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=JR(t,null,t.Y),ip(t)};an.prototype.close=function(){_E(this.g)};an.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=uE(t),t=n);e.j.push(new Z$(e.fb++,t)),e.H==3&&ip(e)};an.prototype.N=function(){this.g.h=null,delete this.j,_E(this.g),delete this.g,an.$.N.call(this)};function tN(t){pE.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}dt(tN,pE);function nN(){gE.call(this),this.status=1}dt(nN,gE);function va(t){this.g=t}dt(va,eN);va.prototype.Ba=function(){_t(this.g,"a")};va.prototype.Aa=function(t){_t(this.g,new tN(t))};va.prototype.za=function(t){_t(this.g,new nN)};va.prototype.ya=function(){_t(this.g,"b")};function dH(){this.blockSize=-1}function Bn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}dt(Bn,dH);Bn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function V_(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Bn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)V_(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){V_(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){V_(this,r),i=0;break}}this.h=i,this.i+=e};Bn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Pe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var hH={};function IE(t){return-128<=t&&128>t?x$(t,function(e){return new Pe([e|0],0>e?-1:0)}):new Pe([t|0],0>t?-1:0)}function pr(t){if(isNaN(t)||!isFinite(t))return pa;if(0>t)return yt(pr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Z_;return new Pe(e,0)}function rN(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return yt(rN(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=pr(Math.pow(e,8)),r=pa,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=pr(Math.pow(e,s)),r=r.R(s).add(pr(o))):(r=r.R(n),r=r.add(pr(o)))}return r}var Z_=4294967296,pa=IE(0),eE=IE(1),Z1=IE(16777216);V=Pe.prototype;V.ea=function(){if(In(this))return-yt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Z_+r)*e,e*=Z_}return t};V.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(qr(this))return"0";if(In(this))return"-"+yt(this).toString(t);for(var e=pr(Math.pow(t,6)),n=this,r="";;){var i=Hf(n,e).g;n=$f(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,qr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};V.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function qr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function In(t){return t.h==-1}V.X=function(t){return t=$f(this,t),In(t)?-1:qr(t)?0:1};function yt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Pe(n,~t.h).add(eE)}V.abs=function(){return In(this)?yt(this):this};V.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Pe(n,n[n.length-1]&-2147483648?-1:0)};function $f(t,e){return t.add(yt(e))}V.R=function(t){if(qr(this)||qr(t))return pa;if(In(this))return In(t)?yt(this).R(yt(t)):yt(yt(this).R(t));if(In(t))return yt(this.R(yt(t)));if(0>this.X(Z1)&&0>t.X(Z1))return pr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Lf(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Lf(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Lf(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Lf(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Pe(n,0)};function Lf(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function wu(t,e){this.g=t,this.h=e}function Hf(t,e){if(qr(e))throw Error("division by zero");if(qr(t))return new wu(pa,pa);if(In(t))return e=Hf(yt(t),e),new wu(yt(e.g),yt(e.h));if(In(e))return e=Hf(t,yt(e)),new wu(yt(e.g),e.h);if(30<t.g.length){if(In(t)||In(e))throw Error("slowDivide_ only works with positive integers.");for(var n=eE,r=e;0>=r.X(t);)n=eR(n),r=eR(r);var i=ha(n,1),s=ha(r,1);for(r=ha(r,2),n=ha(n,2);!qr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=ha(r,1),n=ha(n,1)}return e=$f(t,i.R(e)),new wu(i,e)}for(i=pa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=pr(n),o=s.R(e);In(o)||0<o.X(t);)n-=r,s=pr(n),o=s.R(e);qr(s)&&(s=eE),i=i.add(s),t=$f(t,o)}return new wu(i,t)}V.gb=function(t){return Hf(this,t).h};V.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Pe(n,this.h&t.h)};V.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Pe(n,this.h|t.h)};V.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Pe(n,this.h^t.h)};function eR(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Pe(n,t.h)}function ha(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Pe(i,t.h)}jf.prototype.createWebChannel=jf.prototype.g;an.prototype.send=an.prototype.u;an.prototype.open=an.prototype.m;an.prototype.close=an.prototype.close;Xf.NO_ERROR=0;Xf.TIMEOUT=8;Xf.HTTP_ERROR=6;ER.COMPLETE="complete";wR.EventType=Ou;Ou.OPEN="a";Ou.CLOSE="b";Ou.ERROR="c";Ou.MESSAGE="d";lt.prototype.listen=lt.prototype.O;Ge.prototype.listenOnce=Ge.prototype.P;Ge.prototype.getLastError=Ge.prototype.Sa;Ge.prototype.getLastErrorCode=Ge.prototype.Ia;Ge.prototype.getStatus=Ge.prototype.da;Ge.prototype.getResponseJson=Ge.prototype.Wa;Ge.prototype.getResponseText=Ge.prototype.ja;Ge.prototype.send=Ge.prototype.ha;Ge.prototype.setWithCredentials=Ge.prototype.Oa;Bn.prototype.digest=Bn.prototype.l;Bn.prototype.reset=Bn.prototype.reset;Bn.prototype.update=Bn.prototype.j;Pe.prototype.add=Pe.prototype.add;Pe.prototype.multiply=Pe.prototype.R;Pe.prototype.modulo=Pe.prototype.gb;Pe.prototype.compare=Pe.prototype.X;Pe.prototype.toNumber=Pe.prototype.ea;Pe.prototype.toString=Pe.prototype.toString;Pe.prototype.getBits=Pe.prototype.D;Pe.fromNumber=pr;Pe.fromString=rN;var iN=Un.createWebChannelTransport=function(){return new jf},sN=Un.getStatEventTarget=function(){return Yf()},sp=Un.ErrorCode=Xf,oN=Un.EventType=ER,aN=Un.Event=Fs,CE=Un.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ine=Un.FetchXmlHttpFactory=Bu,$u=Un.WebChannel=wR,cN=Un.XhrIo=Ge,uN=Un.Md5=Bn,Os=Un.Integer=Pe;var lN="@firebase/firestore";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var Va="10.8.0";var $s=new or("@firebase/firestore");function Hu(){return $s.logLevel}function B(t,...e){if($s.logLevel<=pe.DEBUG){let n=e.map(cI);$s.debug(`Firestore (${Va}): ${t}`,...n)}}function Er(t,...e){if($s.logLevel<=pe.ERROR){let n=e.map(cI);$s.error(`Firestore (${Va}): ${t}`,...n)}}function xa(t,...e){if($s.logLevel<=pe.WARN){let n=e.map(cI);$s.warn(`Firestore (${Va}): ${t}`,...n)}}function cI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function J(t="Unexpected state"){let e=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: `+t;throw Er(e),new Error(e)}function Be(t,e){t||J()}function ae(t,e){return t}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends on{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var mr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var lp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},AE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}},SE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},RE=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string"),new lp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new ht(e)}},NE=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ME=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new NE(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},PE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new PE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function fH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var dp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=fH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Ne(t,e){return t<e?-1:t>e?1:0}function Da(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Et=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var oe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Et(0,0))}static max(){return new t(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Qe=class t extends hp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},pH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,un=class t extends hp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return pH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new z(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Y=class t{constructor(e){this.path=e}static fromPath(e){return new t(Qe.fromString(e))}static fromName(e){return new t(Qe.fromString(e).popFirst(5))}static empty(){return new t(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Qe(e.slice()))}};var FE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};FE.UNKNOWN_ID=-1;function gH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new Et(n+1,0):new Et(n,r));return new Hs(i,Y.empty(),e)}function mH(t){return new Hs(t.readTime,t.key,-1)}var Hs=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(oe.min(),Y.empty(),-1)}static max(){return new t(oe.max(),Y.empty(),-1)}};function vH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}var yH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",OE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ol(t){return _(this,null,function*(){if(t.code!==A.FAILED_PRECONDITION||t.message!==yH)throw t;B("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var LE=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new js(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=uI(r.target.error);this.V.reject(new js(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new js(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(B("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new BE(n)}},fp=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(We())===12.2&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return B("SimpleDb","Removing database:",e),Ls(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!nf())return!1;if(t.C())return!0;let e=We(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return _(this,null,function*(){return this.db||(B("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new js(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new z(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new z(A.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new js(e,o))},i.onupgradeneeded=s=>{B("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{B("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return _(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=LE.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(B("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},VE=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ls(this.k.delete())}},js=class extends z{constructor(e,n){super(A.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function al(t){return t.name==="IndexedDbTransactionError"}var BE=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(B("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(B("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ls(r)}add(e){return B("SimpleDb","ADD",this.store.name,e,e),Ls(this.store.add(e))}get(e){return Ls(this.store.get(e)).next(n=>(n===void 0&&(n=null),B("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return B("SimpleDb","DELETE",this.store.name,e),Ls(this.store.delete(e))}count(){return B("SimpleDb","COUNT",this.store.name),Ls(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new M((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){B("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{let o=uI(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new VE(a),u=n(a.primaryKey,a.value,c);if(u instanceof M){let l=u.catch(d=>(c.done(),M.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ls(t){return new M((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=uI(r.target.error);n(i)}})}var dN=!1;function uI(t){let e=fp.S(We());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dN||(dN=!0,setTimeout(()=>{throw r},0)),r}}return t}var UN=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function $p(t){return t==null}function Qu(t){return t===0&&1/t==-1/0}function _H(t){return typeof t=="number"&&Number.isInteger(t)&&!Qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var EH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Mne=[...EH,"documentOverlays"],wH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IH=wH,Pne=[...IH,"indexConfiguration","indexState","indexEntries"];function hN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ks(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ye=class t{constructor(e,n){this.comparator=e,this.root=n||vr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wa(this.root,e,this.comparator,!0)}},wa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1;vr.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Rt=class t{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pp(this.data.getIterator())}getIteratorFrom(e){return new pp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},pp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Cn=class t{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new t([])}unionWith(e){let n=new Rt(un.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var gp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var $t=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gp("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};$t.EMPTY_BYTE_STRING=new $t("");var CH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(t){if(Be(!!t),typeof t=="string"){let e=0,n=CH.exec(t);if(Be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oi(t){return typeof t=="string"?$t.fromBase64String(t):$t.fromUint8Array(t)}function lI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dI(t){let e=t.mapValue.fields.__previous_value__;return lI(e)?dI(e):e}function Yu(t){let e=Fi(t.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}var UE=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},mp=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var op={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lI(t)?4:$N(t)?9007199254740991:10:J()}function wr(t,e){if(t===e)return!0;let n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yu(t).isEqual(Yu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Fi(i.timestampValue),a=Fi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Oi(i.bytesValue).isEqual(Oi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?Qu(o)===Qu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Da(t.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hN(o)!==hN(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!wr(o[c],a[c])))return!1;return!0}(t,e);default:return J()}}function Xu(t,e){return(t.values||[]).find(n=>wr(n,e))!==void 0}function ba(t,e){if(t===e)return 0;let n=qs(t),r=qs(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ke(s.integerValue||s.doubleValue),c=Ke(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return fN(t.timestampValue,e.timestampValue);case 4:return fN(Yu(t),Yu(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Oi(s),c=Oi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Ne(a[u],c[u]);if(l!==0)return l}return Ne(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ne(Ke(s.latitude),Ke(o.latitude));return a!==0?a:Ne(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=ba(a[u],c[u]);if(l)return l}return Ne(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===op.mapValue&&o===op.mapValue)return 0;if(s===op.mapValue)return 1;if(o===op.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=Ne(c[d],l[d]);if(h!==0)return h;let f=ba(a[c[d]],u[l[d]]);if(f!==0)return f}return Ne(c.length,l.length)}(t.mapValue,e.mapValue);default:throw J()}}function fN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);let n=Fi(t),r=Fi(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function Ta(t){return jE(t)}function jE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Fi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=jE(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${jE(n.fields[o])}`;return i+"}"}(t.mapValue):J()}function $E(t){return!!t&&"integerValue"in t}function hI(t){return!!t&&"arrayValue"in t}function pN(t){return!!t&&"nullValue"in t}function gN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cp(t){return!!t&&"mapValue"in t}function zu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $N(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var cn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(n)}setAll(e){let n=un.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=zu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());cp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ks(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(zu(this.value))}};function HN(t){let e=[];return Ks(t.fields,(n,r)=>{let i=new un([n]);if(cp(r)){let s=HN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Cn(e)}var jn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,oe.min(),oe.min(),oe.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,oe.min(),oe.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,oe.min(),oe.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Aa=class{constructor(e,n){this.position=e,this.inclusive=n}};function mN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ba(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wr(t.position[n],e.position[n]))return!1;return!0}var Sa=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function xH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vp=class{},ot=class t extends vp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qE(e,n,r):n==="array-contains"?new GE(e,r):n==="in"?new KE(e,r):n==="not-in"?new QE(e,r):n==="array-contains-any"?new YE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zE(e,r):new WE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ba(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(ba(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ir=class t extends vp{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return qN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function qN(t){return t.op==="and"}function zN(t){return DH(t)&&qN(t)}function DH(t){for(let e of t.filters)if(e instanceof Ir)return!1;return!0}function HE(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+Ta(t.value);if(zN(t))return t.filters.map(e=>HE(e)).join(",");{let e=t.filters.map(n=>HE(n)).join(",");return`${t.op}(${e})`}}function WN(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&wr(r.value,i.value)}(t,e):t instanceof Ir?function(r,i){return i instanceof Ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&WN(o,i.filters[a]),!0):!1}(t,e):void J()}function GN(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Ta(n.value)}`}(t):t instanceof Ir?function(n){return n.op.toString()+" {"+n.getFilters().map(GN).join(" ,")+"}"}(t):"Filter"}var qE=class extends ot{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){let n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}},zE=class extends ot{constructor(e,n){super(e,"in",n),this.keys=KN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},WE=class extends ot{constructor(e,n){super(e,"not-in",n),this.keys=KN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function KN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}var GE=class extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return hI(n)&&Xu(n.arrayValue,this.value)}},KE=class extends ot{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Xu(this.value.arrayValue,n)}},QE=class extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Xu(this.value.arrayValue,n)}},YE=class extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!hI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xu(this.value.arrayValue,r))}};var XE=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function yN(t,e=null,n=[],r=[],i=null,s=null,o=null){return new XE(t,e,n,r,i,s,o)}function fI(t){let e=ae(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>HE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$p(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ta(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ta(r)).join(",")),e.ce=n}return e.ce}function pI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vN(t.startAt,e.startAt)&&vN(t.endAt,e.endAt)}function JE(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ra=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function bH(t,e,n,r,i,s,o,a){return new Ra(t,e,n,r,i,s,o,a)}function gI(t){return new Ra(t)}function _N(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TH(t){return t.collectionGroup!==null}function Wu(t){let e=ae(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(un.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Sa(s,r))}),n.has(un.keyField().canonicalString())||e.le.push(new Sa(un.keyField(),r))}return e.le}function yr(t){let e=ae(t);return e.he||(e.he=AH(e,Wu(t))),e.he}function AH(t,e){if(t.limitType==="F")return yN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Sa(i.field,s)});let n=t.endAt?new Aa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Aa(t.startAt.position,t.startAt.inclusive):null;return yN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ZE(t,e,n){return new Ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hp(t,e){return pI(yr(t),yr(e))&&t.limitType===e.limitType}function QN(t){return`${fI(yr(t))}|lt:${t.limitType}`}function ya(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>GN(i)).join(", ")}]`),$p(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ta(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ta(i)).join(",")),`Target(${r})`}(yr(t))}; limitType=${t.limitType})`}function qp(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Wu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=mN(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Wu(r),i)||r.endAt&&!function(o,a,c){let u=mN(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Wu(r),i))}(t,e)}function SH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YN(t){return(e,n)=>{let r=!1;for(let i of Wu(t)){let s=RH(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function RH(t,e,n){let r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?ba(c,u):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}var Li=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return jN(this.inner)}size(){return this.innerSize}};var NH=new Ye(Y.comparator);function Gr(){return NH}var XN=new Ye(Y.comparator);function qu(...t){let e=XN;for(let n of t)e=e.insert(n.key,n);return e}function JN(t){let e=XN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vs(){return Gu()}function ZN(){return Gu()}function Gu(){return new Li(t=>t.toString(),(t,e)=>t.isEqual(e))}var MH=new Ye(Y.comparator),PH=new Rt(Y.comparator);function _e(...t){let e=PH;for(let n of t)e=e.add(n);return e}var kH=new Rt(Ne);function FH(){return kH}function eM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qu(e)?"-0":e}}function tM(t){return{integerValue:""+t}}function OH(t,e){return _H(e)?tM(e):eM(t,e)}var Na=class{constructor(){this._=void 0}};function LH(t,e,n){return t instanceof Ma?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&lI(s)&&(s=dI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof zs?rM(t,e):t instanceof Ws?iM(t,e):function(i,s){let o=nM(i,s),a=EN(o)+EN(i.Ie);return $E(o)&&$E(i.Ie)?tM(a):eM(i.serializer,a)}(t,e)}function VH(t,e,n){return t instanceof zs?rM(t,e):t instanceof Ws?iM(t,e):n}function nM(t,e){return t instanceof Pa?function(r){return $E(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ma=class extends Na{},zs=class extends Na{constructor(e){super(),this.elements=e}};function rM(t,e){let n=sM(e);for(let r of t.elements)n.some(i=>wr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ws=class extends Na{constructor(e){super(),this.elements=e}};function iM(t,e){let n=sM(e);for(let r of t.elements)n=n.filter(i=>!wr(i,r));return{arrayValue:{values:n}}}var Pa=class extends Na{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function EN(t){return Ke(t.integerValue||t.doubleValue)}function sM(t){return hI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof zs&&i instanceof zs||r instanceof Ws&&i instanceof Ws?Da(r.elements,i.elements,wr):r instanceof Pa&&i instanceof Pa?wr(r.Ie,i.Ie):r instanceof Ma&&i instanceof Ma}(t.transform,e.transform)}var ew=class{constructor(e,n){this.version=e,this.transformResults=n}},Wr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function up(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ka=class{};function oM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ju(t.key,Wr.none()):new Gs(t.key,t.data,Wr.none());{let n=t.data,r=cn.empty(),i=new Rt(un.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Cr(t.key,r,new Cn(i.toArray()),Wr.none())}}function UH(t,e,n){t instanceof Gs?function(i,s,o){let a=i.value.clone(),c=IN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Cr?function(i,s,o){if(!up(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=IN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(aM(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ku(t,e,n,r){return t instanceof Gs?function(s,o,a,c){if(!up(s.precondition,o))return a;let u=s.value.clone(),l=CN(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Cr?function(s,o,a,c){if(!up(s.precondition,o))return a;let u=CN(s.fieldTransforms,c,o),l=o.data;return l.setAll(aM(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return up(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=nM(r.transform,i||null);s!=null&&(n===null&&(n=cn.empty()),n.set(r.field,s))}return n||null}function wN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Da(r,i,(s,o)=>BH(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Gs=class extends ka{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cr=class extends ka{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function aM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function IN(t,e,n){let r=new Map;Be(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,VH(o,a,n[i]))}return r}function CN(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,LH(s,o,e))}return r}var Ju=class extends ka{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},tw=class extends ka{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var nw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&UH(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ku(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ku(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=ZN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=oM(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(n,r)=>wN(n,r))&&Da(this.baseMutations,e.baseMutations,(n,r)=>wN(n,r))}},rw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Be(e.mutations.length===r.length);let i=function(){return MH}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var iw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var sw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var it,be;function $H(t){switch(t){default:return J();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0}}function cM(t){if(t===void 0)return Er("GRPC error has no .code"),A.UNKNOWN;switch(t){case it.OK:return A.OK;case it.CANCELLED:return A.CANCELLED;case it.UNKNOWN:return A.UNKNOWN;case it.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case it.INTERNAL:return A.INTERNAL;case it.UNAVAILABLE:return A.UNAVAILABLE;case it.UNAUTHENTICATED:return A.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case it.NOT_FOUND:return A.NOT_FOUND;case it.ALREADY_EXISTS:return A.ALREADY_EXISTS;case it.PERMISSION_DENIED:return A.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case it.ABORTED:return A.ABORTED;case it.OUT_OF_RANGE:return A.OUT_OF_RANGE;case it.UNIMPLEMENTED:return A.UNIMPLEMENTED;case it.DATA_LOSS:return A.DATA_LOSS;default:return J()}}(be=it||(it={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";var xN=null;function HH(){return new TextEncoder}var qH=new Os([4294967295,4294967295],0);function DN(t){let e=HH().encode(t),n=new uN;return n.update(e),new Uint8Array(n.digest())}function bN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Os([n,r],0),new Os([i,s],0)]}var ow=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bs(`Invalid padding: ${n}`);if(r<0)throw new Bs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bs(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Os.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Os.fromNumber(r)));return i.compare(qH)===1&&(i=new Os([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=DN(e),[r,i]=bN(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=DN(e),[r,i]=bN(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Bs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yp=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(oe.min(),i,new Ye(Ne),Gr(),_e())}},Zu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,_e(),_e(),_e())}};var Ia=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},_p=class{constructor(e,n){this.targetId=e,this.fe=n}},Ep=class{constructor(e,n,r=$t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},wp=class{constructor(){this.ge=0,this.pe=AN(),this.ye=$t.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=_e(),n=_e(),r=_e();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new Zu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=AN()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Be(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},aw=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Gr(),this.Qe=TN(),this.Ke=new Ye(Ne)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(JE(s))if(r===0){let o=new Y(s.path);this.We(n,o,jn.newNoDocument(o,oe.min()))}else Be(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}xN?.tt(function(l,d,h,f,p){var v,y,g,m,w,E;let C={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},I=d.unchangedNames;return I&&(C.bloomFilter={applied:p===0,hashCount:(v=I?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(m=(g=(y=I?.bits)===null||y===void 0?void 0:y.bitmap)===null||g===void 0?void 0:g.length)!==null&&m!==void 0?m:0,padding:(E=(w=I?.bits)===null||w===void 0?void 0:w.padding)!==null&&E!==void 0?E:0,mightContain:S=>{var b;return(b=f?.mightContain(S))!==null&&b!==void 0&&b}}),C}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Oi(r).toUint8Array()}catch(c){if(c instanceof gp)return xa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ow(o,i,s)}catch(c){return xa(c instanceof Bs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&JE(a.target)){let c=new Y(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,jn.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=_e();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new yp(e,n,this.Ke,this.qe,r);return this.qe=Gr(),this.Qe=TN(),this.Ke=new Ye(Ne),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new wp,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Rt(Ne),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new wp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function TN(){return new Ye(Y.comparator)}function AN(){return new Ye(Y.comparator)}var zH={asc:"ASCENDING",desc:"DESCENDING"},WH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GH={and:"AND",or:"OR"},cw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function uw(t,e){return t.useProto3Json||$p(e)?e:{value:e}}function Ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KH(t,e){return Ip(t,e.toTimestamp())}function _r(t){return Be(!!t),oe.fromTimestamp(function(n){let r=Fi(n);return new Et(r.seconds,r.nanos)}(t))}function mI(t,e){return lw(t,e).canonicalString()}function lw(t,e){let n=function(i){return new Qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lM(t){let e=Qe.fromString(t);return Be(gM(e)),e}function dw(t,e){return mI(t.databaseId,e.path)}function xE(t,e){let n=lM(e);if(n.get(1)!==t.databaseId.projectId)throw new z(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(hM(n))}function dM(t,e){return mI(t.databaseId,e)}function QH(t){let e=lM(t);return e.length===4?Qe.emptyPath():hM(e)}function hw(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hM(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function SN(t,e,n){return{name:dw(t,e),fields:n.value.mapValue.fields}}function YH(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(Be(l===void 0||typeof l=="string"),$t.fromBase64String(l||"")):(Be(l===void 0||l instanceof Uint8Array),$t.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?A.UNKNOWN:cM(u.code);return new z(l,u.message||"")}(o);n=new Ep(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xE(t,r.document.name),s=_r(r.document.updateTime),o=r.document.createTime?_r(r.document.createTime):oe.min(),a=new cn({mapValue:{fields:r.document.fields}}),c=jn.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Ia(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xE(t,r.document),s=r.readTime?_r(r.readTime):oe.min(),o=jn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ia([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xE(t,r.document),s=r.removedTargetIds||[];n=new Ia([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new sw(i,s),a=r.targetId;n=new _p(a,o)}}return n}function XH(t,e){let n;if(e instanceof Gs)n={update:SN(t,e.key,e.value)};else if(e instanceof Ju)n={delete:dw(t,e.key)};else if(e instanceof Cr)n={update:SN(t,e.key,e.data),updateMask:o7(e.fieldMask)};else{if(!(e instanceof tw))return J();n={verify:dw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ma)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ws)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pa)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:KH(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function JH(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?_r(i.updateTime):_r(s);return o.isEqual(oe.min())&&(o=_r(s)),new ew(o,i.transformResults||[])}(n,e))):[]}function ZH(t,e){return{documents:[dM(t,e.path)]}}function e7(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dM(t,i);let s=function(u){if(u.length!==0)return pM(Ir.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:_a(h.field),direction:r7(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=uw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function t7(t){let e=QH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Be(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=fM(d);return h instanceof Ir&&zN(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new Sa(Ea(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,$p(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Aa(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new Aa(f,h)}(n.endAt)),bH(e,i,o,s,a,"F",c,u)}function n7(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ea(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ea(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ea(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ea(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Ea(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ir.create(n.compositeFilter.filters.map(r=>fM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function r7(t){return zH[t]}function i7(t){return WH[t]}function s7(t){return GH[t]}function _a(t){return{fieldPath:t.canonicalString()}}function Ea(t){return un.fromServerFormat(t.fieldPath)}function pM(t){return t instanceof ot?function(n){if(n.op==="=="){if(gN(n.value))return{unaryFilter:{field:_a(n.field),op:"IS_NAN"}};if(pN(n.value))return{unaryFilter:{field:_a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gN(n.value))return{unaryFilter:{field:_a(n.field),op:"IS_NOT_NAN"}};if(pN(n.value))return{unaryFilter:{field:_a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_a(n.field),op:i7(n.op),value:n.value}}}(t):t instanceof Ir?function(n){let r=n.getFilters().map(i=>pM(i));return r.length===1?r[0]:{compositeFilter:{op:s7(n.op),filters:r}}}(t):J()}function o7(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var el=class t{constructor(e,n,r,i,s=oe.min(),o=oe.min(),a=$t.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var fw=class{constructor(e){this.ct=e}};function a7(t){let e=t7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ZE(e,e.limit,"L"):e}var Cp=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ke(e.integerValue));else if("doubleValue"in e){let r=Ke(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Qu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Oi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?$N(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):J()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Y.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Cp.bt=new Cp;var pw=class{constructor(){this._n=new gw}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Hs.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},gw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Rt(Qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(Qe.comparator)).toArray()}};var Fne=new Uint8Array(0);var gr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(41943040,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);var tl=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var mw=class{constructor(){this.changes=new Li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var yw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ku(r.mutation,i,Cn.empty(),Et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){let i=Vs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=qu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Vs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Gr(),o=Gu(),a=function(){return Gu()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Cr)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),Ku(l.mutation,u,l.mutation.getFieldMask(),Et.now())):o.set(u.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new vw(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Gu(),i=new Ye((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Cn.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||_e()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=ZN();l.forEach(h=>{if(!s.has(h)){let f=oM(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Vs()),a=-1,c=s;return o.next(u=>M.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?M.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,_e())).next(l=>({batchId:a,changes:JN(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=qu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=qu();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,c=>{let u=function(d,h){return new Ra(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,jn.newInvalidDocument(l)))});let a=qu();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&Ku(l.mutation,u,Cn.empty(),Et.now()),qp(n,u)&&(a=a.insert(c,u))}),a})}};var _w=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_r(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:a7(i.bundledQuery),readTime:_r(i.readTime)}}(n)),M.resolve()}};var Ew=class{constructor(){this.overlays=new Ye(Y.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Vs();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=Vs(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ye((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=Vs(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Vs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iw(n,r));let s=this.hr.get(n);s===void 0&&(s=_e(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var nl=class{constructor(){this.Pr=new Rt(st.Ir),this.Tr=new Rt(st.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new st(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new st(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new Y(new Qe([])),r=new st(n,e),i=new st(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new Y(new Qe([])),r=new st(n,e),i=new st(n,e+1),s=_e();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new st(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Y.comparator(e.key,n.key)||Ne(e.pr,n.pr)}static Er(e,n){return Ne(e.pr,n.pr)||Y.comparator(e.key,n.key)}};var ww=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Rt(st.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new nw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new st(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new st(n,0),i=new st(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ne);return n.forEach(i=>{let s=new st(i,0),o=new st(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let o=new st(new Y(s),0),a=new Rt(Ne);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),M.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Be(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,i=>{let s=new st(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new st(n,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Iw=class{constructor(e){this.vr=e,this.docs=function(){return new Ye(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(n))}getEntries(e,n){let r=Gr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jn.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Gr(),o=n.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vH(mH(l),r)<=0||(i.has(l.key)||qp(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Cw(this)}getSize(e){return M.resolve(this.size)}},Cw=class extends mw{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var xw=class{constructor(e){this.persistence=e,this.Mr=new Li(n=>fI(n),pI),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new nl,this.targetCount=0,this.Br=tl.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}};var Dw=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new UN(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xw(this),this.indexManager=new pw,this.remoteDocumentCache=function(i){return new Iw(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new fw(n),this.$r=new _w(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ew,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new ww(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);let i=new bw(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return M.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},bw=class extends OE{constructor(e){super(),this.currentSequenceNumber=e}},Tw=class t{constructor(e){this.persistence=e,this.zr=new nl,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw J()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{let i=Y.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,oe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Aw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=_e(),i=_e();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Sw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Rw=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return TS()?8:fp.v(We())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Sw;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Hu()<=pe.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(Hu()<=pe.DEBUG&&B("QueryEngine","Query:",ya(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Hu()<=pe.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(n))):M.resolve())}ji(e,n){if(_N(n))return M.resolve(null);let r=yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ZE(n,null,"F"),r=yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=_e(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,ZE(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return _N(n)||i.isEqual(oe.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?M.resolve(null):(Hu()<=pe.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ya(n)),this.es(e,o,n,gH(i,-1)).next(a=>a))})}Zi(e,n){let r=new Rt(YN(e));return n.forEach((i,s)=>{qp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Hu()<=pe.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ya(n)),this.zi.getDocumentsMatchingQuery(e,n,Hs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Nw=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ye(Ne),this.rs=new Li(s=>fI(s),pI),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yw(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function c7(t,e,n,r){return new Nw(t,e,n,r)}function mM(t,e){return _(this,null,function*(){let n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=_e();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function u7(t,e){let n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=M.resolve();return h.forEach(p=>{f=f.next(()=>l.getEntry(c,p)).next(v=>{let y=u.docVersions.get(p);Be(y!==null),v.version.compareTo(y)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function vM(t){let e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function l7(t,e){let n=ae(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken($t.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,y,g){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(s,f))});let c=Gr(),u=_e();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(d7(s,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(oe.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function d7(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Gr();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function h7(t,e){let n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function f7(t,e){let n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new el(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Mw(t,e,n){return _(this,null,function*(){let r=ae(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!al(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function RN(t,e,n){let r=ae(t),i=oe.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=ae(c),h=d.rs.get(l);return h!==void 0?M.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,o,yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:oe.min(),n?s:_e())).next(a=>(p7(r,SH(e),a),{documents:a,hs:s})))}function p7(t,e,n){let r=t.ss.get(e)||oe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var xp=class{constructor(){this.activeTargetIds=FH()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Pw=class{constructor(){this.no=new xp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new xp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var kw=class{io(e){}shutdown(){}};var Dp=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ap=null;function DE(){return ap===null?ap=function(){return 268435456+Math.round(2147483648*Math.random())}():ap++,"0x"+ap.toString(16)}var g7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Fw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var St="WebChannelConnection",Ow=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=DE(),c=this.bo(n,r.toUriEncodedString());B("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(B("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw xa("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Va}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=g7[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=DE();return new Promise((o,a)=>{let c=new cN;c.setWithCredentials(!0),c.listenOnce(oN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case sp.NO_ERROR:let l=c.getResponseJson();B(St,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case sp.TIMEOUT:B(St,`RPC '${e}' ${s} timed out`),a(new z(A.DEADLINE_EXCEEDED,"Request time out"));break;case sp.HTTP_ERROR:let d=c.getStatus();if(B(St,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(y){let g=y.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(g)>=0?g:A.UNKNOWN}(f.status);a(new z(p,f.message))}else a(new z(A.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new z(A.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{B(St,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);B(St,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=DE(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iN(),a=sN(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");B(St,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,p=new Fw({lo:y=>{f?B(St,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(B(St,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),B(St,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},ho:()=>d.close()}),v=(y,g,m)=>{y.listen(g,w=>{try{m(w)}catch(E){setTimeout(()=>{throw E},0)}})};return v(d,$u.EventType.OPEN,()=>{f||B(St,`RPC '${e}' stream ${i} transport opened.`)}),v(d,$u.EventType.CLOSE,()=>{f||(f=!0,B(St,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),v(d,$u.EventType.ERROR,y=>{f||(f=!0,xa(St,`RPC '${e}' stream ${i} transport errored:`,y),p.Vo(new z(A.UNAVAILABLE,"The operation could not be completed")))}),v(d,$u.EventType.MESSAGE,y=>{var g;if(!f){let m=y.data[0];Be(!!m);let w=m,E=w.error||((g=w[0])===null||g===void 0?void 0:g.error);if(E){B(St,`RPC '${e}' stream ${i} received error:`,E);let C=E.status,I=function(k){let U=it[k];if(U!==void 0)return cM(U)}(C),S=E.message;I===void 0&&(I=A.INTERNAL,S="Unknown error status: "+C+" with message "+E.message),f=!0,p.Vo(new z(I,S)),d.close()}else B(St,`RPC '${e}' stream ${i} received:`,m),p.mo(m)}}),v(a,aN.STAT_EVENT,y=>{y.stat===CE.PROXY?B(St,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===CE.NOPROXY&&B(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}};function bE(){return typeof document<"u"?document:null}function zp(t){return new cw(t,!0)}var bp=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Tp=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new bp(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return _(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return _(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return _(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new z(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>_(this,null,function*(){this.state=0,this.start()}))}__(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Lw=class extends Tp{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=YH(this.serializer,e),r=function(s){if(!("targetChange"in s))return oe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?_r(o.readTime):oe.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=hw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=JE(c)?{documents:ZH(s,c)}:{query:e7(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uM(s,o.resumeToken);let u=uw(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Ip(s,o.snapshotVersion.toTimestamp());let u=uw(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=n7(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=hw(this.serializer),n.removeTarget=e,this.t_(n)}},Vw=class extends Tp{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=JH(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.T_(r,n)}return Be(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=hw(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>XH(this.serializer,r))};this.t_(n)}};var Bw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new z(A.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,lw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(A.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,lw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(A.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Uw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Er(n),this.g_=!1):B("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var jw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>_(this,null,function*(){Qs(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let u=ae(c);u.v_.add(4),yield cl(u),u.x_.set("Unknown"),u.v_.delete(4),yield Wp(u)})}(this))}))}),this.x_=new Uw(r,i)}};function Wp(t){return _(this,null,function*(){if(Qs(t))for(let e of t.F_)yield e(!0)})}function cl(t){return _(this,null,function*(){for(let e of t.F_)yield e(!1)})}function yM(t,e){let n=ae(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),_I(n)?yI(n):Ba(n).Jo()&&vI(n,e))}function _M(t,e){let n=ae(t),r=Ba(n);n.C_.delete(e),r.Jo()&&EM(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Qs(n)&&n.x_.set("Unknown"))}function vI(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ba(t).c_(e)}function EM(t,e){t.O_.Oe(e),Ba(t).l_(e)}function yI(t){t.O_=new aw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ba(t).start(),t.x_.p_()}function _I(t){return Qs(t)&&!Ba(t).Ho()&&t.C_.size>0}function Qs(t){return ae(t).v_.size===0}function wM(t){t.O_=void 0}function m7(t){return _(this,null,function*(){t.C_.forEach((e,n)=>{vI(t,e)})})}function v7(t,e){return _(this,null,function*(){wM(t),_I(t)?(t.x_.S_(e),yI(t)):t.x_.set("Unknown")})}function y7(t,e,n){return _(this,null,function*(){if(t.x_.set("Online"),e instanceof Ep&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ap(t,r)}else if(e instanceof Ia?t.O_.$e(e):e instanceof _p?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(oe.min()))try{let r=yield vM(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken($t.EMPTY_BYTE_STRING,l.snapshotVersion)),EM(s,c);let d=new el(l.target,c,u,l.sequenceNumber);vI(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){B("RemoteStore","Failed to raise snapshot:",r),yield Ap(t,r)}})}function Ap(t,e,n){return _(this,null,function*(){if(!al(e))throw e;t.v_.add(1),yield cl(t),t.x_.set("Offline"),n||(n=()=>vM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Wp(t)}))})}function IM(t,e){return e().catch(n=>Ap(t,n,e))}function Gp(t){return _(this,null,function*(){let e=ae(t),n=Vi(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;_7(e);)try{let i=yield h7(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,E7(e,i)}catch(i){yield Ap(e,i)}CM(e)&&xM(e)})}function _7(t){return Qs(t)&&t.D_.length<10}function E7(t,e){t.D_.push(e);let n=Vi(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function CM(t){return Qs(t)&&!Vi(t).Ho()&&t.D_.length>0}function xM(t){Vi(t).start()}function w7(t){return _(this,null,function*(){Vi(t).d_()})}function I7(t){return _(this,null,function*(){let e=Vi(t);for(let n of t.D_)e.I_(n.mutations)})}function C7(t,e,n){return _(this,null,function*(){let r=t.D_.shift(),i=rw.from(r,e,n);yield IM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Gp(t)})}function x7(t,e){return _(this,null,function*(){e&&Vi(t).P_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return $H(o)&&o!==A.ABORTED}(i.code)){let s=r.D_.shift();Vi(r).Zo(),yield IM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Gp(r)}})}(t,e)),CM(t)&&xM(t)})}function NN(t,e){return _(this,null,function*(){let n=ae(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let r=Qs(n);n.v_.add(3),yield cl(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Wp(n)})}function D7(t,e){return _(this,null,function*(){let n=ae(t);e?(n.v_.delete(2),yield Wp(n)):e||(n.v_.add(2),yield cl(n),n.x_.set("Unknown"))})}function Ba(t){return t.N_||(t.N_=function(n,r,i){let s=ae(n);return s.R_(),new Lw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:m7.bind(null,t),To:v7.bind(null,t),u_:y7.bind(null,t)}),t.F_.push(e=>_(this,null,function*(){e?(t.N_.Zo(),_I(t)?yI(t):t.x_.set("Unknown")):(yield t.N_.stop(),wM(t))}))),t.N_}function Vi(t){return t.B_||(t.B_=function(n,r,i){let s=ae(n);return s.R_(),new Vw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:w7.bind(null,t),To:x7.bind(null,t),E_:I7.bind(null,t),T_:C7.bind(null,t)}),t.F_.push(e=>_(this,null,function*(){e?(t.B_.Zo(),yield Gp(t)):(yield t.B_.stop(),t.D_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var $w=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function EI(t,e){if(Er("AsyncQueue",`${e}: ${t}`),al(t))return new z(A.UNAVAILABLE,`${e}: ${t}`);throw t}var Sp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=qu(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Rp=class{constructor(){this.L_=new Ye(Y.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):J():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},Fa=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Sp.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Hw=class{constructor(){this.q_=void 0,this.Q_=[]}},qw=class{constructor(){this.queries=new Li(e=>QN(e),Hp),this.onlineState="Unknown",this.K_=new Set}};function b7(t,e){return _(this,null,function*(){let n=ae(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Hw),i)try{s.q_=yield n.onListen(r)}catch(o){let a=EI(o,`Initialization of query '${ya(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&wI(n)})}function T7(t,e){return _(this,null,function*(){let n=ae(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function A7(t,e){let n=ae(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&wI(n)}function S7(t,e,n){let r=ae(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function wI(t){t.K_.forEach(e=>{e.next()})}var zw=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var Np=class{constructor(e){this.key=e}},Mp=class{constructor(e){this.key=e}},Ww=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=_e(),this.mutatedKeys=_e(),this.ua=YN(e),this.ca=new Sp(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new Rp,i=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=qp(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),y=!1;h&&f?h.data.isEqual(f.data)?p!==v&&(r.track({type:3,doc:f}),y=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),y=!0,(c&&this.ua(f,c)>0||u&&this.ua(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(c||u)&&(a=!0)),y&&(f?(o=o.add(f),s=v?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((l,d)=>function(f,p){let v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return v(f)-v(p)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,u=c!==this._a;return this._a=c,o.length!==0||u?{snapshot:new Fa(this.query,e.ca,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Rp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=_e(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Mp(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Np(r))}),n}Ra(e){this.oa=e.hs,this.aa=_e();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Fa.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},Gw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Kw=class{constructor(e){this.key=e,this.ma=!1}},Qw=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Li(a=>QN(a),Hp),this.pa=new Map,this.ya=new Set,this.wa=new Ye(Y.comparator),this.Sa=new Map,this.ba=new nl,this.Da={},this.Ca=new Map,this.va=tl.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function R7(t,e){return _(this,null,function*(){let n=U7(t),r,i,s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{let o=yield f7(n.localStore,yr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield N7(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&yM(n.remoteStore,o)}return i})}function N7(t,e,n,r,i){return _(this,null,function*(){t.Ma=(d,h,f)=>function(v,y,g,m){return _(this,null,function*(){let w=y.view.ha(g);w.Xi&&(w=yield RN(v.localStore,y.query,!1).then(({documents:S})=>y.view.ha(S,w)));let E=m&&m.targetChanges.get(y.targetId),C=m&&m.targetMismatches.get(y.targetId)!=null,I=y.view.applyChanges(w,v.isPrimaryClient,E,C);return PN(v,y.targetId,I.da),I.snapshot})}(t,d,h,f);let s=yield RN(t.localStore,e,!0),o=new Ww(e,s.hs),a=o.ha(s.documents),c=Zu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);PN(t,n,u.da);let l=new Gw(e,n,o);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot})}function M7(t,e){return _(this,null,function*(){let n=ae(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Hp(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Mw(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),_M(n.remoteStore,r.targetId),Yw(n,r.targetId)}).catch(ol))):(Yw(n,r.targetId),yield Mw(n.localStore,r.targetId,!0))})}function P7(t,e,n){return _(this,null,function*(){let r=j7(t);try{let i=yield function(o,a){let c=ae(o),u=Et.now(),l=a.reduce((f,p)=>f.add(p.key),_e()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Gr(),v=_e();return c.os.getEntries(f,l).next(y=>{p=y,p.forEach((g,m)=>{m.isValidDocument()||(v=v.add(g))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(y=>{d=y;let g=[];for(let m of a){let w=jH(m,d.get(m.key).overlayedDocument);w!=null&&g.push(new Cr(m.key,w,HN(w.value.mapValue),Wr.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,g,a)}).next(y=>{h=y;let g=y.applyToLocalDocumentSet(d,v);return c.documentOverlayCache.saveOverlays(f,y.batchId,g)})}).then(()=>({batchId:h.batchId,changes:JN(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Da[o.currentUser.toKey()];u||(u=new Ye(Ne)),u=u.insert(a,c),o.Da[o.currentUser.toKey()]=u}(r,i.batchId,n),yield ul(r,i.changes),yield Gp(r.remoteStore)}catch(i){let s=EI(i,"Failed to persist write");n.reject(s)}})}function DM(t,e){return _(this,null,function*(){let n=ae(t);try{let r=yield l7(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Sa.get(s);o&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Be(o.ma):i.removedDocuments.size>0&&(Be(o.ma),o.ma=!1))}),yield ul(n,r,e)}catch(r){yield ol(r)}})}function MN(t,e,n){let r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((s,o)=>{let a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ae(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(u=!0)}),u&&wI(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function k7(t,e,n){return _(this,null,function*(){let r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Ye(Y.comparator);o=o.insert(s,jn.newNoDocument(s,oe.min()));let a=_e().add(s),c=new yp(oe.min(),new Map,new Ye(Ne),o,a);yield DM(r,c),r.wa=r.wa.remove(s),r.Sa.delete(e),II(r)}else yield Mw(r.localStore,e,!1).then(()=>Yw(r,e,n)).catch(ol)})}function F7(t,e){return _(this,null,function*(){let n=ae(t),r=e.batch.batchId;try{let i=yield u7(n.localStore,e);TM(n,r,null),bM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ul(n,i)}catch(i){yield ol(i)}})}function O7(t,e,n){return _(this,null,function*(){let r=ae(t);try{let i=yield function(o,a){let c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(Be(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);TM(r,e,n),bM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ul(r,i)}catch(i){yield ol(i)}})}function bM(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function TM(t,e,n){let r=ae(t),i=r.Da[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Yw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||AM(t,r)})}function AM(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(_M(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),II(t))}function PN(t,e,n){for(let r of n)r instanceof Np?(t.ba.addReference(r.key,e),L7(t,r)):r instanceof Mp?(B("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||AM(t,r.key)):J()}function L7(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(B("SyncEngine","New document in limbo: "+n),t.ya.add(r),II(t))}function II(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new Y(Qe.fromString(e)),r=t.va.next();t.Sa.set(r,new Kw(n)),t.wa=t.wa.insert(n,r),yM(t.remoteStore,new el(yr(gI(n.path)),r,"TargetPurposeLimboResolution",UN._e))}}function ul(t,e,n){return _(this,null,function*(){let r=ae(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Aw.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.fa.u_(i),yield function(c,u){return _(this,null,function*(){let l=ae(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(u,h=>M.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>M.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!al(d))throw d;B("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),p=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(p);l.ns=l.ns.insert(h,v)}}})}(r.localStore,s))})}function V7(t,e){return _(this,null,function*(){let n=ae(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let r=yield mM(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new z(A.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ul(n,r.us)}})}function B7(t,e){let n=ae(t),r=n.Sa.get(e);if(r&&r.ma)return _e().add(r.key);{let i=_e(),s=n.pa.get(e);if(!s)return i;for(let o of s){let a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function U7(t){let e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k7.bind(null,e),e.fa.u_=A7.bind(null,e.eventManager),e.fa.xa=S7.bind(null,e.eventManager),e}function j7(t){let e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O7.bind(null,e),e}var Pp=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=zp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return c7(this.persistence,new Rw,e.initialUser,this.serializer)}createPersistence(e){return new Dw(Tw.Hr,this.serializer)}createSharedClientState(e){return new Pw}terminate(){return _(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Xw=class{initialize(e,n){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>MN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V7.bind(null,this.syncEngine),yield D7(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new qw}()}createDatastore(e){let n=zp(e.databaseInfo.databaseId),r=function(s){return new Ow(s)}(e.databaseInfo);return function(s,o,a,c){return new Bw(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new jw(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>MN(this.syncEngine,n,0),function(){return Dp.D()?new Dp:new kw}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new Qw(i,s,o,a,c,u);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return _(this,null,function*(){var e;yield function(r){return _(this,null,function*(){let i=ae(r);B("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield cl(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Jw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Zw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>_(this,null,function*(){B("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(B("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=EI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function TE(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield mM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function kN(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield H7(t);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>NN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>NN(e.remoteStore,i)),t._onlineComponents=e})}function $7(t){return t.name==="FirebaseError"?t.code===A.FAILED_PRECONDITION||t.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function H7(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield TE(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!$7(n))throw n;xa("Error using user provided cache. Falling back to memory cache: "+n),yield TE(t,new Pp)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield TE(t,new Pp);return t._offlineComponents})}function SM(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield kN(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield kN(t,new Xw))),t._onlineComponents})}function q7(t){return SM(t).then(e=>e.syncEngine)}function FN(t){return _(this,null,function*(){let e=yield SM(t),n=e.eventManager;return n.onListen=R7.bind(null,e.syncEngine),n.onUnlisten=M7.bind(null,e.syncEngine),n})}function RM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ON=new Map;function NM(t,e,n){if(!n)throw new z(A.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function z7(t,e,n,r){if(e===!0&&r===!0)throw new z(A.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LN(t){if(!Y.isDocumentKey(t))throw new z(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VN(t){if(Y.isDocumentKey(t))throw new z(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function CI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=CI(t);throw new z(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var kp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(A.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(A.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(A.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Oa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new z(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AE;switch(r.type){case"firstParty":return new ME(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ON.get(n);r&&(B("ComponentProvider","Removing Datastore"),ON.delete(n),r.terminate())}(this),Promise.resolve()}};function MM(t,e,n,r={}){var i;let s=(t=Pi(t,Oa))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ht.MOCK_USER;else{a=ef(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new z(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ht(u)}t._authCredentials=new SE(new lp(a,c))}}var Fp=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ln=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ki=class t extends Fp{constructor(e,n,r){super(e,n,gI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Y(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function PM(t,e,...n){if(t=et(t),NM("collection","path",e),t instanceof Oa){let r=Qe.fromString(e,...n);return VN(r),new ki(t,null,r)}{if(!(t instanceof ln||t instanceof ki))throw new z(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Qe.fromString(e,...n));return VN(r),new ki(t.firestore,null,r)}}function xI(t,e,...n){if(t=et(t),arguments.length===1&&(e=dp.newId()),NM("doc","path",e),t instanceof Oa){let r=Qe.fromString(e,...n);return LN(r),new ln(t,null,new Y(r))}{if(!(t instanceof ln||t instanceof ki))throw new z(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Qe.fromString(e,...n));return LN(r),new ln(t.firestore,t instanceof ki?t.converter:null,new Y(r))}}var eI=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new bp(this,"async_queue_retry"),this._u=()=>{let n=bE();n&&B("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=bE();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=bE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new mr;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return _(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!al(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Er("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=$w.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&J()}verifyOperationInProgress(){}hu(){return _(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function BN(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Bi=class extends Oa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new eI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||OM(this),this._firestoreClient.terminate()}};function kM(t,e){let n=typeof t=="object"?t:Di(),r=typeof t=="string"?t:e||"(default)",i=Cs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Zh("firestore");s&&MM(i,...s)}return i}function FM(t){return t._firestoreClient||OM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function OM(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new UE(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,RM(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Zw(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var rl=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t($t.fromBase64String(e))}catch(n){throw new z(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var La=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var il=class{constructor(e){this._methodName=e}};var sl=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}};var W7=/^__.*__$/,tI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gs(e,this.data,n,this.fieldTransforms)}},Op=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function LM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var nI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Vp(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(LM(this.du)&&W7.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},rI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zp(e)}Su(e,n,r,i=!1){return new nI({du:e,methodName:n,wu:r,path:un.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function VM(t){let e=t._freezeSettings(),n=zp(t._databaseId);return new rI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function G7(t,e,n,r,i,s={}){let o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);DI("Data must be an object, but it was:",o,r);let a=BM(r,o),c,u;if(s.merge)c=new Cn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=iI(e,d,n);if(!o.contains(h))throw new z(A.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);jM(l,h)||l.push(h)}c=new Cn(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new tI(new cn(a),c,u)}var Lp=class t extends il{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function K7(t,e,n,r){let i=t.Su(1,e,n);DI("Data must be an object, but it was:",i,r);let s=[],o=cn.empty();Ks(r,(c,u)=>{let l=bI(e,c,n);u=et(u);let d=i.fu(l);if(u instanceof Lp)s.push(l);else{let h=Kp(u,d);h!=null&&(s.push(l),o.set(l,h))}});let a=new Cn(s);return new Op(o,a,i.fieldTransforms)}function Q7(t,e,n,r,i,s){let o=t.Su(1,e,n),a=[iI(e,r,n)],c=[i];if(s.length%2!=0)throw new z(A.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(iI(e,s[h])),c.push(s[h+1]);let u=[],l=cn.empty();for(let h=a.length-1;h>=0;--h)if(!jM(u,a[h])){let f=a[h],p=c[h];p=et(p);let v=o.fu(f);if(p instanceof Lp)u.push(f);else{let y=Kp(p,v);y!=null&&(u.push(f),l.set(f,y))}}let d=new Cn(u);return new Op(l,d,o.fieldTransforms)}function Kp(t,e){if(UM(t=et(t)))return DI("Unsupported field value:",e,t),BM(t,e);if(t instanceof il)return function(r,i){if(!LM(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Kp(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Et.fromDate(r);return{timestampValue:Ip(i.serializer,s)}}if(r instanceof Et){let s=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ip(i.serializer,s)}}if(r instanceof sl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rl)return{bytesValue:uM(i.serializer,r._byteString)};if(r instanceof ln){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${CI(r)}`)}(t,e)}function BM(t,e){let n={};return jN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,(r,i)=>{let s=Kp(i,e.Ru(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof sl||t instanceof rl||t instanceof ln||t instanceof il)}function DI(t,e,n){if(!UM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=CI(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function iI(t,e,n){if((e=et(e))instanceof La)return e._internalPath;if(typeof e=="string")return bI(t,e);throw Vp("Field path arguments must be of type string or ",t,!1,void 0,n)}var Y7=new RegExp("[~\\*/\\[\\]]");function bI(t,e,n){if(e.search(Y7)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new La(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vp(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new z(A.INVALID_ARGUMENT,a+t+c)}function jM(t,e){return t.some(n=>n.isEqual(e))}var Bp=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new sI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field($M("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},sI=class extends Bp{data(){return super.data()}};function $M(t,e){return typeof e=="string"?bI(t,e):e instanceof La?e._internalPath:e._delegate._internalPath}function X7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var oI=class{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ks(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new sl(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=dI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){let n=Fi(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Qe.fromString(e);Be(gM(r));let i=new mp(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||Er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function J7(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Us=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Up=class extends Bp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field($M("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ca=class extends Up{data(e={}){return super.data(e)}},aI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Us(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ca(this._firestore,this._userDataWriter,r.key,r,new Us(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ca(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Us(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ca(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Us(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:Z7(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Z7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}var jp=class extends oI{constructor(e){super(),this.firestore=e}convertBytes(e){return new rl(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}};function HM(t,e,n,...r){t=Pi(t,ln);let i=Pi(t.firestore,Bi),s=VM(i),o;return o=typeof(e=et(e))=="string"||e instanceof La?Q7(s,"updateDoc",t._key,e,n,r):K7(s,"updateDoc",t._key,e),AI(i,[o.toMutation(t._key,Wr.exists(!0))])}function qM(t){return AI(Pi(t.firestore,Bi),[new Ju(t._key,Wr.none())])}function zM(t,e){let n=Pi(t.firestore,Bi),r=xI(t),i=J7(t.converter,e);return AI(n,[G7(VM(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Wr.exists(!1))]).then(()=>r)}function TI(t,...e){var n,r,i;t=et(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||BN(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(BN(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof ln)u=Pi(t.firestore,Bi),l=gI(t._key.path),c={next:d=>{e[o]&&e[o](eq(u,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Pi(t,Fp);u=Pi(d.firestore,Bi),l=d._query;let h=new jp(u);c={next:f=>{e[o]&&e[o](new aI(u,h,d,f))},error:e[o+1],complete:e[o+2]},X7(t._query)}return function(h,f,p,v){let y=new Jw(v),g=new zw(f,y,p);return h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return b7(yield FN(h),g)})),()=>{y.La(),h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return T7(yield FN(h),g)}))}}(FM(u),l,a,c)}function AI(t,e){return function(r,i){let s=new mr;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return P7(yield q7(r),i,s)})),s.promise}(FM(t),e)}function eq(t,e,n){let r=n.docs.get(e._key),i=new jp(t);return new Up(t,i,e._key,r,new Us(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Va=i})(ur),cr(new Xt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Bi(new RE(r.getProvider("auth-internal")),new kE(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mp(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qe(lN,"4.4.2",e),qe(lN,"4.4.2","esm2017")})();var Qp=function(){return Qp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qp.apply(this,arguments)};var rq={includeMetadataChanges:!1};function WM(t,e){return e===void 0&&(e=rq),new me(function(n){var r=TI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function GM(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Qp(Qp({},r),(n={},n[e.idField]=t.id,n))}function KM(t){return WM(t,{includeMetadataChanges:!0}).pipe(le(function(e){return e.docs}))}function QM(t,e){return e===void 0&&(e={}),KM(t).pipe(le(function(n){return n.map(function(r){return GM(r,e)})}))}var Ys=class{constructor(e){return e}},YM="firestore",SI=class{constructor(){return Ds(YM)}};var RI=new K("angularfire2.firestore-instances");function iq(t,e){let n=la(YM,t,e);return n&&new Ys(n)}function sq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ys(r)}}var oq={provide:SI,deps:[[new Ze,RI]]},aq={provide:Ys,useFactory:iq,deps:[[new Ze,RI],Vn]},cq=(()=>{class t{constructor(){qe("angularfire",Ur.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=xt({type:t});static \u0275inj=Dt({providers:[aq,oq]})}return t})();function XM(t,...e){return{ngModule:cq,providers:[{provide:RI,useFactory:sq(t),multi:!0,deps:[Se,mt,Ti,jr,[new Ze,Ns],[new Ze,bi],...e]}]}}var NI=Ut(QM,!0);var MI=Ut(zM,!0);var ll=Ut(PM,!0);var PI=Ut(qM,!0);var dl=Ut(xI,!0);var JM=Ut(kM,!0);var kI=Ut(HM,!0);var Ua=(()=>{let e=class e{constructor(){this.firestore=O(Ys),this.auth=O(Rs)}addSite(r){let i=ll(this.firestore,"sites");return MI(i,r)}getAllSites(){let r=ll(this.firestore,"sites");return NI(r,{idField:"id"})}updateSite(r,i){let s=dl(this.firestore,"sites",r);return kI(s,i)}deleteSite(r){let i=dl(this.firestore,"sites",r);return PI(i)}addPassword(r,i){let s=ll(this.firestore,`sites/${i}/passwords`);return MI(s,r)}getAllPasswords(r){let i=ll(this.firestore,`sites/${r}/passwords`);return NI(i,{idField:"id"})}updatePassword(r,i,s){let o=dl(this.firestore,`sites/${r}/passwords`,i);return kI(o,s)}deletePassword(r,i){let s=dl(this.firestore,`sites/${r}/passwords`,i);return PI(s)}login(r,i){return $1(this.auth,r,i)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uq(t,e){t&1&&(H(0,"div",13),ne(1," The email or password is incorrect! "),q())}var ZM=(()=>{let e=class e{constructor(){this.passwordManagerService=O(Ua),this.router=O(Ln),this.isError=!1}onSubmit(r){this.passwordManagerService.login(r.email,r.password).then(()=>{this.router.navigate(["/site-list"])}).catch(i=>{this.isError=!0})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=vn({type:e,selectors:[["app-login"]],standalone:!0,features:[_n],decls:18,vars:1,consts:[[1,"d-flex","align-items-center","justify-content-center","px-3","py-5","mx-auto","vh-100"],[1,"card","border-3","border-dark","rounded",2,"width","20rem"],[1,"card-header"],[1,"card-body"],["class","p-3 my-3 bg-danger text-light rounded",4,"ngIf"],[3,"ngSubmit"],["f","ngForm"],[1,"mb-3"],["for","email",1,"form-label"],["ngModel","","type","email","id","email","name","email","placeholder","name@company.com",1,"form-control"],["for","password",1,"form-label"],["ngModel","","type","password","id","password","name","password","placeholder","***********",1,"form-control"],["type","submit",1,"btn","btn-outline-dark","w-100"],[1,"p-3","my-3","bg-danger","text-light","rounded"]],template:function(i,s){if(i&1){let o=gi();H(0,"div",0)(1,"div",1)(2,"h4",2),ne(3,"Login to your account"),q(),H(4,"div",3),Mr(5,uq,2,0,"div",4),H(6,"form",5,6),vt("ngSubmit",function(){Fn(o);let c=$o(7);return On(s.onSubmit(c.value))}),H(8,"div",7)(9,"label",8),ne(10,"Your Email"),q(),bt(11,"input",9),q(),H(12,"div",7)(13,"label",10),ne(14,"Password"),q(),bt(15,"input",11),q(),H(16,"button",12),ne(17," Sign In "),q()()()()()}i&2&&(xe(5),Kt("ngIf",s.isError))},dependencies:[sa,ia,Ci,na,ra,gs,ps,ds,qo],encapsulation:2});let t=e;return t})();var lq=()=>["/"],Yp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=vn({type:e,selectors:[["app-navbar"]],standalone:!0,features:[_n],decls:10,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav"],[1,"btn","btn-outline-dark",3,"routerLink"]],template:function(i,s){i&1&&(H(0,"nav",0)(1,"div",1)(2,"a",2),ne(3,"Pass-Man"),q(),H(4,"button",3),bt(5,"span",4),q(),H(6,"div",5)(7,"div",6)(8,"button",7),ne(9," Logout "),q()()()()()),i&2&&(xe(8),Kt("routerLink",hh(1,lq)))},dependencies:[$h,jh],encapsulation:2});let t=e;return t})();function dq(t,e){if(t&1&&(H(0,"div"),ne(1),q()),t&2){let n=Pr();lh("p-3 my-3 ",n.alertColor," text-light rounded"),xe(),Qt(" Data ",n.alertMessage," successfully! ")}}var hq=()=>["/password-list"],fq=(t,e,n,r)=>({id:t,siteName:e,siteURL:n,siteImgURL:r});function pq(t,e){if(t&1){let n=gi();gv(0),H(1,"div",22)(2,"div",23),bt(3,"img",24),H(4,"div",25)(5,"h4",26),ne(6),q(),H(7,"p",27),ne(8),q()(),H(9,"div",28)(10,"div",16)(11,"button",29),ne(12," Add New "),q(),H(13,"button",30),vt("click",function(){let s=Fn(n).$implicit,o=Pr();return On(o.editSite(s.siteName,s.siteURL,s.siteImgURL,s.id))}),ne(14," Edit "),q(),H(15,"button",30),vt("click",function(){let s=Fn(n).$implicit,o=Pr();return On(o.deleteSite(s.id))}),ne(16," Delete "),q()()()()(),mv()}if(t&2){let n=e.$implicit;xe(3),Kt("src",n.siteImgURL,bc),xe(3),mi(n.siteName),xe(2),Qt(" ",n.siteURL," "),xe(3),Kt("routerLink",hh(5,hq))("queryParams",RT(6,fq,n.id,n.siteName,n.siteURL,n.siteImgURL))}}var eP=(()=>{let e=class e{constructor(){this.passwordManagerService=O(Ua),this.formState="Add New",this.isSuccess=!1,this.alertMessage="",this.alertColor=""}ngOnInit(){this.getAllSites()}onSubmit(r){this.formState==="Add New"?this.passwordManagerService.addSite(r).then(()=>{console.log("Data added successfully!"),this.showToast("added","bg-success")}).catch(i=>{console.log(i)}):this.formState==="Edit"&&this.passwordManagerService.updateSite(this.siteId,r).then(()=>{console.log("Data updated successfully!"),this.showToast("updated","bg-info")}).catch(i=>{console.log(i)})}getAllSites(){this.allSites=this.passwordManagerService.getAllSites()}editSite(r,i,s,o){this.siteName=r,this.siteURL=i,this.siteImgURL=s,this.siteId=o,this.formState="Edit"}deleteSite(r){this.passwordManagerService.deleteSite(r).then(()=>{console.log("Data deleted successfully!"),this.showToast("deleted","bg-danger")}).catch(i=>{console.log(i)})}showToast(r,i){this.isSuccess=!0,this.alertMessage=r,this.alertColor=i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=vn({type:e,selectors:[["app-site-list"]],standalone:!0,features:[_n],decls:37,vars:10,consts:[[1,"container","mx-auto","my-5"],[1,"mt-0","mb-2"],[1,"mb-2"],[1,"btn","btn-dark","mb-2"],[3,"class",4,"ngIf"],[1,"border","border-dark","py-2","px-5"],[1,"text-center"],[3,"ngSubmit"],["f","ngForm"],[1,"mb-3"],["for","siteName",1,"form-label"],["type","text","id","siteName","name","siteName",1,"form-control",3,"ngModel","ngModelChange"],["for","siteURL",1,"form-label"],["type","text","id","siteURL","name","siteURL",1,"form-control",3,"ngModel","ngModelChange"],["for","siteImgURL",1,"form-label"],["type","text","id","siteImgURL","name","siteImgURL",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-dark"],[1,"btn","btn-outline-dark"],[1,"container","mt-5"],[1,"row","row-cols-4","gap-2"],[4,"ngFor","ngForOf"],[1,"col","px-0"],[1,"card","border","border-2","border-dark",2,"height","300px"],["alt","site",1,"card-img-top",2,"height","120px","object-fit","cover",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text","bg-info","text-light","rounded","px-2"],[1,"card-footer"],[1,"btn","btn-dark",3,"routerLink","queryParams"],[1,"btn","btn-outline-dark",3,"click"]],template:function(i,s){if(i&1){let o=gi();bt(0,"app-navbar"),H(1,"div",0)(2,"h1",1),ne(3,"Pass-Man"),q(),H(4,"p",2),ne(5," Protect yourself, your family, or your global workforce with simple security, easy secret sharing. Prepare for a password[less] future by embracing pervasive password management today. "),q(),H(6,"button",3),ne(7,"Add New Site"),q(),Mr(8,dq,2,4,"div",4),H(9,"div",5)(10,"h2",6),ne(11),q(),H(12,"p",6),ne(13),q(),H(14,"form",7,8),vt("ngSubmit",function(){Fn(o);let c=$o(15);return On(s.onSubmit(c.value))}),H(16,"div",9)(17,"label",10),ne(18,"Site Name"),q(),H(19,"input",11),Fr("ngModelChange",function(c){return vi(s.siteName,c)||(s.siteName=c),c}),q()(),H(20,"div",9)(21,"label",12),ne(22,"Site URL"),q(),H(23,"input",13),Fr("ngModelChange",function(c){return vi(s.siteURL,c)||(s.siteURL=c),c}),q()(),H(24,"div",9)(25,"label",14),ne(26,"Site Image URL"),q(),H(27,"input",15),Fr("ngModelChange",function(c){return vi(s.siteImgURL,c)||(s.siteImgURL=c),c}),q()(),H(28,"div",16)(29,"button",17),ne(30),q(),H(31,"button",18),ne(32,"Cancel"),q()()()(),H(33,"div",19)(34,"div",20),Mr(35,pq,17,11,"ng-container",21),MT(36,"async"),q()()()}i&2&&(xe(8),Kt("ngIf",s.isSuccess),xe(3),Qt("",s.formState," Site"),xe(2),Qt("You can ",s.formState," site from below form"),xe(6),kr("ngModel",s.siteName),xe(4),kr("ngModel",s.siteURL),xe(4),kr("ngModel",s.siteImgURL),xe(3),Qt("",s.formState," Site"),xe(5),Kt("ngForOf",PT(36,8,s.allSites)))},dependencies:[sa,ia,Ci,na,ra,gs,ps,ds,_h,qo,YT,$h,jh,Yp],encapsulation:2});let t=e;return t})();var fl=bO(uk());function gq(t,e){if(t&1&&(H(0,"div"),ne(1),q()),t&2){let n=Pr();lh("p-3 my-3 ",n.alertColor," text-light rounded"),xe(),Qt(" Password ",n.alertMessage," successfully! ")}}function mq(t,e){if(t&1){let n=gi();H(0,"tr")(1,"td"),ne(2),q(),H(3,"td"),ne(4),q(),H(5,"td")(6,"div",25)(7,"span"),ne(8),q(),H(9,"button",26),vt("click",function(){let i=Fn(n),s=i.$implicit,o=i.index,a=Pr();return On(a.onDecrypt(s.password,o))}),ne(10," Decrypt "),q()()(),H(11,"td")(12,"div",27)(13,"button",28),vt("click",function(){let s=Fn(n).$implicit,o=Pr();return On(o.editPassword(s.email,s.username,s.password,s.id))}),ne(14," Edit "),q(),H(15,"button",29),vt("click",function(){let s=Fn(n).$implicit,o=Pr();return On(o.deletePassword(s.id))}),ne(16," Delete "),q()()()()}if(t&2){let n=e.$implicit;xe(2),mi(n.email),xe(2),mi(n.username),xe(4),mi(n.password)}}var lk=(()=>{let e=class e{constructor(){this.activatedRoute=O(nr),this.passwordManagerService=O(Ua),this.formState="Add New",this.isSuccess=!1,this.alertMessage="",this.alertColor=""}ngOnInit(){this.activatedRoute.queryParams.subscribe(r=>{this.siteId=r.id,this.siteName=r.siteName,this.siteURL=r.siteURL,this.siteImgURL=r.siteImgURL}),this.getAllPasswords()}resetForm(){this.email="",this.username="",this.password="",this.formState="Add New",this.passwordId=""}onSubmit(r){let i=this.encryptPassword(r.password);r.password=i,this.formState==="Add New"?this.passwordManagerService.addPassword(r,this.siteId).then(()=>{console.log("Password added successfully!"),this.showToast("added","bg-success"),this.resetForm()}).catch(s=>{console.log(s)}):this.formState==="Edit"&&this.passwordManagerService.updatePassword(this.siteId,this.passwordId,r).then(()=>{console.log("Password updated successfully!"),this.showToast("updated","bg-info"),this.resetForm()}).catch(s=>{console.log(s)})}getAllPasswords(){this.passwordManagerService.getAllPasswords(this.siteId).subscribe(r=>{this.passwordList=r})}editPassword(r,i,s,o){this.email=r,this.username=i,this.password=s,this.passwordId=o,this.formState="Edit"}deletePassword(r){this.passwordManagerService.deletePassword(this.siteId,r).then(()=>{console.log("Password deleted successfully!"),this.showToast("deleted","bg-danger")}).catch(i=>{console.log(i)})}showToast(r,i){this.isSuccess=!0,this.alertMessage=r,this.alertColor=i}encryptPassword(r){return fl.AES.encrypt(r,"j+QXyRS9bW/cJbK0FpbgEuribPidLNt9nAofwIilfqRAW/Q9LpRZnt6xJLhx1tAf").toString()}decryptPassword(r){return fl.AES.decrypt(r,"j+QXyRS9bW/cJbK0FpbgEuribPidLNt9nAofwIilfqRAW/Q9LpRZnt6xJLhx1tAf").toString(fl.enc.Utf8)}onDecrypt(r,i){let s=this.decryptPassword(r);this.passwordList[i].password=s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=vn({type:e,selectors:[["app-password-list"]],standalone:!0,features:[_n],decls:49,vars:11,consts:[[1,"container","my-5"],[1,"row"],[3,"class",4,"ngIf"],[1,"row","gap-2"],[1,"col","px-0"],[1,"card","border","border-2","border-dark",2,"height","400px"],["alt","site",2,"height","220px","object-fit","cover",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text","bg-info","text-light","rounded","px-2"],[1,"border","border-dark","py-2","px-5","rounded",2,"height","400px"],[1,"text-center"],[3,"ngSubmit"],["f","ngForm"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","username",1,"form-label"],["type","text","id","username","name","username",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],["type","password","id","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-dark"],[1,"row","row-cols-1","mt-5"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],[1,"btn","btn-outline-danger",3,"click"],[1,"d-flex","gap-2"],[1,"btn","btn-dark",3,"click"],[1,"btn","btn-outline-dark",3,"click"]],template:function(i,s){if(i&1){let o=gi();bt(0,"app-navbar"),H(1,"div",0)(2,"div",1),Mr(3,gq,2,4,"div",2),q(),H(4,"div",3)(5,"div",4)(6,"div",5),bt(7,"img",6),H(8,"div",7)(9,"h4",8),ne(10),q(),H(11,"p",9),ne(12),q()()()(),H(13,"div",4)(14,"div",10)(15,"h2",11),ne(16),q(),H(17,"p",11),ne(18),q(),H(19,"form",12,13),vt("ngSubmit",function(){Fn(o);let c=$o(20);return On(s.onSubmit(c.value))}),H(21,"div",14)(22,"label",15),ne(23,"Email"),q(),H(24,"input",16),Fr("ngModelChange",function(c){return vi(s.email,c)||(s.email=c),c}),q()(),H(25,"div",14)(26,"label",17),ne(27,"Username"),q(),H(28,"input",18),Fr("ngModelChange",function(c){return vi(s.username,c)||(s.username=c),c}),q()(),H(29,"div",14)(30,"label",19),ne(31,"Password"),q(),H(32,"input",20),Fr("ngModelChange",function(c){return vi(s.password,c)||(s.password=c),c}),q()(),H(33,"button",21),ne(34),q()()()()(),H(35,"div",22)(36,"table",23)(37,"thead")(38,"tr")(39,"th"),ne(40,"Email"),q(),H(41,"th"),ne(42,"Username"),q(),H(43,"th"),ne(44,"Password"),q(),H(45,"th"),ne(46,"Action"),q()()(),H(47,"tbody"),Mr(48,mq,17,3,"tr",24),q()()()()}i&2&&(xe(3),Kt("ngIf",s.isSuccess),xe(4),Kt("src",s.siteImgURL,bc),xe(3),mi(s.siteName),xe(2),Qt(" ",s.siteURL," "),xe(4),Qt("",s.formState," User & Password"),xe(2),Qt(" You can ",s.formState," user & password from below form "),xe(6),kr("ngModel",s.email),xe(4),kr("ngModel",s.username),xe(4),kr("ngModel",s.password),xe(2),Qt(" ",s.formState," Password "),xe(14),Kt("ngForOf",s.passwordList))},dependencies:[ds,_h,qo,sa,ia,Ci,na,ra,gs,ps,Yp],encapsulation:2});let t=e;return t})();var dk=[{path:"",component:ZM},{path:"site-list",component:eP},{path:"password-list",component:lk}];var hk="@firebase/database",fk="1.0.3";var kC="";function vq(t){kC=t}var qI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:oa(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var zI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return sr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var zk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new qI(e)}}catch{}return new zI},Js=zk("localStorage"),WI=zk("sessionStorage");var qa=new or("@firebase/database"),yq=function(){let t=1;return function(){return t++}}(),Wk=function(t){let e=kS(t),n=new Yh;n.update(e);let r=n.digest();return Xh.encodeByteArray(r)},bl=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=bl.apply(null,r):typeof r=="object"?e+=ut(r):e+=r,e+=" "}return e},Zs=null,pk=!0,_q=function(t,e){L(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(qa.logLevel=pe.VERBOSE,Zs=qa.log.bind(qa),e&&WI.set("logging_enabled",!0)):typeof t=="function"?Zs=t:(Zs=null,WI.remove("logging_enabled"))},Nt=function(...t){if(pk===!0&&(pk=!1,Zs===null&&WI.get("logging_enabled")===!0&&_q(!0)),Zs){let e=bl.apply(null,t);Zs(e)}},Tl=function(t){return function(...e){Nt(t,...e)}},GI=function(...t){let e="FIREBASE INTERNAL ERROR: "+bl(...t);qa.error(e)},Yr=function(...t){let e=`FIREBASE FATAL ERROR: ${bl(...t)}`;throw qa.error(e),new Error(e)},dn=function(...t){let e="FIREBASE WARNING: "+bl(...t);qa.warn(e)},Eq=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&dn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Gk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},wq=function(t){if(ir()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wa="[MIN_NAME]",eo="[MAX_NAME]",Za=function(t,e){if(t===e)return 0;if(t===Wa||e===eo)return-1;if(e===Wa||t===eo)return 1;{let n=gk(t),r=gk(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Iq=function(t,e){return t===e?0:t<e?-1:1},pl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ut(e))},FC=function(t){if(typeof t!="object"||t===null)return ut(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ut(e[r]),n+=":",n+=FC(t[e[r]]);return n+="}",n},Kk=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function bn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Qk=function(t){L(!Gk(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let l=u.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Cq=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xq=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var Dq=new RegExp("^-?(0*)\\d{1,10}$"),bq=-2147483648,Tq=2147483647,gk=function(t){if(Dq.test(t)){let e=Number(t);if(e>=bq&&e<=Tq)return e}return null},Al=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw dn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Aq=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_l=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var KI=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){dn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var QI=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Nt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',dn(e)}},El=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Og="5",Yk="v",Xk="s",Jk="r",Zk="f",eF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tF="ls",nF="p",YI="ac",rF="websocket",iF="long_polling";var Lg=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Js.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Js.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function Sq(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function sF(t,e,n){L(typeof e=="string","typeof type must == string"),L(typeof n=="object","typeof params must == object");let r;if(e===rF)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===iF)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Sq(t)&&(n.ns=t.namespace);let i=[];return bn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var XI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){sr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return CS(this.counters_)}};var LI={},VI={};function OC(t){let e=t.toString();return LI[e]||(LI[e]=new XI),LI[e]}function Rq(t,e){let n=t.toString();return VI[n]||(VI[n]=e()),VI[n]}var JI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Al(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var mk="start",Nq="close",Mq="pLPCommand",Pq="pRTLPCB",oF="id",aF="pw",cF="ser",kq="cb",Fq="seg",Oq="ts",Lq="d",Vq="dframe",uF=1870,lF=30,Bq=uF-lF,Uq=25e3,jq=3e4,ZI=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tl(e),this.stats_=OC(n),this.urlFn=c=>(this.appCheckToken&&(c[YI]=this.appCheckToken),sF(n,iF,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new JI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(jq)),wq(()=>{if(this.isClosed_)return;this.scriptTagHolder=new eC((...s)=>{let[o,a,c,u,l]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===mk)this.id=a,this.password=c;else if(o===Nq)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[mk]="t",r[cF]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[kq]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Yk]=Og,this.transportSessionId&&(r[Xk]=this.transportSessionId),this.lastSessionId&&(r[tF]=this.lastSessionId),this.applicationId&&(r[nF]=this.applicationId),this.appCheckToken&&(r[YI]=this.appCheckToken),typeof location<"u"&&location.hostname&&eF.test(location.hostname)&&(r[Jk]=Zk);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return ir()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Cq()&&!xq()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=ut(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=My(n),i=Kk(r,Bq);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(ir())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Vq]="t",r[oF]=e,r[aF]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=ut(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},eC=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ir())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=yq(),window[Mq+this.uniqueCallbackIdentifier]=e,window[Pq+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Nt("frame writing exception"),a.stack&&Nt(a.stack),Nt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Nt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[oF]=this.myID,e[aF]=this.myPW,e[cF]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lF+r.length<=uF;){let o=this.pendingSegs.shift();r=r+"&"+Fq+i+"="+o.seg+"&"+Oq+i+"="+o.ts+"&"+Lq+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Uq)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){ir()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Nt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var $q=16384,Hq=45e3,Vg=null;typeof MozWebSocket<"u"?Vg=MozWebSocket:typeof WebSocket<"u"&&(Vg=WebSocket);var gl=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tl(this.connId),this.stats_=OC(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[Yk]=Og,!ir()&&typeof location<"u"&&location.hostname&&eF.test(location.hostname)&&(a[Jk]=Zk),r&&(a[Xk]=r),i&&(a[tF]=i),s&&(a[YI]=s),o&&(a[nF]=o),sF(n,rF,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Js.set("previous_websocket_failure",!0);try{let i;if(ir()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Og}/${kC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Vg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Vg!==null&&!t.forceDisallow_}static previouslyFailed(){return Js.isInMemoryStorage||Js.get("previous_websocket_failure")===!0}markConnectionHealthy(){Js.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=oa(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(L(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=ut(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Kk(r,$q);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Hq))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),qq=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ZI,gl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=gl&&gl.isAvailable(),i=r&&!gl.previouslyFailed();if(n.webSocketOnly&&(r||dn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gl];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),zq=6e4,Wq=5e3,Gq=10*1024,Kq=100*1024,BI="t",vk="d",Qq="s",yk="r",Yq="e",_k="o",Ek="a",wk="n",Ik="p",Xq="h",tC=class{constructor(e,n,r,i,s,o,a,c,u,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tl("c:"+this.id+":"),this.transportManager_=new qq(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=_l(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Kq?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Gq?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(BI in e){let n=e[BI];n===Ek?this.upgradeIfSecondaryHealthy_():n===yk?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_k&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=pl("t",e),r=pl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ik,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ek,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wk,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=pl("t",e),r=pl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=pl(BI,e);if(vk in e){let r=e[vk];if(n===Xq){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===wk){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Qq?this.onConnectionShutdown_(r):n===yk?this.onReset_(r):n===Yq?GI("Server Error: "+r):n===_k?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):GI("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Og!==r&&dn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),_l(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zq))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_l(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Wq))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ik,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Js.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Bg=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Ug=class{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){L(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var jg=class t extends Ug{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ou()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Ck=32,xk=768,Le=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Fe(){return new Le("")}function Te(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Hi(t){return t.pieces_.length-t.pieceNum_}function je(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Le(t.pieces_,e)}function dF(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Jq(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function hF(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function fF(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Le(e,0)}function ft(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Le)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Le(n,0)}function Ie(t){return t.pieceNum_>=t.pieces_.length}function xn(t,e){let n=Te(t),r=Te(e);if(n===null)return e;if(n===r)return xn(je(t),je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pF(t,e){if(Hi(t)!==Hi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Hn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Hi(t)>Hi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var nC=class{constructor(e,n){this.errorPrefix_=n,this.parts_=hF(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=uu(this.parts_[r]);gF(this)}};function Zq(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=uu(e),gF(t)}function ez(t){let e=t.parts_.pop();t.byteLength_-=uu(e),t.parts_.length>0&&(t.byteLength_-=1)}function gF(t){if(t.byteLength_>xk)throw new Error(t.errorPrefix_+"has a key path longer than "+xk+" bytes ("+t.byteLength_+").");if(t.parts_.length>Ck)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ck+") or object contains a cycle "+Xs(t))}function Xs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var rC=class t extends Ug{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}};var ml=1e3,tz=60*5*1e3,Dk=30*1e3,nz=1.3,rz=3e4,iz="server_kill",bk=3,LC=(()=>{class t extends Bg{constructor(n,r,i,s,o,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=Tl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ml,this.maxReconnectDelay_=tz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!ir())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");rC.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&jg.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(ut(o)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new ms,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),L(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,l=c.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),l!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&sr(n,"w")){let i=ys(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();dn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||NS(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Dk)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=RS(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),L(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ut(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):GI("Unrecognized action received from server: "+ut(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>rz&&(this.reconnectDelay_=ml),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*nz)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},l=function(h){L(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:u,sendRequest:l};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Nt("getToken() completed but was canceled"):(Nt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new tC(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{dn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(iz)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&dn(h),u())}}})}interrupt(n){Nt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Nt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],au(this.interruptReasons_)&&(this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>FC(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Le(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Nt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bk&&(this.reconnectDelay_=Dk,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Nt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bk&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";ir()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+kC.replace(/\./g,"-")]=1,ou()?n["framework.cordova"]=1:tf()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=jg.getInstance().currentlyOnline();return au(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Ae=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Ga=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Ae(Wa,e),i=new Ae(Wa,n);return this.compare(r,i)!==0}minPost(){return Ae.MIN}};var Fg,$g=class extends Ga{static get __EMPTY_NODE(){return Fg}static set __EMPTY_NODE(e){Fg=e}compare(e,n){return Za(e.name,n.name)}isDefinedOn(e){throw vs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ae.MIN}maxPost(){return new Ae(eo,Fg)}makePost(e,n){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new Ae(e,Fg)}toString(){return".key"}},za=new $g;var $a=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},$n=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Dn.EMPTY_NODE,this.right=o??Dn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Dn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),iC=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new $n(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Dn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,$n.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$n.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $a(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $a(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $a(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $a(this.root_,null,this.comparator_,!0,e)}};Dn.EMPTY_NODE=new iC;function sz(t,e){return Za(t.name,e.name)}function VC(t,e){return Za(t,e)}var sC;function oz(t){sC=t}var mF=function(t){return typeof t=="number"?"number:"+Qk(t):"string:"+t},vF=function(t){if(t.isLeafNode()){let e=t.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&sr(e,".sv"),"Priority must be a string or number.")}else L(t===sC||t.isEmpty(),"priority of unexpected type.");L(t===sC||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Tk,Ka=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vF(this.priorityNode_)}static set __childrenNodeConstructor(n){Tk=n}static get __childrenNodeConstructor(){return Tk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Ie(n)?this:Te(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Te(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(L(i!==".priority"||Hi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(je(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+mF(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Qk(this.value_):n+=this.value_,this.lazyHash_=Wk(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(L(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return L(s>=0,"Unknown leaf type: "+r),L(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),yF,_F;function az(t){yF=t}function cz(t){_F=t}var oC=class extends Ga{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Za(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ae.MIN}maxPost(){return new Ae(eo,new Ka("[PRIORITY-POST]",_F))}makePost(e,n){let r=yF(e);return new Ae(n,new Ka("[PRIORITY-POST]",r))}toString(){return".priority"}},Pt=new oC;var uz=Math.log(2),aC=class{constructor(e){let n=s=>parseInt(Math.log(s)/uz,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Hg=function(t,e,n,r){t.sort(e);let i=function(c,u){let l=u-c,d,h;if(l===0)return null;if(l===1)return d=t[c],h=n?n(d):d,new $n(h,d.node,$n.BLACK,null,null);{let f=parseInt(l/2,10)+c,p=i(c,f),v=i(f+1,u);return d=t[f],h=n?n(d):d,new $n(h,d.node,$n.BLACK,p,v)}},s=function(c){let u=null,l=null,d=t.length,h=function(p,v){let y=d-p,g=d;d-=p;let m=i(y+1,g),w=t[y],E=n?n(w):w;f(new $n(E,w.node,v,null,m))},f=function(p){u?(u.left=p,u=p):(l=p,u=p)};for(let p=0;p<c.count;++p){let v=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));v?h(y,$n.BLACK):(h(y,$n.BLACK),h(y,$n.RED))}return l},o=new aC(t.length),a=s(o);return new Dn(r||e,a)};var UI,ja={},Qa=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return L(ja&&Pt,"ChildrenNode.ts has not been loaded"),UI=UI||new t({".priority":ja},{".priority":Pt}),UI}get(e){let n=ys(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Dn?n:null}hasIndex(e){return sr(this.indexSet_,e.toString())}addIndex(e,n){L(e!==za,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Ae.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Hg(r,e.getCompare()):a=ja;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let l=Object.assign({},this.indexes_);return l[c]=a,new t(l,u)}addToIndexes(e,n){let r=cu(this.indexes_,(i,s)=>{let o=ys(this.indexSet_,s);if(L(o,"Missing index implementation for "+s),i===ja)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Ae.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Hg(a,o.getCompare())}else return ja;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Ae(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=cu(this.indexes_,i=>{if(i===ja)return i;{let s=n.get(e.name);return s?i.remove(new Ae(e.name,s)):i}});return new t(r,this.indexSet_)}};var vl,ze=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&vF(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vl||(vl=new t(new Dn(VC),null,Qa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vl}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?vl:r}}getChild(n){let r=Te(n);return r===null?this:this.getImmediateChild(r).getChild(je(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(L(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Ae(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?vl:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=Te(n);if(i===null)return r;{L(Te(n)!==".priority"||Hi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(je(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Pt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+mF(this.getPriority().val())+":"),this.forEachChild(Pt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Wk(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Ae(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Ae(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Ae(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Ae.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Ae.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Sl?-1:0}withIndex(n){if(n===za||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===za||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Pt),s=r.getIterator(Pt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===za?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),cC=class extends ze{constructor(){super(new Dn(VC),ze.EMPTY_NODE,Qa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ze.EMPTY_NODE}isEmpty(){return!1}},Sl=new cC;Object.defineProperties(Ae,{MIN:{value:new Ae(Wa,ze.EMPTY_NODE)},MAX:{value:new Ae(eo,Sl)}});$g.__EMPTY_NODE=ze.EMPTY_NODE;Ka.__childrenNodeConstructor=ze;oz(Sl);cz(Sl);var lz=!0;function Mt(t,e=null){if(t===null)return ze.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ka(n,Mt(e))}if(!(t instanceof Array)&&lz){let n=[],r=!1;if(bn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Mt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Ae(o,c)))}}),n.length===0)return ze.EMPTY_NODE;let s=Hg(n,sz,o=>o.name,VC);if(r){let o=Hg(n,Pt.getCompare());return new ze(s,Mt(e),new Qa({".priority":o},{".priority":Pt}))}else return new ze(s,Mt(e),Qa.Default)}else{let n=ze.EMPTY_NODE;return bn(t,(r,i)=>{if(sr(t,r)&&r.substring(0,1)!=="."){let s=Mt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Mt(e))}}az(Mt);var uC=class extends Ga{constructor(e){super(),this.indexPath_=e,L(!Ie(e)&&Te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Za(e.name,n.name):s}makePost(e,n){let r=Mt(e),i=ze.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ae(n,i)}maxPost(){let e=ze.EMPTY_NODE.updateChild(this.indexPath_,Sl);return new Ae(eo,e)}toString(){return hF(this.indexPath_,0).join("/")}};var lC=class extends Ga{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Za(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ae.MIN}maxPost(){return Ae.MAX}makePost(e,n){let r=Mt(e);return new Ae(n,r)}toString(){return".value"}},dz=new lC;function hz(t){return{type:"value",snapshotNode:t}}function fz(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function pz(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ak(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function gz(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var dC=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wa}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:eo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Sk(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Pt?n="$priority":t.index_===dz?n="$value":t.index_===za?n="$key":(L(t.index_ instanceof uC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ut(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=ut(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ut(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ut(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ut(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Rk(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Pt&&(e.i=t.index_.toString()),e}var hC=class t extends Bg{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Tl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=Sk(e._queryParams);this.restRequest_(s+".json",c,(u,l)=>{let d=l;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),ys(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Sk(e._queryParams),r=e._path.toString(),i=new ms;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Es(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=oa(a.responseText)}catch{dn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&dn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var fC=class{constructor(){this.rootNode_=ze.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function qg(){return{value:null,children:new Map}}function EF(t,e,n){if(Ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Te(e);t.children.has(r)||t.children.set(r,qg());let i=t.children.get(r);e=je(e),EF(i,e,n)}}function pC(t,e,n){t.value!==null?n(e,t.value):mz(t,(r,i)=>{let s=new Le(e.toString()+"/"+r);pC(i,s,n)})}function mz(t,e){t.children.forEach((n,r)=>{e(r,n)})}var gC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&bn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Nk=10*1e3,vz=30*1e3,yz=5*60*1e3,mC=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new gC(e);let r=Nk+(vz-Nk)*Math.random();_l(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;bn(e,(i,s)=>{s>0&&sr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),_l(this.reportStats_.bind(this),Math.floor(Math.random()*2*yz))}};var Qr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Qr||{});function wF(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function IF(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function CF(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var vC=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Qr.ACK_USER_WRITE,this.source=wF()}operationForChild(e){if(Ie(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Le(e));return new t(Fe(),n,this.revert)}}else return L(Te(this.path)===e,"operationForChild called for unrelated child."),new t(je(this.path),this.affectedTree,this.revert)}};var Ya=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Qr.OVERWRITE}operationForChild(e){return Ie(this.path)?new t(this.source,Fe(),this.snap.getImmediateChild(e)):new t(this.source,je(this.path),this.snap)}};var zg=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Qr.MERGE}operationForChild(e){if(Ie(this.path)){let n=this.children.subtree(new Le(e));return n.isEmpty()?null:n.value?new Ya(this.source,Fe(),n.value):new t(this.source,Fe(),n)}else return L(Te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Cl=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ie(e))return this.isFullyInitialized()&&!this.filtered_;let n=Te(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function _z(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(gz(o.childName,o.snapshotNode))}),yl(t,i,"child_removed",e,r,n),yl(t,i,"child_added",e,r,n),yl(t,i,"child_moved",s,r,n),yl(t,i,"child_changed",e,r,n),yl(t,i,"value",e,r,n),i}function yl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>wz(t,a,c)),o.forEach(a=>{let c=Ez(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function Ez(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function wz(t,e,n){if(e.childName==null||n.childName==null)throw vs("Should only compare child_ events.");let r=new Ae(e.childName,e.snapshotNode),i=new Ae(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function xF(t,e){return{eventCache:t,serverCache:e}}function wl(t,e,n,r){return xF(new Cl(e,n,r),t.serverCache)}function DF(t,e,n,r){return xF(t.eventCache,new Cl(e,n,r))}function yC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function to(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var jI,Iz=()=>(jI||(jI=new Dn(Iq)),jI),Jt=class t{constructor(e,n=Iz()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return bn(e,(r,i)=>{n=n.set(new Le(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Fe(),value:this.value};if(Ie(e))return null;{let r=Te(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(je(e),n);return s!=null?{path:ft(new Le(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ie(e))return this;{let n=Te(e),r=this.children.get(n);return r!==null?r.subtree(je(e)):new t(null)}}set(e,n){if(Ie(e))return new t(n,this.children);{let r=Te(e),s=(this.children.get(r)||new t(null)).set(je(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(Ie(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Te(e),r=this.children.get(n);if(r){let i=r.remove(je(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(Ie(e))return this.value;{let n=Te(e),r=this.children.get(n);return r?r.get(je(e)):null}}setTree(e,n){if(Ie(e))return n;{let r=Te(e),s=(this.children.get(r)||new t(null)).setTree(je(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Fe(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ft(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Fe(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Ie(e))return null;{let s=Te(e),o=this.children.get(s);return o?o.findOnPath_(je(e),ft(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Fe(),n)}foreachOnPath_(e,n,r){if(Ie(e))return this;{this.value&&r(n,this.value);let i=Te(e),s=this.children.get(i);return s?s.foreachOnPath_(je(e),ft(n,i),r):new t(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ft(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var qn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Jt(null))}};function Il(t,e,n){if(Ie(e))return new qn(new Jt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=xn(i,e);return s=s.updateChild(o,n),new qn(t.writeTree_.set(i,s))}else{let i=new Jt(n),s=t.writeTree_.setTree(e,i);return new qn(s)}}}function Mk(t,e,n){let r=t;return bn(n,(i,s)=>{r=Il(r,ft(e,i),s)}),r}function Pk(t,e){if(Ie(e))return qn.empty();{let n=t.writeTree_.setTree(e,new Jt(null));return new qn(n)}}function _C(t,e){return no(t,e)!=null}function no(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(xn(n.path,e)):null}function kk(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Pt,(r,i)=>{e.push(new Ae(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ae(r,i.value))}),e}function $i(t,e){if(Ie(e))return t;{let n=no(t,e);return n!=null?new qn(new Jt(n)):new qn(t.writeTree_.subtree(e))}}function EC(t){return t.writeTree_.isEmpty()}function Xa(t,e){return bF(Fe(),t.writeTree_,e)}function bF(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(L(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=bF(ft(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ft(t,".priority"),r)),n}}function TF(t,e){return MF(e,t)}function Cz(t,e,n,r,i){L(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Il(t.visibleWrites,e,n)),t.lastWriteId=r}function xz(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function Dz(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);L(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&bz(a,r.path)?i=!1:Hn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Tz(t),!0;if(r.snap)t.visibleWrites=Pk(t.visibleWrites,r.path);else{let a=r.children;bn(a,c=>{t.visibleWrites=Pk(t.visibleWrites,ft(r.path,c))})}return!0}else return!1}function bz(t,e){if(t.snap)return Hn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Hn(ft(t.path,n),e))return!0;return!1}function Tz(t){t.visibleWrites=AF(t.allWrites,Az,Fe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Az(t){return t.visible}function AF(t,e,n){let r=qn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Hn(n,o)?(a=xn(n,o),r=Il(r,a,s.snap)):Hn(o,n)&&(a=xn(o,n),r=Il(r,Fe(),s.snap.getChild(a)));else if(s.children){if(Hn(n,o))a=xn(n,o),r=Mk(r,a,s.children);else if(Hn(o,n))if(a=xn(o,n),Ie(a))r=Mk(r,Fe(),s.children);else{let c=ys(s.children,Te(a));if(c){let u=c.getChild(je(a));r=Il(r,Fe(),u)}}}else throw vs("WriteRecord should have .snap or .children")}}return r}function SF(t,e,n,r,i){if(!r&&!i){let s=no(t.visibleWrites,e);if(s!=null)return s;{let o=$i(t.visibleWrites,e);if(EC(o))return n;if(n==null&&!_C(o,Fe()))return null;{let a=n||ze.EMPTY_NODE;return Xa(o,a)}}}else{let s=$i(t.visibleWrites,e);if(!i&&EC(s))return n;if(!i&&n==null&&!_C(s,Fe()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Hn(u.path,e)||Hn(e,u.path))},a=AF(t.allWrites,o,e),c=n||ze.EMPTY_NODE;return Xa(a,c)}}}function Sz(t,e,n){let r=ze.EMPTY_NODE,i=no(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Pt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=$i(t.visibleWrites,e);return n.forEachChild(Pt,(o,a)=>{let c=Xa($i(s,new Le(o)),a);r=r.updateImmediateChild(o,c)}),kk(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=$i(t.visibleWrites,e);return kk(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Rz(t,e,n,r,i){L(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ft(e,n);if(_C(t.visibleWrites,s))return null;{let o=$i(t.visibleWrites,s);return EC(o)?i.getChild(n):Xa(o,i.getChild(n))}}function Nz(t,e,n,r){let i=ft(e,n),s=no(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=$i(t.visibleWrites,i);return Xa(o,r.getNode().getImmediateChild(n))}else return null}function Mz(t,e){return no(t.visibleWrites,e)}function Pz(t,e,n,r,i,s,o){let a,c=$i(t.visibleWrites,e),u=no(c,Fe());if(u!=null)a=u;else if(n!=null)a=Xa(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&l.length<i;)d(f,r)!==0&&l.push(f),f=h.getNext();return l}else return[]}function kz(){return{visibleWrites:qn.empty(),allWrites:[],lastWriteId:-1}}function wC(t,e,n,r){return SF(t.writeTree,t.treePath,e,n,r)}function RF(t,e){return Sz(t.writeTree,t.treePath,e)}function Fk(t,e,n,r){return Rz(t.writeTree,t.treePath,e,n,r)}function Wg(t,e){return Mz(t.writeTree,ft(t.treePath,e))}function Fz(t,e,n,r,i,s){return Pz(t.writeTree,t.treePath,e,n,r,i,s)}function BC(t,e,n){return Nz(t.writeTree,t.treePath,e,n)}function NF(t,e){return MF(ft(t.treePath,e),t.writeTree)}function MF(t,e){return{treePath:t,writeTree:e}}var IC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;L(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),L(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ak(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,pz(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,fz(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ak(r,e.snapshotNode,i.oldSnap));else throw vs("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var CC=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},PF=new CC,xl=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Cl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return BC(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:to(this.viewCache_),s=Fz(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function Oz(t,e){L(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Lz(t,e,n,r,i){let s=new IC,o,a;if(n.type===Qr.OVERWRITE){let u=n;u.source.fromUser?o=xC(t,e,u.path,u.snap,r,i,s):(L(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Ie(u.path),o=Gg(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Qr.MERGE){let u=n;u.source.fromUser?o=Bz(t,e,u.path,u.children,r,i,s):(L(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=DC(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Qr.ACK_USER_WRITE){let u=n;u.revert?o=$z(t,e,u.path,r,i,s):o=Uz(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Qr.LISTEN_COMPLETE)o=jz(t,e,n.path,r,s);else throw vs("Unknown operation type: "+n.type);let c=s.getChanges();return Vz(e,o,c),{viewCache:o,changes:c}}function Vz(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=yC(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(hz(yC(e)))}}function kF(t,e,n,r,i,s){let o=e.eventCache;if(Wg(r,n)!=null)return e;{let a,c;if(Ie(n))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=to(e),l=u instanceof ze?u:ze.EMPTY_NODE,d=RF(r,l);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let u=wC(r,to(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=Te(n);if(u===".priority"){L(Hi(n)===1,"Can't have a priority with additional path components");let l=o.getNode();c=e.serverCache.getNode();let d=Fk(r,n,l,c);d!=null?a=t.filter.updatePriority(l,d):a=o.getNode()}else{let l=je(n),d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let h=Fk(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(l,h):d=o.getNode().getImmediateChild(u)}else d=BC(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,l,i,s):a=o.getNode()}}return wl(e,a,o.isFullyInitialized()||Ie(n),t.filter.filtersNodes())}}function Gg(t,e,n,r,i,s,o,a){let c=e.serverCache,u,l=o?t.filter:t.filter.getIndexedFilter();if(Ie(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{let f=Te(n);if(!c.isCompleteForPath(n)&&Hi(n)>1)return e;let p=je(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?u=l.updatePriority(c.getNode(),y):u=l.updateChild(c.getNode(),f,y,p,PF,null)}let d=DF(e,u,c.isFullyInitialized()||Ie(n),l.filtersNodes()),h=new xl(i,d,s);return kF(t,d,n,i,h,a)}function xC(t,e,n,r,i,s,o){let a=e.eventCache,c,u,l=new xl(i,e,s);if(Ie(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=wl(e,u,!0,t.filter.filtersNodes());else{let d=Te(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=wl(e,u,a.isFullyInitialized(),a.isFiltered());else{let h=je(n),f=a.getNode().getImmediateChild(d),p;if(Ie(h))p=r;else{let v=l.getCompleteChild(d);v!=null?dF(h)===".priority"&&v.getChild(fF(h)).isEmpty()?p=v:p=v.updateChild(h,r):p=ze.EMPTY_NODE}if(f.equals(p))c=e;else{let v=t.filter.updateChild(a.getNode(),d,p,h,l,o);c=wl(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Ok(t,e){return t.eventCache.isCompleteForChild(e)}function Bz(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{let l=ft(n,c);Ok(e,Te(l))&&(a=xC(t,a,l,u,i,s,o))}),r.foreach((c,u)=>{let l=ft(n,c);Ok(e,Te(l))||(a=xC(t,a,l,u,i,s,o))}),a}function Lk(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function DC(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Ie(n)?u=r:u=new Jt(null).setTree(n,r);let l=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),p=Lk(t,f,h);c=Gg(t,c,new Le(d),p,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!l.hasChild(d)&&!f){let p=e.serverCache.getNode().getImmediateChild(d),v=Lk(t,p,h);c=Gg(t,c,new Le(d),v,i,s,o,a)}}),c}function Uz(t,e,n,r,i,s,o){if(Wg(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ie(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Gg(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Ie(n)){let u=new Jt(null);return c.getNode().forEachChild(za,(l,d)=>{u=u.set(new Le(l),d)}),DC(t,e,n,u,i,s,a,o)}else return e}else{let u=new Jt(null);return r.foreach((l,d)=>{let h=ft(n,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),DC(t,e,n,u,i,s,a,o)}}function jz(t,e,n,r,i){let s=e.serverCache,o=DF(e,s.getNode(),s.isFullyInitialized()||Ie(n),s.isFiltered());return kF(t,o,n,r,PF,i)}function $z(t,e,n,r,i,s){let o;if(Wg(r,n)!=null)return e;{let a=new xl(r,e,i),c=e.eventCache.getNode(),u;if(Ie(n)||Te(n)===".priority"){let l;if(e.serverCache.isFullyInitialized())l=wC(r,to(e));else{let d=e.serverCache.getNode();L(d instanceof ze,"serverChildren would be complete if leaf node"),l=RF(r,d)}l=l,u=t.filter.updateFullNode(c,l,s)}else{let l=Te(n),d=BC(r,l,e.serverCache);d==null&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),d!=null?u=t.filter.updateChild(c,l,d,je(n),a,s):e.eventCache.getNode().hasChild(l)?u=t.filter.updateChild(c,l,ze.EMPTY_NODE,je(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=wC(r,to(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Wg(r,Fe())!=null,wl(e,u,o,t.filter.filtersNodes())}}function Hz(t,e){let n=to(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ie(e)&&!n.getImmediateChild(Te(e)).isEmpty())?n.getChild(e):null}function Vk(t,e,n,r){e.type===Qr.MERGE&&e.source.queryId!==null&&(L(to(t.viewCache_),"We should always have a full cache before handling merges"),L(yC(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=Lz(t.processor_,i,e,n,r);return Oz(t.processor_,s.viewCache),L(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,qz(t,s.changes,s.viewCache.eventCache.getNode(),null)}function qz(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return _z(t.eventGenerator_,e,n,i)}var Bk;function zz(t){L(!Bk,"__referenceConstructor has already been defined"),Bk=t}function UC(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return L(s!=null,"SyncTree gave us an op for an invalid query."),Vk(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(Vk(o,e,n,r));return s}}function jC(t,e){let n=null;for(let r of t.views.values())n=n||Hz(r,e);return n}var Uk;function Wz(t){L(!Uk,"__referenceConstructor has already been defined"),Uk=t}var Kg=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Jt(null),this.pendingWriteTree_=kz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Gz(t,e,n,r,i){return Cz(t.pendingWriteTree_,e,n,r,i),i?Yg(t,new Ya(wF(),e,n)):[]}function Ha(t,e,n=!1){let r=xz(t.pendingWriteTree_,e);if(Dz(t.pendingWriteTree_,e)){let s=new Jt(null);return r.snap!=null?s=s.set(Fe(),!0):bn(r.children,o=>{s=s.set(new Le(o),!0)}),Yg(t,new vC(r.path,s,n))}else return[]}function Qg(t,e,n){return Yg(t,new Ya(IF(),e,n))}function Kz(t,e,n){let r=Jt.fromObject(n);return Yg(t,new zg(IF(),e,r))}function Qz(t,e,n,r){let i=VF(t,r);if(i!=null){let s=BF(i),o=s.path,a=s.queryId,c=xn(o,e),u=new Ya(CF(a),c,n);return UF(t,o,u)}else return[]}function Yz(t,e,n,r){let i=VF(t,r);if(i){let s=BF(i),o=s.path,a=s.queryId,c=xn(o,e),u=Jt.fromObject(n),l=new zg(CF(a),c,u);return UF(t,o,l)}else return[]}function FF(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=xn(o,e),u=jC(a,c);if(u)return u});return SF(i,e,s,n,!0)}function Yg(t,e){return OF(e,t.syncPointTree_,null,TF(t.pendingWriteTree_,Fe()))}function OF(t,e,n,r){if(Ie(t.path))return LF(t,e,n,r);{let i=e.get(Fe());n==null&&i!=null&&(n=jC(i,Fe()));let s=[],o=Te(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let u=n?n.getImmediateChild(o):null,l=NF(r,o);s=s.concat(OF(a,c,u,l))}return i&&(s=s.concat(UC(i,t,r,n))),s}}function LF(t,e,n,r){let i=e.get(Fe());n==null&&i!=null&&(n=jC(i,Fe()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,u=NF(r,o),l=t.operationForChild(o);l&&(s=s.concat(LF(l,a,c,u)))}),i&&(s=s.concat(UC(i,t,r,n))),s}function VF(t,e){return t.tagToQueryMap.get(e)}function BF(t){let e=t.indexOf("$");return L(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Le(t.substr(0,e))}}function UF(t,e,n){let r=t.syncPointTree_.get(e);L(r,"Missing sync point for query tag that we're tracking");let i=TF(t.pendingWriteTree_,e);return UC(r,n,i,null)}var bC=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},TC=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ft(this.path_,e);return new t(this.syncTree_,n)}node(){return FF(this.syncTree_,this.path_)}},Xz=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},jk=function(t,e,n){if(!t||typeof t!="object")return t;if(L(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Jz(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Zz(t[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Jz=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:L(!1,"Unexpected server value: "+t)}},Zz=function(t,e,n){t.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&L(!1,"Unexpected increment value: "+r);let i=e.node();if(L(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},eW=function(t,e,n,r){return $C(e,new TC(n,t),r)},tW=function(t,e,n){return $C(t,new bC(e),n)};function $C(t,e,n){let r=t.getPriority().val(),i=jk(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=jk(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ka(a,Mt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ka(i))),o.forEachChild(Pt,(a,c)=>{let u=$C(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var Dl=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function HC(t,e){let n=e instanceof Le?e:new Le(e),r=t,i=Te(n);for(;i!==null;){let s=ys(r.node.children,i)||{children:{},childCount:0};r=new Dl(i,r,s),n=je(n),i=Te(n)}return r}function ec(t){return t.node.value}function jF(t,e){t.node.value=e,AC(t)}function $F(t){return t.node.childCount>0}function nW(t){return ec(t)===void 0&&!$F(t)}function Xg(t,e){bn(t.node.children,(n,r)=>{e(new Dl(n,t,r))})}function HF(t,e,n,r){n&&!r&&e(t),Xg(t,i=>{HF(i,e,!0,r)}),n&&r&&e(t)}function rW(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Rl(t){return new Le(t.parent===null?t.name:Rl(t.parent)+"/"+t.name)}function AC(t){t.parent!==null&&iW(t.parent,t.name,t)}function iW(t,e,n){let r=nW(n),i=sr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,AC(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,AC(t))}var sW=/[\[\].#$\/\u0000-\u001F\u007F]/,oW=/[\[\].#$\u0000-\u001F\u007F]/,$I=10*1024*1024,qF=function(t){return typeof t=="string"&&t.length!==0&&!sW.test(t)},aW=function(t){return typeof t=="string"&&t.length!==0&&!oW.test(t)},cW=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),aW(t)};var zF=function(t,e,n){let r=n instanceof Le?new nC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Xs(r));if(typeof e=="function")throw new Error(t+"contains a function "+Xs(r)+" with contents = "+e.toString());if(Gk(e))throw new Error(t+"contains "+e.toString()+" "+Xs(r));if(typeof e=="string"&&e.length>$I/3&&uu(e)>$I)throw new Error(t+"contains a string greater than "+$I+" utf8 bytes "+Xs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(bn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!qF(o)))throw new Error(t+" contains an invalid key ("+o+") "+Xs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Zq(r,o),zF(t,a,r),ez(r)}),i&&s)throw new Error(t+' contains ".value" child '+Xs(r)+" in addition to actual children.")}};var uW=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qF(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!cW(n))throw new Error(PS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var SC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function lW(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!pF(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ro(t,e,n){lW(t,n),dW(t,r=>Hn(r,e)||Hn(e,r))}function dW(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(hW(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function hW(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Zs&&Nt("event: "+n.toString()),Al(r)}}}var fW="repo_interrupt",pW=25,RC=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qg(),this.transactionQueueTree_=new Dl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function gW(t,e,n){if(t.stats_=OC(t.repoInfo_),t.forceRestClient_||Aq())t.server_=new hC(t.repoInfo_,(r,i,s,o)=>{$k(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Hk(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new LC(t.repoInfo_,e,(r,i,s,o)=>{$k(t,r,i,s,o)},r=>{Hk(t,r)},r=>{vW(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Rq(t.repoInfo_,()=>new mC(t.stats_,t.server_)),t.infoData_=new fC,t.infoSyncTree_=new Kg({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Qg(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),qC(t,"connected",!1),t.serverSyncTree_=new Kg({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let u=o(a,c);ro(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function mW(t){let n=t.infoData_.getNode(new Le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function WF(t){return Xz({timestamp:mW(t)})}function $k(t,e,n,r,i){t.dataUpdateCount++;let s=new Le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=cu(n,u=>Mt(u));o=Yz(t.serverSyncTree_,s,c,i)}else{let c=Mt(n);o=Qz(t.serverSyncTree_,s,c,i)}else if(r){let c=cu(n,u=>Mt(u));o=Kz(t.serverSyncTree_,s,c)}else{let c=Mt(n);o=Qg(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=WC(t,s)),ro(t.eventQueue_,a,o)}function Hk(t,e){qC(t,"connected",e),e===!1&&_W(t)}function vW(t,e){bn(e,(n,r)=>{qC(t,n,r)})}function qC(t,e,n){let r=new Le("/.info/"+e),i=Mt(n);t.infoData_.updateSnapshot(r,i);let s=Qg(t.infoSyncTree_,r,i);ro(t.eventQueue_,r,s)}function yW(t){return t.nextWriteId_++}function _W(t){GF(t,"onDisconnectEvents");let e=WF(t),n=qg();pC(t.onDisconnect_,Fe(),(i,s)=>{let o=eW(i,s,t.serverSyncTree_,e);EF(n,i,o)});let r=[];pC(n,Fe(),(i,s)=>{r=r.concat(Qg(t.serverSyncTree_,i,s));let o=CW(t,i);WC(t,o)}),t.onDisconnect_=qg(),ro(t.eventQueue_,Fe(),r)}function EW(t){t.persistentConnection_&&t.persistentConnection_.interrupt(fW)}function GF(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Nt(n,...e)}function KF(t,e,n){return FF(t.serverSyncTree_,e,n)||ze.EMPTY_NODE}function zC(t,e=t.transactionQueueTree_){if(e||Jg(t,e),ec(e)){let n=YF(t,e);L(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&wW(t,Rl(e),n)}else $F(e)&&Xg(e,n=>{zC(t,n)})}function wW(t,e,n){let r=n.map(u=>u.currentWriteId),i=KF(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let l=n[u];L(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;let d=xn(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{GF(t,"transaction put response",{path:c.toString(),status:u});let l=[];if(u==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(Ha(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Jg(t,HC(t.transactionQueueTree_,e)),zC(t,t.transactionQueueTree_),ro(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)Al(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{dn("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}WC(t,e)}},o)}function WC(t,e){let n=QF(t,e),r=Rl(n),i=YF(t,n);return IW(t,i,r),r}function IW(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=xn(n,c.path),l=!1,d;if(L(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)l=!0,d=c.abortReason,i=i.concat(Ha(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=pW)l=!0,d="maxretry",i=i.concat(Ha(t.serverSyncTree_,c.currentWriteId,!0));else{let h=KF(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){zF("transaction failed: Data returned ",f,c.path);let p=Mt(f);typeof f=="object"&&f!=null&&sr(f,".priority")||(p=p.updatePriority(h.getPriority()));let y=c.currentWriteId,g=WF(t),m=tW(p,h,g);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=yW(t),o.splice(o.indexOf(y),1),i=i.concat(Gz(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally)),i=i.concat(Ha(t.serverSyncTree_,y,!0))}else l=!0,d="nodata",i=i.concat(Ha(t.serverSyncTree_,c.currentWriteId,!0))}ro(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Jg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Al(r[a]);zC(t,t.transactionQueueTree_)}function QF(t,e){let n,r=t.transactionQueueTree_;for(n=Te(e);n!==null&&ec(r)===void 0;)r=HC(r,n),e=je(e),n=Te(e);return r}function YF(t,e){let n=[];return XF(t,e,n),n.sort((r,i)=>r.order-i.order),n}function XF(t,e,n){let r=ec(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Xg(e,i=>{XF(t,i,n)})}function Jg(t,e){let n=ec(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,jF(e,n.length>0?n:void 0)}Xg(e,r=>{Jg(t,r)})}function CW(t,e){let n=Rl(QF(t,e)),r=HC(t.transactionQueueTree_,e);return rW(r,i=>{HI(t,i)}),HI(t,r),HF(r,i=>{HI(t,i)}),n}function HI(t,e){let n=ec(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(L(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(L(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ha(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?jF(e,void 0):n.length=s+1,ro(t.eventQueue_,Rl(e),i);for(let o=0;o<r.length;o++)Al(r[o])}}function xW(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function DW(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):dn(`Invalid query segment '${n}' in query '${t}'`)}return e}var qk=function(t,e){let n=bW(t),r=n.namespace;n.domain==="firebase.com"&&Yr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Yr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Eq();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Lg(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Le(n.pathString)}},bW=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");l===-1&&(l=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=xW(t.substring(l,d)));let h=DW(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var NC=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ie(this._path)?null:dF(this._path)}get ref(){return new Ja(this._repo,this._path)}get _queryIdentifier(){let e=Rk(this._queryParams),n=FC(e);return n==="{}"?"default":n}get _queryObject(){return Rk(this._queryParams)}isEqual(e){if(e=et(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=pF(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Jq(this._path)}};var Ja=class t extends NC{constructor(e,n){super(e,n,new dC,!1)}get parent(){let e=fF(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};zz(Ja);Wz(Ja);var TW="FIREBASE_DATABASE_EMULATOR_HOST",MC={},AW=!1;function SW(t,e,n,r){t.repoInfo_=new Lg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function RW(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Yr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=qk(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[TW]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=qk(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let l=i&&c?new El(El.OWNER):new QI(t.name,t.options,e);uW("Invalid Firebase Database URL",o),Ie(o.path)||Yr("Database URL must point to the root of a Firebase Database (not including a child path).");let d=MW(a,t,l,new KI(t.name,n));return new PC(d,t)}function NW(t,e){let n=MC[e];(!n||n[t.key]!==t)&&Yr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),EW(t),delete n[t.key]}function MW(t,e,n,r){let i=MC[e.name];i||(i={},MC[e.name]=i);let s=i[t.toURLString()];return s&&Yr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new RC(t,AW,n,r),i[t.toURLString()]=s,s}var PC=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ja(this._repo,Fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(NW(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yr("Cannot call "+e+" on a deleted database.")}};function JF(t=Di(),e){let n=Cs(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Zh("database");r&&ZF(n,...r)}return n}function ZF(t,e,n,r={}){t=et(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Yr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Yr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new El(El.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:ef(r.mockUserToken,t.app.options.projectId);s=new El(o)}SW(i,e,n,s)}function PW(t){vq(ur),cr(new Xt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return RW(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),qe(hk,fk,t),qe(hk,fk,"esm2017")}LC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};LC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};PW();var Nl=class{constructor(e){return e}},eO="database",GC=class{constructor(){return Ds(eO)}};var KC=new K("angularfire2.database-instances");function kW(t,e){let n=la(eO,t,e);return n&&new Nl(n)}function FW(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Nl(r)}}var OW={provide:GC,deps:[[new Ze,KC]]},LW={provide:Nl,useFactory:kW,deps:[[new Ze,KC],Vn]},VW=(()=>{class t{constructor(){qe("angularfire",Ur.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=xt({type:t});static \u0275inj=Dt({providers:[LW,OW]})}return t})();function tO(t,...e){return{ngModule:VW,providers:[{provide:KC,useFactory:FW(t),multi:!0,deps:[Se,mt,Ti,jr,[new Ze,Ns],[new Ze,bi],...e]}]}}var nO=Ut(JF,!0);var rO={providers:[GA(dk),Bo(KS(()=>QS(ZA.firebase))),Bo(U1(()=>j1())),Bo(XM(()=>JM())),Bo(tO(()=>nO()))]};var iO=(()=>{let e=class e{constructor(){this.title="pass-man"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=vn({type:e,selectors:[["app-root"]],standalone:!0,features:[_n],decls:1,vars:0,template:function(i,s){i&1&&bt(0,"router-outlet")},dependencies:[gy],encapsulation:2});let t=e;return t})();sA(iO,rO).catch(t=>console.error(t));
